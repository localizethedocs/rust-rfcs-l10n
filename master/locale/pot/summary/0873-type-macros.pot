msgid ""
msgstr ""
"Project-Id-Version: The Rust RFC Book\n"
"POT-Creation-Date: 2025-12-22T09:04:43Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"Language: en\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/0873-type-macros.md:1
msgid "Feature Name: macros_in_type_positions"
msgstr ""

#: src/0873-type-macros.md:2
msgid "Start Date: 2015-02-16"
msgstr ""

#: src/0873-type-macros.md:3
msgid ""
"RFC PR: [rust-lang/rfcs#873](https://github.com/rust-lang/rfcs/pull/873)"
msgstr ""

#: src/0873-type-macros.md:4
msgid ""
"Rust Issue: [rust-lang/rust#27245](https://github.com/rust-lang/rust/"
"issues/27245)"
msgstr ""

#: src/0873-type-macros.md:6
msgid "Summary"
msgstr ""

#: src/0873-type-macros.md:8
msgid "Allow macros in type positions"
msgstr ""

#: src/0873-type-macros.md:10
msgid "Motivation"
msgstr ""

#: src/0873-type-macros.md:12
msgid ""
"Macros are currently allowed in syntax fragments for expressions, items, and "
"patterns, but not for types. This RFC proposes to lift that restriction."
msgstr ""

#: src/0873-type-macros.md:16
msgid ""
"This would allow macros to be used more flexibly, avoiding the need for more "
"complex item-level macros or plugins in some cases. For example, when "
"creating trait implementations with macros, it is sometimes useful to be "
"able to define the associated types using a nested type macro but this is "
"currently problematic."
msgstr ""

#: src/0873-type-macros.md:23
msgid ""
"Enable more programming patterns, particularly with respect to type level "
"programming. Macros in type positions provide convenient way to express "
"recursion and choice. It is possible to do the same thing purely through "
"programming with associated types but the resulting code can be cumbersome "
"to read and write."
msgstr ""

#: src/0873-type-macros.md:30
msgid "Detailed design"
msgstr ""

#: src/0873-type-macros.md:32
msgid "Implementation"
msgstr ""

#: src/0873-type-macros.md:34
msgid ""
"The proposed feature has been prototyped at [this branch](https://github.com/"
"freebroccolo/rust/commits/feature/type_macros). The implementation is "
"straightforward and the impact of the changes are limited in scope to the "
"macro system. Type-checking and other phases of compilation should be "
"unaffected."
msgstr ""

#: src/0873-type-macros.md:40
msgid ""
"The most significant change introduced by this feature is a [`TyMac`]"
"(https://github.com/freebroccolo/rust/blob/"
"f8f8dbb6d332c364ecf26b248ce5f872a7a67019/src/libsyntax/ast.rs#L1274-L1275) "
"case for the `Ty_` enum so that the parser can indicate a macro invocation "
"in a type position. In other words, `TyMac` is added to the ast and handled "
"analogously to `ExprMac`, `ItemMac`, and `PatMac`."
msgstr ""

#: src/0873-type-macros.md:46
msgid "Example: Heterogeneous Lists"
msgstr ""

#: src/0873-type-macros.md:48
msgid ""
"Heterogeneous lists are one example where the ability to express recursion "
"via type macros is very useful. They can be used as an alternative to or in "
"combination with tuples. Their recursive structure provide a means to "
"abstract over arity and to manipulate arbitrary products of types with "
"operations like appending, taking length, adding/removing items, computing "
"permutations, etc."
msgstr ""

#: src/0873-type-macros.md:55
msgid "Heterogeneous lists can be defined like so:"
msgstr ""

#: src/0873-type-macros.md:59
msgid "// empty HList\n"
msgstr ""

#: src/0873-type-macros.md:61
msgid "// cons cell of HList\n"
msgstr ""

#: src/0873-type-macros.md:62
msgid "// trait to classify valid HLists\n"
msgstr ""

#: src/0873-type-macros.md:69
msgid "However, writing HList terms in code is not very convenient:"
msgstr ""

#: src/0873-type-macros.md:72 src/0873-type-macros.md:93
#: src/0873-type-macros.md:100 src/0873-type-macros.md:130
#: src/0873-type-macros.md:180 src/0873-type-macros.md:188
msgid "\"foo\""
msgstr ""

#: src/0873-type-macros.md:75
msgid "At the term-level, this is an easy fix using macros:"
msgstr ""

#: src/0873-type-macros.md:78 src/0873-type-macros.md:108
msgid "// term-level macro for HLists\n"
msgstr ""

#: src/0873-type-macros.md:85 src/0873-type-macros.md:115
msgid "// term-level HLists in patterns\n"
msgstr ""

#: src/0873-type-macros.md:96
msgid ""
"Unfortunately, this solution is incomplete because we have only made HList "
"terms easier to write. HList types are still inconvenient:"
msgstr ""

#: src/0873-type-macros.md:103
msgid ""
"Allowing type macros as this RFC proposes would allows us to be able to use "
"Rust's macros to improve writing the HList type as well. The complete "
"example follows:"
msgstr ""

#: src/0873-type-macros.md:122
msgid "// type-level macro for HLists\n"
msgstr ""

#: src/0873-type-macros.md:133
msgid ""
"Operations on HLists can be defined by recursion, using traits with "
"associated type outputs at the type-level and implementation methods at the "
"term-level."
msgstr ""

#: src/0873-type-macros.md:137
msgid ""
"The HList append operation is provided as an example. Type macros are used "
"to make writing append at the type level (see `Expr!`) more convenient than "
"specifying the associated type projection manually:"
msgstr ""

#: src/0873-type-macros.md:143
msgid "// nil case for HList append\n"
msgstr ""

#: src/0873-type-macros.md:152
msgid "// cons case for HList append\n"
msgstr ""

#: src/0873-type-macros.md:163
msgid "// type macro Expr allows us to expand the + operator appropriately\n"
msgstr ""

#: src/0873-type-macros.md:171
msgid ""
"// test demonstrating term level `xs + ys` and type level `Expr!(Xs + Ys)`\n"
msgstr ""

#: src/0873-type-macros.md:183
msgid "// demonstrate recursive expansion of Expr!\n"
msgstr ""

#: src/0873-type-macros.md:192
msgid "Drawbacks"
msgstr ""

#: src/0873-type-macros.md:194
msgid ""
"There seem to be few drawbacks to implementing this feature as an extension "
"of the existing macro machinery. The change adds a small amount of "
"additional complexity to the [parser](https://github.com/freebroccolo/rust/"
"commit/a224739e92a3aa1febb67d6371988622bd141361) and [conversion](https://"
"github.com/freebroccolo/rust/"
"commit/9341232087991dee73713dc4521acdce11a799a2) but the changes are minimal."
msgstr ""

#: src/0873-type-macros.md:202
msgid ""
"As with all feature proposals, it is possible that designs for future "
"extensions to the macro system or type system might interfere with this "
"functionality but it seems unlikely unless they are significant, breaking "
"changes."
msgstr ""

#: src/0873-type-macros.md:207
msgid "Alternatives"
msgstr ""

#: src/0873-type-macros.md:209
msgid ""
"There are no _direct_ alternatives. Extensions to the type system like data "
"kinds, singletons, and other forms of staged programming (so-called CTFE) "
"might alleviate the need for type macros in some cases, however it is "
"unlikely that they would provide a comprehensive replacement, particularly "
"where plugins are concerned."
msgstr ""

#: src/0873-type-macros.md:215
msgid ""
"Not implementing this feature would mean not taking some reasonably low-"
"effort steps toward making certain programming patterns easier. One "
"potential consequence of this might be more pressure to significantly extend "
"the type system and other aspects of the language to compensate."
msgstr ""

#: src/0873-type-macros.md:221
msgid "Unresolved questions"
msgstr ""

#: src/0873-type-macros.md:223
msgid "Alternative syntax for macro invocations in types"
msgstr ""

#: src/0873-type-macros.md:225
msgid ""
"There is a question as to whether type macros should allow `<` and `>` as "
"delimiters for invocations, e.g. `Foo!<A>`. This would raise a number of "
"additional complications and is probably not necessary to consider for this "
"RFC. If deemed desirable by the community, this functionality should be "
"proposed separately."
msgstr ""

#: src/0873-type-macros.md:231
msgid "Hygiene and type macros"
msgstr ""

#: src/0873-type-macros.md:233
msgid ""
"This RFC also does not address the topic of hygiene regarding macros in "
"types. It is not clear whether there are issues here or not but it may be "
"worth considering in further detail."
msgstr ""
