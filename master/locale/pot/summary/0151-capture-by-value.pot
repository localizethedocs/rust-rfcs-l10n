msgid ""
msgstr ""
"Project-Id-Version: The Rust RFC Book\n"
"POT-Creation-Date: 2025-12-01T05:53:02Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Language: en\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/0151-capture-by-value.md:1
msgid "Start Date: 2014-07-02"
msgstr ""

#: src/0151-capture-by-value.md:2
msgid ""
"RFC PR: [rust-lang/rfcs#151](https://github.com/rust-lang/rfcs/pull/151)"
msgstr ""

#: src/0151-capture-by-value.md:3
msgid ""
"Rust Issue: [rust-lang/rust#12831](https://github.com/rust-lang/rust/"
"issues/12831)"
msgstr ""

#: src/0151-capture-by-value.md:5
msgid "Summary"
msgstr ""

#: src/0151-capture-by-value.md:7
msgid ""
"Closures should capture their upvars by value unless the `ref` keyword is "
"used."
msgstr ""

#: src/0151-capture-by-value.md:9
msgid "Motivation"
msgstr ""

#: src/0151-capture-by-value.md:11
msgid ""
"For unboxed closures, we will need to syntactically distinguish between "
"captures by value and captures by reference."
msgstr ""

#: src/0151-capture-by-value.md:13
msgid "Detailed design"
msgstr ""

#: src/0151-capture-by-value.md:15
msgid ""
"This is a small part of #114, split off to separate it from the rest of the "
"discussion going on in that RFC."
msgstr ""

#: src/0151-capture-by-value.md:17
msgid ""
"Closures should capture their upvars (closed-over variables) by value unless "
"the `ref` keyword precedes the opening `|` of the argument list. Thus `|x| x "
"+ 2` will capture `x` by value (and thus, if `x` is not `Copy`, it will move "
"`x` into the closure), but `ref |x| x + 2` will capture `x` by reference."
msgstr ""

#: src/0151-capture-by-value.md:19
msgid ""
"In an unboxed-closures world, the immutability/mutability of the borrow (as "
"the case may be) is inferred from the type of the closure: `Fn` captures by "
"immutable reference, while `FnMut` captures by mutable reference. In a boxed-"
"closures world, the borrows are always mutable."
msgstr ""

#: src/0151-capture-by-value.md:21
msgid "Drawbacks"
msgstr ""

#: src/0151-capture-by-value.md:23
msgid ""
"It may be that `ref` is unwanted complexity; it only changes the semantics "
"of 10%-20% of closures, after all. This does not add any core functionality "
"to the language, as a reference can always be made explicitly and then "
"captured. However, there are a _lot_ of closures, and the workaround to "
"capture a reference by value is painful."
msgstr ""

#: src/0151-capture-by-value.md:25
msgid "Alternatives"
msgstr ""

#: src/0151-capture-by-value.md:27
msgid ""
"As above, the impact of not doing this is that reference semantics would "
"have to be achieved. However, the diff against current Rust was thousands of "
"lines of pretty ugly code."
msgstr ""

#: src/0151-capture-by-value.md:29
msgid ""
"Another alternative would be to annotate each individual upvar with its "
"capture semantics, like capture clauses in C++11. This proposal does not "
"preclude adding that functionality should it be deemed useful in the future. "
"Note that C++11 provides a syntax for capturing all upvars by reference, "
"exactly as this proposal does."
msgstr ""

#: src/0151-capture-by-value.md:31
msgid "Unresolved questions"
msgstr ""

#: src/0151-capture-by-value.md:33
msgid "None."
msgstr ""
