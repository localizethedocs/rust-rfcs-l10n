msgid ""
msgstr ""
"Project-Id-Version: The Rust RFC Book\n"
"POT-Creation-Date: 2025-12-22T09:04:42Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"Language: en\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/0016-more-attributes.md:1
msgid "Start Date: 2014-03-20"
msgstr ""

#: src/0016-more-attributes.md:2
msgid "RFC PR: [rust-lang/rfcs#16](https://github.com/rust-lang/rfcs/pull/16)"
msgstr ""

#: src/0016-more-attributes.md:3
msgid ""
"Rust Issue: [rust-lang/rust#15701](https://github.com/rust-lang/rust/"
"issues/15701)"
msgstr ""

#: src/0016-more-attributes.md:5
msgid "Summary"
msgstr ""

#: src/0016-more-attributes.md:7
msgid ""
"Allow attributes on more places inside functions, such as statements, blocks "
"and expressions."
msgstr ""

#: src/0016-more-attributes.md:10
msgid "Motivation"
msgstr ""

#: src/0016-more-attributes.md:12
msgid ""
"One sometimes wishes to annotate things inside functions with, for example, "
"lint `#[allow]`s, conditional compilation `#[cfg]`s, and even extra semantic "
"(or otherwise) annotations for external tools."
msgstr ""

#: src/0016-more-attributes.md:16
msgid ""
"For the lints, one can currently only activate lints at the level of the "
"function which is possibly larger than one needs, and so may allow other "
"\"bad\" things to sneak through accidentally. E.g."
msgstr ""

#: src/0016-more-attributes.md:22
msgid "// lowercase looks like one or capital i\n"
msgstr ""

#: src/0016-more-attributes.md:25
msgid ""
"For the conditional compilation, the work-around is duplicating the whole "
"containing function with a `#[cfg]`, or breaking the conditional code into a "
"its own function. This does mean that any variables need to be explicitly "
"passed as arguments."
msgstr ""

#: src/0016-more-attributes.md:30
msgid "The sort of things one could do with other arbitrary annotations are"
msgstr ""

#: src/0016-more-attributes.md:34
msgid "\"2014-04-22\""
msgstr ""

#: src/0016-more-attributes.md:38
msgid ""
"and then have an external tool that checks that that `unsafe` block's only "
"unsafe actions are FFI, or a tool that lists blocks that have been changed "
"since the last audit or haven't been audited ever."
msgstr ""

#: src/0016-more-attributes.md:42
msgid ""
"The minimum useful functionality would be supporting attributes on blocks "
"and `let` statements, since these are flexible enough to allow for "
"relatively precise attribute handling."
msgstr ""

#: src/0016-more-attributes.md:46
msgid "Detailed design"
msgstr ""

#: src/0016-more-attributes.md:48
msgid "Normal attribute syntax on `let` statements, blocks and expressions."
msgstr ""

#: src/0016-more-attributes.md:57 src/0016-more-attributes.md:62
msgid "// code\n"
msgstr ""

#: src/0016-more-attributes.md:74
msgid ""
"Attributes bind tighter than any operator, that is `#[attr] x op y` is "
"always parsed as `(#[attr] x) op y`."
msgstr ""

#: src/0016-more-attributes.md:77
msgid "`cfg`"
msgstr ""

#: src/0016-more-attributes.md:79
msgid ""
"It is definitely an error to place a `#[cfg]` attribute on a non-statement "
"expressions, that is, `attr1`\\--`attr4` can possibly be `#[cfg(foo)]`, but "
"`attr5`\\--`attr7` cannot, since it makes little sense to strip code down to "
"`let x = ;`."
msgstr ""

#: src/0016-more-attributes.md:84
msgid ""
"However, like `#ifdef` in C/C++, widespread use of `#[cfg]` may be an "
"antipattern that makes code harder to read. This RFC is just adding the "
"ability for attributes to be placed in specific places, it is not mandating "
"that `#[cfg]` actually be stripped in those places (although it should be an "
"error if it is ignored)."
msgstr ""

#: src/0016-more-attributes.md:90
msgid "Inner attributes"
msgstr ""

#: src/0016-more-attributes.md:92
msgid ""
"Inner attributes can be placed at the top of blocks (and other structure "
"incorporating a block) and apply to that block."
msgstr ""

#: src/0016-more-attributes.md:107
msgid "// are the same as\n"
msgstr ""

#: src/0016-more-attributes.md:121
msgid "`if`"
msgstr ""

#: src/0016-more-attributes.md:123
msgid ""
"Attributes would be disallowed on `if` for now, because the interaction with "
"`if`/`else` chains are funky, and can be simulated in other ways."
msgstr ""

#: src/0016-more-attributes.md:135
msgid ""
"There is two possible interpretations of such a piece of code, depending on "
"if one regards the attributes as attaching to the whole `if ... else` chain "
"(\"exterior\") or just to the branch on which they are placed (\"interior\")."
msgstr ""

#: src/0016-more-attributes.md:140
msgid ""
"`--cfg foo`: could be either removing the whole chain (exterior) or "
"equivalent to `if cond2 {} else {}` (interior)."
msgstr ""

#: src/0016-more-attributes.md:142
msgid ""
"`--cfg bar`: could be either `if cond1 {}` (_e_) or `if cond1 {} else {}` "
"(_i_)"
msgstr ""

#: src/0016-more-attributes.md:144
msgid ""
"`--cfg baz`: equivalent to `if cond1 {} else if cond2 {}` (no subtlety)."
msgstr ""

#: src/0016-more-attributes.md:145
msgid ""
"`--cfg foo --cfg bar`: could be removing the whole chain (_e_) or the two "
"`if` branches (leaving only the `else` branch) (_i_)."
msgstr ""

#: src/0016-more-attributes.md:148
msgid ""
"(This applies to any attribute that has some sense of scoping, not just "
"`#[cfg]`, e.g. `#[allow]` and `#[warn]` for lints.)"
msgstr ""

#: src/0016-more-attributes.md:151
msgid ""
"As such, to avoid confusion, attributes would not be supported on `if`. "
"Alternatives include using blocks:"
msgstr ""

#: src/0016-more-attributes.md:155
msgid "// becomes, for an exterior attribute,\n"
msgstr ""

#: src/0016-more-attributes.md:159
msgid "// and, for an interior attribute,\n"
msgstr ""

#: src/0016-more-attributes.md:166
msgid ""
"And, if the attributes are meant to be associated with the actual branching "
"(e.g. a hypothetical `#[cold]` attribute that indicates a branch is "
"unlikely), one can annotate `match` arms:"
msgstr ""

#: src/0016-more-attributes.md:177
msgid "Drawbacks"
msgstr ""

#: src/0016-more-attributes.md:179
msgid ""
"This starts mixing attributes with nearly arbitrary code, possibly "
"dramatically restricting syntactic changes related to them, for example, "
"there was some consideration for using `@` for attributes, this change may "
"make this impossible (especially if `@` gets reused for something else, e.g. "
"Python is [using it for matrix multiplication](http://legacy.python.org/dev/"
"peps/pep-0465/)). It may also make it impossible to use `#` for other things."
msgstr ""

#: src/0016-more-attributes.md:187
msgid ""
"As stated above, allowing `#[cfg]`s everywhere can make code harder to "
"reason about, but (also stated), this RFC is not for making such `#[cfg]`s "
"be obeyed, it just opens the language syntax to possibly allow it."
msgstr ""

#: src/0016-more-attributes.md:192
msgid "Alternatives"
msgstr ""

#: src/0016-more-attributes.md:194
msgid ""
"These instances could possibly be approximated with macros and helper "
"functions, but to a low degree degree (e.g. how would one annotate a general "
"`unsafe` block)."
msgstr ""

#: src/0016-more-attributes.md:198
msgid ""
"Only allowing attributes on \"statement expressions\" that is, expressions "
"at the top level of a block, this is slightly limiting; but we can expand to "
"support other contexts backwards compatibly in the future."
msgstr ""

#: src/0016-more-attributes.md:203
msgid ""
"The `if`/`else` issue may be able to be resolved by introducing explicit "
"\"interior\" and \"exterior\" attributes on `if`: by having `#[attr] if cond "
"{ ...` be an exterior attribute (applying to the whole `if`/`else` chain) "
"and `if cond #[attr] { ... ` be an interior attribute (applying to only the "
"current `if` branch). There is no difference between interior and exterior "
"for an `else {` branch, and so `else #[attr] {` is sufficient."
msgstr ""

#: src/0016-more-attributes.md:212
msgid "Unresolved questions"
msgstr ""

#: src/0016-more-attributes.md:214
msgid ""
"Are the complications of allowing attributes on arbitrary expressions worth "
"the benefits?"
msgstr ""
