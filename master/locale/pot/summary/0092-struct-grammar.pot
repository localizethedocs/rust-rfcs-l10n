msgid ""
msgstr ""
"Project-Id-Version: The Rust RFC Book\n"
"POT-Creation-Date: 2025-12-22T09:04:42Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"Language: en\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/0092-struct-grammar.md:1
msgid "Start Date: 2014-06-10"
msgstr ""

#: src/0092-struct-grammar.md:2
msgid "RFC PR: [rust-lang/rfcs#92](https://github.com/rust-lang/rfcs/pull/92)"
msgstr ""

#: src/0092-struct-grammar.md:3
msgid ""
"Rust Issue: [rust-lang/rust#14803](https://github.com/rust-lang/rust/"
"issues/14803)"
msgstr ""

#: src/0092-struct-grammar.md:5
msgid "Summary"
msgstr ""

#: src/0092-struct-grammar.md:7
msgid ""
"Do not identify struct literals by searching for `:`. Instead define a sub- "
"category of expressions which excludes struct literals and re-define `for`, "
"`if`, and other expressions which take an expression followed by a block (or "
"non-terminal which can be replaced by a block) to take this sub-category, "
"instead of all expressions."
msgstr ""

#: src/0092-struct-grammar.md:13
msgid "Motivation"
msgstr ""

#: src/0092-struct-grammar.md:15
msgid ""
"Parsing by looking ahead is fragile - it could easily be broken if we allow "
"`:` to appear elsewhere in types (e.g., type ascription) or if we change "
"struct literals to not require the `:` (e.g., if we allow empty structs to "
"be written with braces, or if we allow struct literals to unify field names "
"to local variable names, as has been suggested in the past and which we "
"currently do for struct literal patterns). We should also be able to give "
"better error messages today if users make these mistakes. More worryingly, "
"we might come up with some language feature in the future which is not "
"predictable now and which breaks with the current system."
msgstr ""

#: src/0092-struct-grammar.md:25
msgid ""
"Hopefully, it is pretty rare to use struct literals in these positions, so "
"there should not be much fallout. Any problems can be easily fixed by "
"assigning the struct literal into a variable. However, this is a backwards "
"incompatible change, so it should block 1.0."
msgstr ""

#: src/0092-struct-grammar.md:30
msgid "Detailed design"
msgstr ""

#: src/0092-struct-grammar.md:32
msgid "Here is a simplified version of a subset of Rust's abstract syntax:"
msgstr ""

#: src/0092-struct-grammar.md:46
msgid ""
"Parsing this grammar is ambiguous since `x` cannot be distinguished from "
"`name`, so `e block` in the for expression is ambiguous with the struct "
"literal expression. We currently solve this by using lookahead to find a `:` "
"token in the struct literal."
msgstr ""

#: src/0092-struct-grammar.md:51
msgid "I propose the following adjustment:"
msgstr ""

#: src/0092-struct-grammar.md:68
msgid ""
"`e'` is just e without struct literal expressions. We use `e'` instead of "
"`e` wherever `e` is followed directly by block or any other non-terminal "
"which may have block as its first terminal (after any possible expansions)."
msgstr ""

#: src/0092-struct-grammar.md:72
msgid ""
"For any expressions where a sub-expression is the final lexical element "
"(closures in the subset above, but also unary and binary operations), we "
"require two versions of the meta-expression - the normal one in `e` and a "
"version with `e'` for the final element in `e'`."
msgstr ""

#: src/0092-struct-grammar.md:77
msgid ""
"Implementation would be simpler, we just add a flag to `parser::restriction` "
"called `RESTRICT_BLOCK` or something, which puts us into a mode which "
"reflects `e'`. We would drop in to this mode when parsing `e'` position "
"expressions and drop out of it for all but the last sub-expression of an "
"expression."
msgstr ""

#: src/0092-struct-grammar.md:82
msgid "Drawbacks"
msgstr ""

#: src/0092-struct-grammar.md:84
msgid ""
"It makes the formal grammar and parsing a little more complicated (although "
"it is simpler in terms of needing less lookahead and avoiding a special "
"case)."
msgstr ""

#: src/0092-struct-grammar.md:87
msgid "Alternatives"
msgstr ""

#: src/0092-struct-grammar.md:89
msgid "Don't do this."
msgstr ""

#: src/0092-struct-grammar.md:91
msgid ""
"Allow all expressions but greedily parse non-terminals in these positions, e."
"g., `for N {} {}` would be parsed as `for (N {}) {}`. This seems worse "
"because I believe it will be much rarer to have structs in these positions "
"than to have an identifier in the first position, followed by two blocks (i."
"e., parse as `(for N {}) {}`)."
msgstr ""

#: src/0092-struct-grammar.md:97
msgid "Unresolved questions"
msgstr ""

#: src/0092-struct-grammar.md:99
msgid ""
"Do we need to expose this distinction anywhere outside of the parser? E.g., "
"macros?"
msgstr ""
