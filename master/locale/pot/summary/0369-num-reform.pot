msgid ""
msgstr ""
"Project-Id-Version: The Rust RFC Book\n"
"POT-Creation-Date: 2025-12-01T05:53:02Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Language: en\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/0369-num-reform.md:1
msgid "Start Date: 2014-09-16"
msgstr ""

#: src/0369-num-reform.md:2
msgid ""
"RFC PR: [rust-lang/rfcs#369](https://github.com/rust-lang/rfcs/pull/369)"
msgstr ""

#: src/0369-num-reform.md:3
msgid ""
"Rust Issue: [rust-lang/rust#18640](https://github.com/rust-lang/rust/"
"issues/18640)"
msgstr ""

#: src/0369-num-reform.md:5
msgid "Summary"
msgstr ""

#: src/0369-num-reform.md:7
msgid ""
"This RFC is preparation for API stabilization for the `std::num` module.  "
"The proposal is to finish the simplification efforts started in [@bjz's "
"reversal of the numerics hierarchy](https://github.com/rust-lang/rust/"
"issues/10387)."
msgstr ""

#: src/0369-num-reform.md:11
msgid ""
"Broadly, the proposal is to collapse the remaining numeric hierarchy in "
"`std::num`, and to provide only limited support for generic programming "
"(roughly, only over primitive numeric types that vary based on size).  "
"Traits giving detailed numeric hierarchy can and should be provided "
"separately through the Cargo ecosystem."
msgstr ""

#: src/0369-num-reform.md:17
msgid ""
"Thus, this RFC proposes to flatten or remove most of the traits currently "
"provided by `std::num`, and generally to simplify the module as much as "
"possible in preparation for API stabilization."
msgstr ""

#: src/0369-num-reform.md:21
msgid "Motivation"
msgstr ""

#: src/0369-num-reform.md:23
msgid "History"
msgstr ""

#: src/0369-num-reform.md:25
msgid ""
"Starting in early 2013, there was [an effort](https://github.com/rust-lang/"
"rust/issues/4819) to design a comprehensive \"numeric hierarchy\" for Rust: "
"a collection of traits classifying a wide variety of numbers and other "
"algebraic objects. The intent was to allow highly-generic code to be written "
"for algebraic structures and then instantiated to particular types."
msgstr ""

#: src/0369-num-reform.md:32
msgid ""
"This hierarchy covered structures like bigints, but also primitive integer "
"and float types. It was an enormous and long-running community effort."
msgstr ""

#: src/0369-num-reform.md:35
msgid ""
"Later, [it was recognized](https://github.com/rust-lang/rust/issues/10387) "
"that building such a hierarchy within `libstd` was misguided:"
msgstr ""

#: src/0369-num-reform.md:38
msgid ""
"@bjz The API that resulted from #4819 attempted, like Haskell, to blend both "
"the primitive numerics and higher level mathematical concepts into one API. "
"This resulted in an ugly hybrid where neither goal was adequately met. I "
"think the libstd should have a strong focus on implementing fundamental "
"operations for the base numeric types, but no more. Leave the higher level "
"concepts to libnum or future community projects."
msgstr ""

#: src/0369-num-reform.md:45
msgid ""
"The `std::num` module has thus been slowly migrating _away_ from a large "
"trait hierarchy toward a simpler one providing just APIs for primitive data "
"types: this is [@bjz's reversal of the numerics hierarchy](https://github."
"com/rust-lang/rust/issues/10387)."
msgstr ""

#: src/0369-num-reform.md:50
msgid ""
"Along side this effort, there are already external numerics packages like "
"[@bjz's num-rs](https://github.com/bjz/num-rs)."
msgstr ""

#: src/0369-num-reform.md:53
msgid "But we're not finished yet."
msgstr ""

#: src/0369-num-reform.md:55
msgid "The current state of affairs"
msgstr ""

#: src/0369-num-reform.md:57
msgid ""
"The `std::num` module still contains quite a few traits that subdivide out "
"various features of numbers:"
msgstr ""

#: src/0369-num-reform.md:110 src/0369-num-reform.md:118
msgid ""
"// many additional defaulted methods\n"
"    // ...\n"
msgstr ""

#: src/0369-num-reform.md:148
msgid "// a huge collection of static functions (for constants) and methods\n"
msgstr ""

#: src/0369-num-reform.md:153
msgid "// an additional collection of methods\n"
msgstr ""

#: src/0369-num-reform.md:157
msgid ""
"The `Primitive` traits are intended primarily to support a mechanism, "
"`#[deriving(FromPrimitive)]`, that makes it easy to provide conversions from "
"numeric types to C-like `enum`s."
msgstr ""

#: src/0369-num-reform.md:161
msgid ""
"The `Saturating` and `Checked` traits provide operations that provide "
"special handling for overflow and other numeric errors."
msgstr ""

#: src/0369-num-reform.md:164
msgid "Almost all of these traits are currently included in the prelude."
msgstr ""

#: src/0369-num-reform.md:166
msgid ""
"In addition to these traits, the `std::num` module includes a couple dozen "
"free functions, most of which duplicate methods available though traits."
msgstr ""

#: src/0369-num-reform.md:170
msgid "Where we want to go: a summary"
msgstr ""

#: src/0369-num-reform.md:172
msgid ""
"The goal of this RFC is to refactor the `std::num` hierarchy with the "
"following goals in mind:"
msgstr ""

#: src/0369-num-reform.md:175
msgid "Simplicity."
msgstr ""

#: src/0369-num-reform.md:177
msgid ""
"_Limited_ generic programming: being able to work generically over the "
"natural classes of _primitive_ numeric types that vary only by size.  There "
"should be enough abstraction to support porting `strconv`, the generic "
"string/number conversion code used in `std`."
msgstr ""

#: src/0369-num-reform.md:182
msgid ""
"Minimizing dependencies for `libcore`. For example, it should not require "
"`cmath`."
msgstr ""

#: src/0369-num-reform.md:185
msgid ""
"Future-proofing for external numerics packages. The Cargo ecosystem should "
"ultimately provide choices of sophisticated numeric hierarchies, and `std::"
"num` should not get in the way."
msgstr ""

#: src/0369-num-reform.md:189
msgid "Detailed design"
msgstr ""

#: src/0369-num-reform.md:191
msgid "Overview: the new hierarchy"
msgstr ""

#: src/0369-num-reform.md:193
msgid ""
"This RFC proposes to collapse the trait hierarchy in `std::num` to just the "
"following traits:"
msgstr ""

#: src/0369-num-reform.md:196
msgid ""
"`Int`, implemented by all primitive integer types (`u8` - `u64`, `i8`\\-"
"`i64`)"
msgstr ""

#: src/0369-num-reform.md:197
msgid "`UnsignedInt`, implemented by `u8` - `u64`"
msgstr ""

#: src/0369-num-reform.md:198
msgid ""
"`Signed`, implemented by all signed primitive numeric types (`i8`\\-`i64`, "
"`f32`\\-`f64`)"
msgstr ""

#: src/0369-num-reform.md:199
msgid "`Float`, implemented by `f32` and `f64`"
msgstr ""

#: src/0369-num-reform.md:200
msgid ""
"`FloatMath`, implemented by `f32` and `f64`, which provides functionality "
"from `cmath`"
msgstr ""

#: src/0369-num-reform.md:202
msgid ""
"These traits inherit from all applicable overloaded operator traits (from "
"`core::ops`).  They suffice for generic programming over several basic "
"categories of primitive numeric types."
msgstr ""

#: src/0369-num-reform.md:206
msgid ""
"As designed, these traits include a certain amount of redundancy between "
"`Int` and `Float`. The Alternatives section shows how this could be factored "
"out into a separate `Num` trait. But doing so suggests a level of generic "
"programming that these traits aren't intended to support."
msgstr ""

#: src/0369-num-reform.md:212
msgid ""
"The main reason to pull out `Signed` into its own trait is so that it can be "
"added to the prelude. (Further discussion below.)"
msgstr ""

#: src/0369-num-reform.md:215
msgid "Detailed definitions"
msgstr ""

#: src/0369-num-reform.md:217
msgid ""
"Below is the full definition of these traits. The functionality remains "
"largely as it is today, just organized into fewer traits:"
msgstr ""

#: src/0369-num-reform.md:227 src/0369-num-reform.md:278
msgid "// Constants\n"
msgstr ""

#: src/0369-num-reform.md:228 src/0369-num-reform.md:279
#: src/0369-num-reform.md:408
msgid "// These should be associated constants when those are available\n"
msgstr ""

#: src/0369-num-reform.md:233
msgid ""
"// Deprecated:\n"
"    // fn is_zero(&self) -> bool;\n"
msgstr ""

#: src/0369-num-reform.md:236
msgid "// Bit twiddling\n"
msgstr ""

#: src/0369-num-reform.md:249
msgid "// Checked arithmetic\n"
msgstr ""

#: src/0369-num-reform.md:270
msgid ""
"// Deprecated:\n"
"    // fn abs_sub(&self, other: &Self) -> Self;\n"
msgstr ""

#: src/0369-num-reform.md:284
msgid "// Classification and decomposition\n"
msgstr ""

#: src/0369-num-reform.md:292
msgid "// Float intrinsics\n"
msgstr ""

#: src/0369-num-reform.md:307
msgid "// Conveniences\n"
msgstr ""

#: src/0369-num-reform.md:315
msgid ""
"// This lives directly in `std::num`, not `core::num`, since it requires "
"`cmath`\n"
msgstr ""

#: src/0369-num-reform.md:318
msgid "// Exactly the methods defined in today's version\n"
msgstr ""

#: src/0369-num-reform.md:322
msgid "Float constants, float math, and `cmath`"
msgstr ""

#: src/0369-num-reform.md:324 src/0369-num-reform.md:362
msgid "This RFC proposes to:"
msgstr ""

#: src/0369-num-reform.md:326
msgid ""
"Remove all float constants from the `Float` trait. These constants are "
"available directly from the `f32` and `f64` modules, and are not really "
"useful for the kind of generic programming these new traits are intended to "
"allow."
msgstr ""

#: src/0369-num-reform.md:331
msgid ""
"Continue providing various `cmath` functions as methods in the `FloatMath` "
"trait. Putting this in a separate trait means that `libstd` depends on "
"`cmath` but `libcore` does not."
msgstr ""

#: src/0369-num-reform.md:335
msgid "Free functions"
msgstr ""

#: src/0369-num-reform.md:337
msgid "All of the free functions defined in `std::num` are deprecated."
msgstr ""

#: src/0369-num-reform.md:339
msgid "The prelude"
msgstr ""

#: src/0369-num-reform.md:341
msgid ""
"The prelude will only include the `Signed` trait, as the operations it "
"provides are widely expected to be available when they apply."
msgstr ""

#: src/0369-num-reform.md:344
msgid "The reason for removing the rest of the traits is two-fold:"
msgstr ""

#: src/0369-num-reform.md:346
msgid ""
"The remaining operations are relatively uncommon. Note that various "
"overloaded operators, like `+`, work regardless of this choice. Those doing "
"intensive work with e.g. floats would only need to import `Float` and "
"`FloatMath`."
msgstr ""

#: src/0369-num-reform.md:351
msgid ""
"Keeping this functionality out of the prelude means that the names of "
"methods and associated items remain available for external numerics "
"libraries in the Cargo ecosystem."
msgstr ""

#: src/0369-num-reform.md:355
msgid "`strconv`, `FromStr`, `ToStr`, `FromStrRadix`, `ToStrRadix`"
msgstr ""

#: src/0369-num-reform.md:357
msgid ""
"Currently, traits for converting from `&str` and to `String` are both "
"included, in their own modules, in `libstd`. This is largely due to the "
"desire to provide `impl`s for numeric types, which in turn relies on `std::"
"num::strconv`."
msgstr ""

#: src/0369-num-reform.md:364
msgid "Move the `FromStr` trait into `core::str`."
msgstr ""

#: src/0369-num-reform.md:365
msgid ""
"Rename the `ToStr` trait to `ToString`, and move it to `collections::string`."
msgstr ""

#: src/0369-num-reform.md:366
msgid ""
"Break up and revise `std::num::strconv` into separate, _private_ modules "
"that provide the needed functionality for the `from_str` and `to_string` "
"methods. (Some of this functionality has already migrated to `fmt` and been "
"deprecated in `strconv`.)"
msgstr ""

#: src/0369-num-reform.md:370
msgid "Move the `FromStrRadix` into `core::num`."
msgstr ""

#: src/0369-num-reform.md:371
msgid "Remove `ToStrRadix`, which is already deprecated in favor of `fmt`."
msgstr ""

#: src/0369-num-reform.md:373
msgid "`FromPrimitive` and friends"
msgstr ""

#: src/0369-num-reform.md:375
msgid ""
"Ideally, the `FromPrimitive`, `ToPrimitive`, `Primitive`, `NumCast` traits "
"would all be removed in favor of a more principled way of working with C-"
"like enums. However, such a replacement is outside of the scope of this RFC, "
"so these traits are left (as `#[experimental]`) for now. A follow-up RFC "
"proposing a better solution should appear soon."
msgstr ""

#: src/0369-num-reform.md:381
msgid ""
"In the meantime, see [this proposal](https://github.com/rust-lang/rust/"
"issues/10418) and the discussion on [this issue](https://github.com/rust-"
"lang/rust/issues/10272) about `Ordinal` for the rough direction forward."
msgstr ""

#: src/0369-num-reform.md:387
msgid "Drawbacks"
msgstr ""

#: src/0369-num-reform.md:389
msgid ""
"This RFC somewhat reduces the potential for writing generic numeric code "
"with `std::num` traits. This is intentional, however: the new design "
"represents \"just enough\" generics to cover differently-sized built-in "
"types, without any attempt at general algebraic abstraction."
msgstr ""

#: src/0369-num-reform.md:394
msgid "Alternatives"
msgstr ""

#: src/0369-num-reform.md:396
msgid ""
"The status quo is clearly not ideal, and as explained above there was a long "
"attempt at providing a more complete numeric hierarchy in `std`. So _some_ "
"collapse of the hierarchy seems desirable."
msgstr ""

#: src/0369-num-reform.md:400
msgid ""
"That said, there are other possible factorings. We could introduce the "
"following `Num` trait to factor out commonalities between `Int` and `Float`:"
msgstr ""

#: src/0369-num-reform.md:415
msgid ""
"However, it's not clear whether this factoring is worth having a more "
"complex hierarchy, especially because the traits are not intended for "
"generic programming at that level (and generic programming across integer "
"and floating-point types is likely to be extremely rare)"
msgstr ""

#: src/0369-num-reform.md:420
msgid ""
"The signed and unsigned operations could be offered on more types, allowing "
"removal of more traits but a less clear-cut semantics."
msgstr ""

#: src/0369-num-reform.md:424
msgid "Unresolved questions"
msgstr ""

#: src/0369-num-reform.md:426
msgid ""
"This RFC does not propose a replacement for `#[deriving(FromPrimitive)]`, "
"leaving the relevant traits in limbo status. (See [this proposal](https://"
"github.com/rust-lang/rust/issues/10418) and the discussion on [this issue]"
"(https://github.com/rust-lang/rust/issues/10272) about `Ordinal` for the "
"rough direction forward.)"
msgstr ""
