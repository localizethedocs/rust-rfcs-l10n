msgid ""
msgstr ""
"Project-Id-Version: The Rust RFC Book\n"
"POT-Creation-Date: 2025-12-01T05:53:05Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/3239-cfg-target.md:1
msgid "Feature Name: `cfg-target`"
msgstr ""

#: src/3239-cfg-target.md:2
msgid "Start Date: 2020-09-27"
msgstr ""

#: src/3239-cfg-target.md:3
msgid ""
"RFC PR: [rust-lang/rfcs#3239](https://github.com/rust-lang/rfcs/pull/3239)"
msgstr ""

#: src/3239-cfg-target.md:4
msgid ""
"Rust Issue: [rust-lang/rust#96901](https://github.com/rust-lang/rust/"
"issues/96901)"
msgstr ""

#: src/3239-cfg-target.md:6
msgid "This RFC was previously approved, but part of it later **withdrawn**"
msgstr ""

#: src/3239-cfg-target.md:8
msgid ""
"The `cfg(target = \"...\")` conditional compilation key was previously "
"approved, but was later withdrawn. For details, see the [summary comment]"
"(https://github.com/rust-lang/rust/pull/96909#issuecomment-1148979831)."
msgstr ""

#: src/3239-cfg-target.md:13
msgid "Summary"
msgstr ""

#: src/3239-cfg-target.md:16
msgid ""
"This proposes a new `cfg`: `target`, which matches the entire target triple "
"string (e.g. `arm-unknown-linux-gnueabihf`). This also adds a "
"`CARGO_CFG_TARGET` environment variable for parity with other `CARGO_CFG_*` "
"variables."
msgstr ""

#: src/3239-cfg-target.md:20
msgid ""
"In addition, this proposes a shorthand `cfg(target(...))` to match multiple "
"components of a target string at once."
msgstr ""

#: src/3239-cfg-target.md:23
msgid "Motivation"
msgstr ""

#: src/3239-cfg-target.md:26
msgid ""
"To `#[cfg]` against a specific target, a `build.rs` script is required to "
"emit a custom `cfg` based on the `TARGET` environment variable. Adding a "
"build script increases compile time and makes a crate incompatible with "
"certain build systems."
msgstr ""

#: src/3239-cfg-target.md:31
msgid ""
"Otherwise, all available components would need to be specified separately: "
"`target_arch`, `target_vendor`, `target_os`, `target_env` and `target_abi`. "
"This can be very cumbersome. Note that the target ABI cannot currently be "
"`#[cfg]`\\-ed against, so a `build.rs` is still necessary to match all "
"target components."
msgstr ""

#: src/3239-cfg-target.md:37
msgid "Guide-level explanation"
msgstr ""

#: src/3239-cfg-target.md:40
msgid ""
"This would act like existing `target_*` configurations (except "
"`target_feature`) but match against all components."
msgstr ""

#: src/3239-cfg-target.md:44
msgid "\"x86_64-apple-ios-macabi\""
msgstr ""

#: src/3239-cfg-target.md:48
msgid "This includes `#[cfg_attr(target = \"...\", attr)]`."
msgstr ""

#: src/3239-cfg-target.md:50
msgid ""
"It would also support to specify each `target_*` inside a new `target` "
"attribute as follows:"
msgstr ""

#: src/3239-cfg-target.md:54
msgid "// So we can for example rewrite:\n"
msgstr ""

#: src/3239-cfg-target.md:55 src/3239-cfg-target.md:57
msgid "\"linux\""
msgstr ""

#: src/3239-cfg-target.md:55 src/3239-cfg-target.md:57
msgid "\"arm\""
msgstr ""

#: src/3239-cfg-target.md:55
msgid "// as:\n"
msgstr ""

#: src/3239-cfg-target.md:60
msgid "Reference-level explanation"
msgstr ""

#: src/3239-cfg-target.md:63
msgid "`target` is a key-value option set once with the target's Rust triple."
msgstr ""

#: src/3239-cfg-target.md:65
msgid "Example values:"
msgstr ""

#: src/3239-cfg-target.md:67
msgid "`\"aarch64-apple-darwin\"`"
msgstr ""

#: src/3239-cfg-target.md:68
msgid "`\"arm-unknown-linux-gnueabihf\"`"
msgstr ""

#: src/3239-cfg-target.md:69
msgid "`\"x86_64-apple-ios-macabi\"`"
msgstr ""

#: src/3239-cfg-target.md:70
msgid "`\"x86_64-pc-windows-gnu\"`"
msgstr ""

#: src/3239-cfg-target.md:71
msgid "`\"x86_64-pc-windows-msvc\"`"
msgstr ""

#: src/3239-cfg-target.md:72
msgid "`\"x86_64-unknown-linux-gnu\"`"
msgstr ""

#: src/3239-cfg-target.md:74
msgid "Semantics of target with attributes"
msgstr ""

#: src/3239-cfg-target.md:76
msgid ""
"The shorthand form of `#[cfg(target(os = \"linux))]` is expanded and "
"entirely equivalent to `#[cfg(target_os = \"linux\")]` (and so on for `arch` "
"and the other potential attributes)."
msgstr ""

#: src/3239-cfg-target.md:80
msgid "Drawbacks"
msgstr ""

#: src/3239-cfg-target.md:83
msgid ""
"Configuring against specific targets can be overly strict and could make "
"certain `#[cfg]`s miss similar configurations with small changes."
msgstr ""

#: src/3239-cfg-target.md:86
msgid ""
"For example: `aarch64-unknown-none` does not match `aarch64-unknown-none-"
"softfloat`, yet one would likely want to include ABI variants. The same "
"concern applies to the target vendor."
msgstr ""

#: src/3239-cfg-target.md:90
msgid ""
"A potential solution would be to allow glob matching (e.g. `aarch64-unknown-"
"none*`), but that is not within the scope of this proposal because it is not "
"currently used in other `#[cfg]`s."
msgstr ""

#: src/3239-cfg-target.md:94
msgid ""
"The `CARGO_CFG_TARGET` environment variable is redundant with the existing "
"`TARGET`. However, including it would be consistent with other `CARGO_CFG_*` "
"variables."
msgstr ""

#: src/3239-cfg-target.md:98
msgid "Rationale and alternatives"
msgstr ""

#: src/3239-cfg-target.md:101
msgid ""
"We can keep the existing work-around of checking the `TARGET` environment "
"variable in a `build.rs` script. However, that increases compile time and "
"makes a crate incompatible with certain build systems."
msgstr ""

#: src/3239-cfg-target.md:105
msgid "Prior art"
msgstr ""

#: src/3239-cfg-target.md:108
msgid ""
"[Target component configurations](https://doc.rust-lang.org/reference/"
"conditional-compilation.html#set-configuration-options): `target_arch`, "
"`target_vendor`, `target_os`, and `target_env`."
msgstr ""

#: src/3239-cfg-target.md:111
msgid ""
"`TARGET` and `CARGO_CFG_TARGET_*` [environment variables for `build.rs`]"
"(https://doc.rust-lang.org/cargo/reference/environment-variables."
"html#environment-variables-cargo-sets-for-build-scripts)."
msgstr ""

#: src/3239-cfg-target.md:114
msgid "Unresolved questions"
msgstr ""

#: src/3239-cfg-target.md:117
msgid ""
"How do we ensure a project does not miss configurations similar to the ones "
"being `#[cfg]`\\-ed against with this feature? Perhaps this should be added "
"as a Clippy lint that's off by default."
msgstr ""

#: src/3239-cfg-target.md:121
msgid "Future possibilities"
msgstr ""

#: src/3239-cfg-target.md:124
msgid ""
"This would enable `#[cfg]`\\-ing against a specific target ABI (e.g. "
"`macabi`, `eabihf`). However, that is not the motivation for this proposal "
"and should be handled separately."
msgstr ""
