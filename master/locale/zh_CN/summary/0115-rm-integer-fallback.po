msgid ""
msgstr ""
"Project-Id-Version: The Rust RFC Book\n"
"POT-Creation-Date: 2025-12-01T05:53:02Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/0115-rm-integer-fallback.md:1
msgid "Start Date: 2014-06-11"
msgstr ""

#: src/0115-rm-integer-fallback.md:2
msgid ""
"RFC PR: [rust-lang/rfcs#115](https://github.com/rust-lang/rfcs/pull/115)"
msgstr ""

#: src/0115-rm-integer-fallback.md:3
msgid ""
"Rust Issue: [rust-lang/rust#6023](https://github.com/rust-lang/rust/"
"issues/6023)"
msgstr ""

#: src/0115-rm-integer-fallback.md:5
msgid "Summary"
msgstr ""

#: src/0115-rm-integer-fallback.md:7
msgid ""
"Currently we use inference to find the current type of otherwise-unannotated "
"integer literals, and when that fails the type defaults to `int`. This is "
"often felt to be potentially error-prone behavior."
msgstr ""

#: src/0115-rm-integer-fallback.md:12
msgid ""
"This proposal removes the integer inference fallback and strengthens the "
"types required for several language features that interact with integer "
"inference."
msgstr ""

#: src/0115-rm-integer-fallback.md:16
msgid "Motivation"
msgstr ""

#: src/0115-rm-integer-fallback.md:18
msgid ""
"With the integer fallback, small changes to code can change the inferred "
"type in unexpected ways. It's not clear how big a problem this is, but "
"previous experiments[1](https://gist.github.com/nikomatsakis/11179747) "
"indicate that removing the fallback has a relatively small impact on "
"existing code, so it's reasonable to back off of this feature in favor of "
"more strict typing."
msgstr ""

#: src/0115-rm-integer-fallback.md:25
msgid "See also https://github.com/mozilla/rust/issues/6023."
msgstr ""

#: src/0115-rm-integer-fallback.md:29
msgid "Detailed design"
msgstr ""

#: src/0115-rm-integer-fallback.md:31
msgid ""
"The primary change here is that, when integer type inference fails, the "
"compiler will emit an error instead of assigning the value the type `int`."
msgstr ""

#: src/0115-rm-integer-fallback.md:35
msgid ""
"This change alone will cause a fair bit of existing code to be unable to "
"type check because of lack of constraints. To add more constraints and "
"increase likelihood of unification, we 'tighten' up what kinds of integers "
"are required in some situations:"
msgstr ""

#: src/0115-rm-integer-fallback.md:40
msgid "Array repeat counts must be uint (`[expr, .. count]`)"
msgstr ""

#: src/0115-rm-integer-fallback.md:41
msgid "\\<\\< and >> require uint when shifting integral types"
msgstr ""

#: src/0115-rm-integer-fallback.md:43
msgid ""
"Finally, inference for `as` will be modified to track the types a value is "
"being cast _to_ for cases where the value being cast is unconstrained, like "
"`0 as u8`."
msgstr ""

#: src/0115-rm-integer-fallback.md:47
msgid "Treatment of enum discriminants will need to change:"
msgstr ""

#: src/0115-rm-integer-fallback.md:53
msgid ""
"Currently, an unsuffixed integer defaults to `int`. Instead, we will only "
"require enum discriminants primitive integers of unspecified type; assigning "
"an integer to an enum will behave as if casting from from the type of the "
"integer to an unsigned integer with the size of the enum discriminant."
msgstr ""

#: src/0115-rm-integer-fallback.md:59
msgid "Drawbacks"
msgstr ""

#: src/0115-rm-integer-fallback.md:61
msgid ""
"This will force users to type hint somewhat more often. In particular, "
"ranges of unsigned ints may need to be type-hinted:"
msgstr ""

#: src/0115-rm-integer-fallback.md:68
msgid "Alternatives"
msgstr ""

#: src/0115-rm-integer-fallback.md:70
msgid "Do none of this."
msgstr ""

#: src/0115-rm-integer-fallback.md:72
msgid "Unresolved questions"
msgstr ""

#: src/0115-rm-integer-fallback.md:74
msgid ""
"If we're putting new restrictions on shift operators, should we change the "
"traits, or just make the primitives special?"
msgstr ""
