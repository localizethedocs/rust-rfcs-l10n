msgid ""
msgstr ""
"Project-Id-Version: The Rust RFC Book\n"
"POT-Creation-Date: 2025-12-01T05:53:02Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Language: zh_CN\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/0107-pattern-guards-with-bind-by-move.md:1
msgid "Start Date: 2014-06-05"
msgstr ""

#: src/0107-pattern-guards-with-bind-by-move.md:2
msgid ""
"RFC PR: [rust-lang/rfcs#107](https://github.com/rust-lang/rfcs/pull/107)"
msgstr ""

#: src/0107-pattern-guards-with-bind-by-move.md:3
msgid ""
"Rust Issue: [rust-lang/rust#15287](https://github.com/rust-lang/rust/"
"issues/15287)"
msgstr ""

#: src/0107-pattern-guards-with-bind-by-move.md:5
msgid "Summary"
msgstr ""

#: src/0107-pattern-guards-with-bind-by-move.md:7
msgid ""
"Rust currently forbids pattern guards on match arms with move-bound "
"variables. Allowing them would increase the applicability of pattern guards."
msgstr ""

#: src/0107-pattern-guards-with-bind-by-move.md:10
msgid "Motivation"
msgstr ""

#: src/0107-pattern-guards-with-bind-by-move.md:12
msgid ""
"Currently, if you attempt to use guards on a match arm with a move-bound "
"variable, e.g."
msgstr ""

#: src/0107-pattern-guards-with-bind-by-move.md:27
msgid "you get an error:"
msgstr ""

#: src/0107-pattern-guards-with-bind-by-move.md:35
msgid ""
"This should be permitted in cases where the guard only accesses the moved "
"value by reference or copies out of derived paths."
msgstr ""

#: src/0107-pattern-guards-with-bind-by-move.md:38
msgid ""
"This allows for succinct code with less pattern matching duplication and a "
"minimum number of copies at runtime. The lack of this feature was "
"encountered by @kmcallister when developing Servo's new HTML 5 parser."
msgstr ""

#: src/0107-pattern-guards-with-bind-by-move.md:42
msgid "Detailed design"
msgstr ""

#: src/0107-pattern-guards-with-bind-by-move.md:44
msgid ""
"This change requires all occurrences of move-bound pattern variables in the "
"guard to be treated as paths to the values being matched before they are "
"moved, rather than the moved values themselves. Any moves of matched values "
"into the bound variables would occur on the control flow edge between the "
"guard and the arm's expression. There would be no changes to the handling of "
"reference-bound pattern variables."
msgstr ""

#: src/0107-pattern-guards-with-bind-by-move.md:51
msgid ""
"The arm would be treated as its own nested scope with respect to borrows, so "
"that pattern-bound variables would be able to be borrowed and dereferenced "
"freely in the guard, but these borrows would not be in scope in the arm's "
"expression. Since the guard dominates the expression and the move into the "
"pattern-bound variable, moves of either the match's head expression or any "
"pattern-bound variables in the guard would trigger an error."
msgstr ""

#: src/0107-pattern-guards-with-bind-by-move.md:58
msgid "The following examples would be accepted:"
msgstr ""

#: src/0107-pattern-guards-with-bind-by-move.md:92
msgid "This example would be rejected, due to a double move of `v`:"
msgstr ""

#: src/0107-pattern-guards-with-bind-by-move.md:106
msgid ""
"This example would also be rejected, even though there is no use of the move-"
"bound variable in the first arm's expression, since the move into the bound "
"variable would be moving the same value a second time:"
msgstr ""

#: src/0107-pattern-guards-with-bind-by-move.md:121
msgid ""
"There are issues with mutation of the bound values, but that is true without "
"the changes proposed by this RFC, e.g. [Rust issue #14684](https://github."
"com/mozilla/rust/issues/14684). The general approach to resolving that issue "
"should also work with these proposed changes."
msgstr ""

#: src/0107-pattern-guards-with-bind-by-move.md:126
msgid ""
"This would be implemented behind a `feature(bind_by_move_pattern_guards)` "
"gate until we have enough experience with the feature to remove the feature "
"gate."
msgstr ""

#: src/0107-pattern-guards-with-bind-by-move.md:129
msgid "Drawbacks"
msgstr ""

#: src/0107-pattern-guards-with-bind-by-move.md:131
msgid ""
"The current error message makes it more clear what the user is doing wrong, "
"but if this change is made the error message for an invalid use of this "
"feature (even if it were accidental) would indicate a use of a moved value, "
"which might be more confusing."
msgstr ""

#: src/0107-pattern-guards-with-bind-by-move.md:136
msgid "This might be moderately difficult to implement in `rustc`."
msgstr ""

#: src/0107-pattern-guards-with-bind-by-move.md:138
msgid "Alternatives"
msgstr ""

#: src/0107-pattern-guards-with-bind-by-move.md:140
msgid ""
"As far as I am aware, the only workarounds for the lack of this feature are "
"to manually expand the control flow of the guard (which can quickly get "
"messy) or use unnecessary copies."
msgstr ""

#: src/0107-pattern-guards-with-bind-by-move.md:144
msgid "Unresolved questions"
msgstr ""

#: src/0107-pattern-guards-with-bind-by-move.md:146
msgid ""
"This has nontrivial interaction with guards in arbitrary patterns as "
"proposed in [\\#99](https://github.com/rust-lang/rfcs/pull/99)."
msgstr ""
