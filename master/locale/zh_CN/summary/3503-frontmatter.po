msgid ""
msgstr ""
"Project-Id-Version: The Rust RFC Book\n"
"POT-Creation-Date: 2025-12-01T05:53:05Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/3503-frontmatter.md:1
msgid "Feature Name: `frontmatter`"
msgstr ""

#: src/3503-frontmatter.md:2
msgid "Start Date: 2023-09-26"
msgstr ""

#: src/3503-frontmatter.md:3
msgid ""
"RFC PR: [rust-lang/rfcs#3503](https://github.com/rust-lang/rfcs/pull/3503)"
msgstr ""

#: src/3503-frontmatter.md:4
msgid ""
"Rust Issue: [rust-lang/cargo#12207](https://github.com/rust-lang/cargo/"
"issues/12207)"
msgstr ""

#: src/3503-frontmatter.md:7
msgid "Summary"
msgstr ""

#: src/3503-frontmatter.md:10
msgid ""
"Add a frontmatter syntax to Rust as a way for [cargo to have manifests "
"embedded in source code](https://github.com/rust-lang/rfcs/pull/3502):"
msgstr ""

#: src/3503-frontmatter.md:15 src/3503-frontmatter.md:58
msgid "\"4.2\""
msgstr ""

#: src/3503-frontmatter.md:15 src/3503-frontmatter.md:58
msgid "\"derive\""
msgstr ""

#: src/3503-frontmatter.md:29 src/3503-frontmatter.md:72
msgid "\"{:?}\""
msgstr ""

#: src/3503-frontmatter.md:33
msgid "Motivation"
msgstr ""

#: src/3503-frontmatter.md:36
msgid ""
"[\"cargo script\"](https://github.com/rust-lang/rfcs/pull/3502) is in need "
"of a syntax for embedding manifests in source. See that RFC for its "
"motivations."
msgstr ""

#: src/3503-frontmatter.md:39
msgid "Guide-level explanation"
msgstr ""

#: src/3503-frontmatter.md:42
msgid ""
"Static site generators use a frontmatter syntax to embed metadata in "
"markdown files:"
msgstr ""

#: src/3503-frontmatter.md:53
msgid ""
"We are carrying this concept over to Rust while merging some lessons from "
"commonmark's fenced code blocks:"
msgstr ""

#: src/3503-frontmatter.md:76
msgid ""
"Like with [commonmark code fences](https://spec.commonmark.org/0.30/#info-"
"string), an info-string is allowed after the opening `---` for use by the "
"command interpreting the block to identify the contents of the block."
msgstr ""

#: src/3503-frontmatter.md:79
msgid "Reference-level explanation"
msgstr ""

#: src/3503-frontmatter.md:82
msgid ""
"When parsing Rust source, after stripping the shebang (`#!`), rustc will "
"strip the frontmatter:"
msgstr ""

#: src/3503-frontmatter.md:83
msgid "May include 0+ blank lines (whitespace + newline)"
msgstr ""

#: src/3503-frontmatter.md:84
msgid ""
"Opens with 3+ dashes followed by 0+ whitespace, an optional term (one or "
"more characters excluding whitespace and commas), 0+ whitespace, and a "
"newline"
msgstr ""

#: src/3503-frontmatter.md:85
msgid ""
"The variable number of dashes is an escaping mechanism in case `---` shows "
"up in the content"
msgstr ""

#: src/3503-frontmatter.md:86
msgid ""
"All content is ignored by `rustc` until the same number of dashes is found "
"at the start of a line. The line must terminate by 0+ whitespace and then a "
"newline."
msgstr ""

#: src/3503-frontmatter.md:88
msgid ""
"Unlike commonmark, it is an error to not close the frontmatter seeing to "
"detect problems earlier in the process seeing as the primary content is what "
"comes after the frontmatter"
msgstr ""

#: src/3503-frontmatter.md:90
msgid ""
"This applies anywhere shebang stripping is performed. For example, if "
"[`include!`](https://doc.rust-lang.org/std/macro.include.html) strips "
"shebangs, then it will also frontmatter."
msgstr ""

#: src/3503-frontmatter.md:93
msgid ""
"As cargo will be the first step in the process to parse this, the "
"responsibility for high quality error messages will largely fall on cargo."
msgstr ""

#: src/3503-frontmatter.md:96
msgid "Drawbacks"
msgstr ""

#: src/3503-frontmatter.md:99
msgid "A new concept for Rust syntax, adding to overall cognitive load"
msgstr ""

#: src/3503-frontmatter.md:100
msgid "Ecosystem tooling updates to deal with new syntax"
msgstr ""

#: src/3503-frontmatter.md:102
msgid "Rationale and alternatives"
msgstr ""

#: src/3503-frontmatter.md:105
msgid ""
"Within this solution, we considered starting with only allowing this in the "
"root `mod` (e.g. `main.rs`) but decided to allow it in any file mostly for "
"ease of implementation. Like with Python, this allows any file in a package "
"(with the correct deps and `mod`s) to be executed, allowing easier "
"interacting experiences in verifying behavior."
msgstr ""

#: src/3503-frontmatter.md:110
msgid "Required vs Optional Shebang"
msgstr ""

#: src/3503-frontmatter.md:112
msgid ""
"We could require the shebang to be present for all cargo-scripts. This would "
"most negatively impact Windows users as the shebang is a no-op. We still "
"care about Windows because cargo-scripts can still be used for exploration "
"and prototyping, even if they can't directly be used as drop-in utilities."
msgstr ""

#: src/3503-frontmatter.md:117
msgid ""
"The main reason to require a shebang is to positively identify the "
"associated \"interpreter\". However, statically analyzing a shebang is "
"[complicated](https://stackoverflow.com/questions/38059830/how-does-perl-"
"avoid-shebang-loops) and we are wanting to avoid it in the core workflow. "
"This isn't to say that tools like rust-analyzer might choose to require it "
"to help their workflow."
msgstr ""

#: src/3503-frontmatter.md:122
msgid "Blank lines"
msgstr ""

#: src/3503-frontmatter.md:124
msgid ""
"Originally, the proposal viewed the block as being \"part of\" the shebang "
"and didn't allow them to be separated by blank lines. However, the shebang "
"is optional and users are likely to assume they can use blanklines (see "
"https://www.youtube.com/watch?v=S8MLYZv_54w)."
msgstr ""

#: src/3503-frontmatter.md:128
msgid ""
"This could cause ordering confusion (doc comments vs attributes vs "
"frontmatter)"
msgstr ""

#: src/3503-frontmatter.md:130
msgid "Infostring"
msgstr ""

#: src/3503-frontmatter.md:132
msgid ""
"The main question on infostrings is whether they are tool-defined or rustc-"
"defined. At one time, we proposed requiring the infostring and requiring it "
"be `cargo` as a way to defer this decision."
msgstr ""

#: src/3503-frontmatter.md:135
msgid ""
"As the design requirements are catered to processing by external tools, as "
"opposed to rustc, we are instead reserving this syntax for external tools by "
"making the infostrings tool-defined. The Rust toolchain (rustc, clippy, "
"rustdoc, etc) already have access to attributes for user-provided content. "
"If they need a more ergonomic way of specifying content, we should solve "
"that more generally for attributes."
msgstr ""

#: src/3503-frontmatter.md:140
msgid ""
"With that decision made, the infostring can be optional. Can it also be "
"deferred out? Possibly, but we are leaving them in for unpredictable "
"exception cases and in case users want to make the syntax explicit for their "
"editor (especially if its not `cargo` which more trivial editor "
"implementations will likely assume). We may at least defer stabilization of "
"infostrings."
msgstr ""

#: src/3503-frontmatter.md:145
msgid ""
"The infostring syntax was selected to allow file names (e.g. `Cargo.lock`). "
"Additional attributes are left to a future possibility."
msgstr ""

#: src/3503-frontmatter.md:148
msgid "Syntax"
msgstr ""

#: src/3503-frontmatter.md:150
msgid ""
"[RFC 3502](https://github.com/rust-lang/rfcs/pull/3502) lays out some design "
"principles, including"
msgstr ""

#: src/3503-frontmatter.md:151
msgid "Single-file packages should have a first-class experience"
msgstr ""

#: src/3503-frontmatter.md:152
msgid ""
"Provides a higher quality of experience (doesn't feel like a hack or tacked "
"on)"
msgstr ""

#: src/3503-frontmatter.md:153
msgid "Transferable knowledge, whether experience, stackoverflow answers, etc"
msgstr ""

#: src/3503-frontmatter.md:154
msgid "Easier unassisted migration between single-file and multi-file packages"
msgstr ""

#: src/3503-frontmatter.md:155
msgid ""
"The more the workflows deviate, the higher the maintenance and support costs "
"for the cargo team"
msgstr ""

#: src/3503-frontmatter.md:157
msgid ""
"This led us to wanting to re-use the existing manifest format inside of Rust "
"code. The question is what that syntax for embedding should be."
msgstr ""

#: src/3503-frontmatter.md:160
msgid "When choosing the syntax, our care-abouts are"
msgstr ""

#: src/3503-frontmatter.md:161
msgid "How obvious it is for new users when they see it"
msgstr ""

#: src/3503-frontmatter.md:162
msgid "How easy it is for newer users to remember it and type it out"
msgstr ""

#: src/3503-frontmatter.md:163
msgid "How machine editable it is for `cargo add` and friends"
msgstr ""

#: src/3503-frontmatter.md:164
msgid "Needs to be valid Rust code for quality of error messages, etc"
msgstr ""

#: src/3503-frontmatter.md:165
msgid "Simple enough syntax for tools to parse without a full Rust parser"
msgstr ""

#: src/3503-frontmatter.md:166
msgid ""
"Leave Rust syntax errors to rustc, rather than masking them with lower "
"quality ones"
msgstr ""

#: src/3503-frontmatter.md:167
msgid ""
"Ideally we allows random IDE tools (e.g. [`crates.nvim`](https://github.com/"
"Saecki/crates.nvim) to still have easy access to the manifest"
msgstr ""

#: src/3503-frontmatter.md:168
msgid ""
"Leave the door open in case we want to reuse the syntax for embedded "
"lockfiles"
msgstr ""

#: src/3503-frontmatter.md:169
msgid "Leave the door open for single-file `lib`s"
msgstr ""

#: src/3503-frontmatter.md:171
msgid "Why add to Rust syntax, rather than letting Cargo handle it"
msgstr ""

#: src/3503-frontmatter.md:173
msgid ""
"The most naive way for cargo to handle this is for cargo to strip the "
"manifest, write the Rust file to a temporary file, and compile that. This is "
"what has traditionally been done with various iterations of \"cargo script\"."
msgstr ""

#: src/3503-frontmatter.md:176
msgid ""
"This provides a second-class experience which runs counter to one of the "
"design goals"
msgstr ""

#: src/3503-frontmatter.md:177
msgid ""
"Error messages, `cargo metadata`, etc point to the stripped source with an "
"\"odd\" path, rather than the real source"
msgstr ""

#: src/3503-frontmatter.md:178
msgid ""
"Every tool that plans to support it would need to be updated to do stripping "
"(`cargo fmt`, `cargo clippy`, etc)"
msgstr ""

#: src/3503-frontmatter.md:180
msgid ""
"A key part in there is \"plan to support\". We'd need to build up buy-in for "
"tools to be supporting a Cargo-only syntax. This becomes more difficult when "
"the tool in question tries to be Cargo-agnostic. By having Cargo-agnostic "
"external tool syntax in Rust, this mostly becomes transparent."
msgstr ""

#: src/3503-frontmatter.md:185
msgid ""
"We could build a special relationship with rustc to support this. For "
"example, rustdoc passes code to rustc on stdin and sets "
"`UNSTABLE_RUSTDOC_TEST_PATH` and `UNSTABLE_RUSTDOC_TEST_LINE` to control how "
"errors are rendered. We could then also special case the messages inside of "
"cargo. This both adds a major support burden to keep this house of lies "
"standing but still falls short when it comes to tooling support. Now every "
"tool that wants to support the Cargo-only syntax has to build their own "
"house of lies."
msgstr ""

#: src/3503-frontmatter.md:191
msgid "Frontmatter"
msgstr ""

#: src/3503-frontmatter.md:193
msgid ""
"This proposed syntax builds off of the precedence of Rust having syntax "
"specialized for an external tool (doc-comments for rustdoc). However, a new "
"syntax is used instead of extending the comment syntax:"
msgstr ""

#: src/3503-frontmatter.md:196
msgid ""
"Simplified for being parsed by arbitrary tools (cargo, vim plugins, etc) "
"without understanding the full Rust grammar"
msgstr ""

#: src/3503-frontmatter.md:197
msgid ""
"Side steps compatibility issues with both user expectations with the "
"looseness of comment syntax (which supporting would make it harder to parse) "
"and any existing comments that may look like a new structured comment syntax"
msgstr ""

#: src/3503-frontmatter.md:201
msgid ""
"The difference between this syntax and comments is comments are generally "
"geared towards people, even if a subset (doc-comments) are also able to be "
"somewhat processed by a program, while this is geared mostly towards machine "
"processing."
msgstr ""

#: src/3503-frontmatter.md:206
msgid ""
"This proposal mirrors the location of YAML frontmatter (absolutely first). "
"As we learn more of its uses and problems people run into in practice, we "
"can evaluate if we want to loosen any of the rules."
msgstr ""

#: src/3503-frontmatter.md:210
msgid "Differences with YAML frontmatter include:"
msgstr ""

#: src/3503-frontmatter.md:211
msgid "Variable number of dashes (for escaping)"
msgstr ""

#: src/3503-frontmatter.md:212
msgid "Optional frontmatter"
msgstr ""

#: src/3503-frontmatter.md:214
msgid "Besides characters, differences with commonmark code fences include:"
msgstr ""

#: src/3503-frontmatter.md:215
msgid "no indenting of the fenced code block"
msgstr ""

#: src/3503-frontmatter.md:216
msgid ""
"open/close must be a matching pair, rather than the close having \"the same "
"or more\""
msgstr ""

#: src/3503-frontmatter.md:218
msgid "Benefits:"
msgstr ""

#: src/3503-frontmatter.md:219
msgid "Visually/syntactically lightweight"
msgstr ""

#: src/3503-frontmatter.md:220 src/3503-frontmatter.md:421
#: src/3503-frontmatter.md:498 src/3503-frontmatter.md:532
msgid ""
"Users can edit/copy/paste the manifest without dealing with leading "
"characters"
msgstr ""

#: src/3503-frontmatter.md:221 src/3503-frontmatter.md:346
msgid ""
"Has parallels to ideas outside of Rust, building on external knowledge that "
"might exist"
msgstr ""

#: src/3503-frontmatter.md:222
msgid "Easy for cargo and any third-party tool to parse and modify"
msgstr ""

#: src/3503-frontmatter.md:223
msgid ""
"As cargo will be parsing before rustc, cargo being able to work off of a "
"reduced syntax is paramount for ensuring cargo doesn't mask the high quality "
"rustc errors with lower-quality errors of its own"
msgstr ""

#: src/3503-frontmatter.md:227
msgid "In the future, this can be leveraged by other build systems or tools"
msgstr ""

#: src/3503-frontmatter.md:229 src/3503-frontmatter.md:388
msgid "Downsides:"
msgstr ""

#: src/3503-frontmatter.md:230
msgid ""
"Familiar syntax in an unfamiliar use may make users feel unsettled, unsure "
"how to proceed (what works and what doesn't)."
msgstr ""

#: src/3503-frontmatter.md:231
msgid ""
"If viewed from the lens of a comment, it isn't a variant of comment syntax "
"like doc-comments"
msgstr ""

#: src/3503-frontmatter.md:233
msgid "Alternative 1: Vary the opening/closing character"
msgstr ""

#: src/3503-frontmatter.md:235
msgid "Instead of dashes, we could do another character, like"
msgstr ""

#: src/3503-frontmatter.md:236
msgid "backticks, like in commonmark code fences"
msgstr ""

#: src/3503-frontmatter.md:237
msgid "`~`, using a lesser known markdown code fence character"
msgstr ""

#: src/3503-frontmatter.md:238
msgid ""
"`+` like [zola and hugo's TOML frontmatter](https://www.getzola.org/"
"documentation/getting-started/overview/#markdown-content)"
msgstr ""

#: src/3503-frontmatter.md:239
msgid "`=`"
msgstr ""

#: src/3503-frontmatter.md:240
msgid "Open with `>>>` and close with `<<<`, like with HEREDOC (or invert it)"
msgstr ""

#: src/3503-frontmatter.md:242
msgid "In practice (with infostrings):"
msgstr ""

#: src/3503-frontmatter.md:247 src/3503-frontmatter.md:257
#: src/3503-frontmatter.md:267 src/3503-frontmatter.md:277
#: src/3503-frontmatter.md:287 src/3503-frontmatter.md:297
#: src/3503-frontmatter.md:362 src/3503-frontmatter.md:490
#: src/3503-frontmatter.md:522
msgid "\"2018\""
msgstr ""

#: src/3503-frontmatter.md:304 src/3503-frontmatter.md:351
#: src/3503-frontmatter.md:423 src/3503-frontmatter.md:469
#: src/3503-frontmatter.md:500 src/3503-frontmatter.md:534
msgid "Downsides"
msgstr ""

#: src/3503-frontmatter.md:305
msgid "With `>>>` it isn't quite like HEREDOC to have less overhead"
msgstr ""

#: src/3503-frontmatter.md:306
msgid ""
"`>>>`, `<<<`, `|||`, `===` at the beginning of lines start to look like "
"merge conflicts which might confuse external tools"
msgstr ""

#: src/3503-frontmatter.md:307
msgid ""
"Backticks have a problem with users knowing how to and remembering to escape "
"these blocks when sharing them in markdown.  Knowing the syntax (only "
"because I've implemented a parser for it), I'm at about 50/50 on whether I "
"properly escape."
msgstr ""

#: src/3503-frontmatter.md:309
msgid "Note:"
msgstr ""

#: src/3503-frontmatter.md:310
msgid ""
"`\"` was not considered because that can feel too familiar and users might "
"carry over their expectations for how strings work"
msgstr ""

#: src/3503-frontmatter.md:312
msgid "Alternative 2: Extended Shebang"
msgstr ""

#: src/3503-frontmatter.md:318 src/3503-frontmatter.md:338
msgid "\"1.2.3\""
msgstr ""

#: src/3503-frontmatter.md:323
msgid ""
"This is a variation on other options that ties itself closer to the shebang "
"syntax. The hope would be that we could get buy-in from other languages."
msgstr ""

#: src/3503-frontmatter.md:325
msgid ""
"The first line post-shebang-stripping is a hash plus 3+ backticks, then "
"capture all content until a matching pair of backticks on a dedicated line.  "
"This would be captured into a `#![frontmatter(info = \"cargo\", content = "
"\"...\"]`.  `frontmatter` attribute is reserved for crate roots.  The 3+ "
"with matching pair is a \"just in case\" a TOML multi-line string has that "
"syntax in it).  Each content line must be indented to at least the same "
"level as the first backtick."
msgstr ""

#: src/3503-frontmatter.md:326
msgid ""
"Backticks are needed to know to avoid parsing `#[dependencies]` as an "
"attribute"
msgstr ""

#: src/3503-frontmatter.md:327
msgid "This also allows an infostring so this isn't just a cargo feature"
msgstr ""

#: src/3503-frontmatter.md:328
msgid "Future evolution: Allow `cargo` being the default `info` string"
msgstr ""

#: src/3503-frontmatter.md:329
msgid ""
"Future evolution: Allow any `info` string with cargo checking for `content."
"starts_with([\"cargo\", \"cargo,\"])`"
msgstr ""

#: src/3503-frontmatter.md:330
msgid "Future evolution: Allow `frontmatter` attribute on any module"
msgstr ""

#: src/3503-frontmatter.md:332
msgid ""
"Syntactically, this avoids confusion with attributes by being stripped "
"before lexing. We could make this less ambiguous by using a double hash."
msgstr ""

#: src/3503-frontmatter.md:344 src/3503-frontmatter.md:381
#: src/3503-frontmatter.md:419 src/3503-frontmatter.md:463
#: src/3503-frontmatter.md:496 src/3503-frontmatter.md:530
msgid "Benefits"
msgstr ""

#: src/3503-frontmatter.md:345
msgid "Visually connected to the shebang"
msgstr ""

#: src/3503-frontmatter.md:347
msgid "Easy for cargo to parse and modify"
msgstr ""

#: src/3503-frontmatter.md:348
msgid "Can easily be leveraged by buck2, meson, etc in the future"
msgstr ""

#: src/3503-frontmatter.md:349
msgid "Maybe we can get others on board with this syntax"
msgstr ""

#: src/3503-frontmatter.md:352
msgid ""
"`#` prefix plus a TOML `[heading]` looks too much like a Rust `#[attribute]`."
msgstr ""

#: src/3503-frontmatter.md:353
msgid "More syntactically heavy than the frontmatter solution"
msgstr ""

#: src/3503-frontmatter.md:354
msgid "Visually"
msgstr ""

#: src/3503-frontmatter.md:355
msgid ""
"More work to type it out or copy-paste between cargo scripts and regular "
"manifests"
msgstr ""

#: src/3503-frontmatter.md:356
msgid "More to get wrong"
msgstr ""

#: src/3503-frontmatter.md:358
msgid ""
"If we dropped future possibilities for additional content, we could remove "
"the opening/closing syntax, greatly reducing the minimum syntax needed in "
"some cases."
msgstr ""

#: src/3503-frontmatter.md:367
msgid "Alternative 3: Doc-comment"
msgstr ""

#: src/3503-frontmatter.md:371
msgid ""
"//! ```cargo\n"
"//! [package]\n"
"//! edition = \"2018\"\n"
"//! ```\n"
msgstr ""

#: src/3503-frontmatter.md:382
msgid "Parsers are available to make this work (e.g. `syn`, `pulldown-cmark`)"
msgstr ""

#: src/3503-frontmatter.md:383
msgid "Familiar syntax both to read and write."
msgstr ""

#: src/3503-frontmatter.md:384
msgid ""
"When discussing with a Rust author, it was pointed out many times people "
"preface code with a comment specifying the dependencies ([example](https://"
"github.com/dtolnay/prettyplease#example)), this is the same idea but "
"reusable by cargo"
msgstr ""

#: src/3503-frontmatter.md:385
msgid ""
"When discussing on forums, people expressed how they had never seen the "
"syntax but instantly were able to understand it"
msgstr ""

#: src/3503-frontmatter.md:386
msgid ""
"Depending on doc-comment style used, users may be able to edit/copy/paste "
"the manifest without dealing with leading characters"
msgstr ""

#: src/3503-frontmatter.md:389 src/3503-frontmatter.md:424
#: src/3503-frontmatter.md:501
msgid ""
"**Blocker** Either we expose `syn`s lesser parse errors or we skip errors, "
"deferring to rustc's, but then have the wrong behavior on commands that "
"don't invoke rustc, like `cargo metadata`"
msgstr ""

#: src/3503-frontmatter.md:390 src/3503-frontmatter.md:425
#: src/3503-frontmatter.md:473 src/3503-frontmatter.md:502
msgid ""
"If we extend additional restrictions to make it more tool friendly, then we "
"break from user expectations for how this syntax works"
msgstr ""

#: src/3503-frontmatter.md:391 src/3503-frontmatter.md:426
#: src/3503-frontmatter.md:476 src/3503-frontmatter.md:503
msgid ""
"When discussing with a Rust crash course teacher, it was felt their students "
"would have a hard time learning to write these manifests from scratch"
msgstr ""

#: src/3503-frontmatter.md:392 src/3503-frontmatter.md:477
msgid "Having the explain the overloading of concepts to new users"
msgstr ""

#: src/3503-frontmatter.md:393 src/3503-frontmatter.md:427
#: src/3503-frontmatter.md:478 src/3503-frontmatter.md:504
msgid ""
"Unpredictable location (both the doc comment and the cargo code block within "
"it)"
msgstr ""

#: src/3503-frontmatter.md:394 src/3503-frontmatter.md:479
msgid "Visual clutter (where clutter is overwhelming already in Rust)"
msgstr ""

#: src/3503-frontmatter.md:395
msgid ""
"Might be a bit complicated to do edits (translating between location within "
"`toml_edit` spans to the location within `syn` spans especially with "
"different comment styles)"
msgstr ""

#: src/3503-frontmatter.md:397
msgid "Requires pulling in a full markdown parser to extract the manifest"
msgstr ""

#: src/3503-frontmatter.md:398
msgid ""
"Incorrectly formatted markdown would lead to a missing manifest and "
"confusing error messages at best or silent incorrect behavior at worse"
msgstr ""

#: src/3503-frontmatter.md:400
msgid "Alternative 4: Attribute"
msgstr ""

#: src/3503-frontmatter.md:405
msgid ""
"r#\"\n"
"[package]\n"
"edition = \"2018\"\n"
"\"#"
msgstr ""

#: src/3503-frontmatter.md:413
msgid ""
"`cargo` could register this attribute or `rustc` could get a generic "
"`metadata` attribute"
msgstr ""

#: src/3503-frontmatter.md:414
msgid ""
"As an alternative, `manifest` could a less stringly-typed format but that "
"makes it harder for cargo to parse and edit, makes it harder for users to "
"migrate between single and multi-file packages, and makes it harder to "
"transfer knowledge and experience"
msgstr ""

#: src/3503-frontmatter.md:420 src/3503-frontmatter.md:497
msgid "Parsers are available to make this work (e.g. `syn`)"
msgstr ""

#: src/3503-frontmatter.md:428
msgid ""
"From talking to a teacher, users are more forgiving of not understanding the "
"details for structure data in an unstructured format (doc comments / "
"comments) but something that looks meaningful, they will want to understand "
"it all requiring dealing with all of the concepts"
msgstr ""

#: src/3503-frontmatter.md:429
msgid ""
"The attribute approach requires explaining multiple \"advanced\" topics: One "
"teacher doesn't get to teaching any attributes until the second level in his "
"crash course series and two teachers have found it difficult to teach people "
"raw strings"
msgstr ""

#: src/3503-frontmatter.md:430
msgid ""
"Attributes look \"scary\" (and they are in some respects for the hidden "
"stuff they do)"
msgstr ""

#: src/3503-frontmatter.md:432
msgid "Alternative 5: Regular Comment"
msgstr ""

#: src/3503-frontmatter.md:434
msgid "Simple header:"
msgstr ""

#: src/3503-frontmatter.md:436
msgid ""
"/* Cargo.toml:\n"
"[package]\n"
"edition = \"2018\"\n"
"*/"
msgstr ""

#: src/3503-frontmatter.md:446
msgid "HEREDOC:"
msgstr ""

#: src/3503-frontmatter.md:448
msgid ""
"/* Cargo.toml >>>\n"
"[package]\n"
"edition = \"2018\"\n"
"<<<\n"
"*/"
msgstr ""

#: src/3503-frontmatter.md:458
msgid ""
"The manifest can be a regular comment with a header.  If we were to support "
"multiple types of content (manifest, lockfile), we could either use multiple "
"comments or HEREDOC. This does not prescribe the exact syntax used or "
"supported comments"
msgstr ""

#: src/3503-frontmatter.md:464
msgid "Natural to support `Cargo.lock` as well"
msgstr ""

#: src/3503-frontmatter.md:465
msgid ""
"Without existing baggage, can use file extensions, making a firmer "
"association in users minds for what is in these (for those used to `Cargo."
"toml`)"
msgstr ""

#: src/3503-frontmatter.md:467
msgid ""
"Depending on the exact syntax decided on, users may be able to edit/copy/"
"paste the manifest without dealing with leading characters"
msgstr ""

#: src/3503-frontmatter.md:470
msgid ""
"**Blocker** Assuming it can't be parsed with `syn` and either we need to "
"write a sufficiently compatible comment parser or pull in a much larger rust "
"parser to extract and update comments."
msgstr ""

#: src/3503-frontmatter.md:474
msgid ""
"Like with doc comments, this should map to an attribute and then we'd just "
"start the MVP with that attribute"
msgstr ""

#: src/3503-frontmatter.md:475
msgid "Unfamiliar syntax"
msgstr ""

#: src/3503-frontmatter.md:480
msgid ""
"New style of structured comment for the ecosystem to support with potential "
"compatibility issues, likely requiring a new edition"
msgstr ""

#: src/3503-frontmatter.md:483
msgid "Alternative 6: Macro"
msgstr ""

#: src/3503-frontmatter.md:505
msgid ""
"The `cargo` macro would need to come from somewhere (`std`?) which means it "
"is taking on `cargo`\\-specific knowledge"
msgstr ""

#: src/3503-frontmatter.md:506
msgid ""
"An unexplored direction we could go with this is a `meta!` macro (e.g. we'd "
"need to have a format marker in it)"
msgstr ""

#: src/3503-frontmatter.md:507
msgid "A lot of tools/IDEs have problems in dealing with macros"
msgstr ""

#: src/3503-frontmatter.md:508
msgid ""
"Free-form rust code makes it harder for cargo to make edits to the manifest"
msgstr ""

#: src/3503-frontmatter.md:510
msgid ""
"Bazel has an [import proc-macro](https://github.com/bazelbuild/rules_rust/"
"pull/1142) but its more for simplifying the writing of `extern crate`."
msgstr ""

#: src/3503-frontmatter.md:512
msgid "Alternative 7: Presentation Streams"
msgstr ""

#: src/3503-frontmatter.md:524
msgid ""
"YAML allows several documents to be concatenated together variant "
"[presentation streams](https://yaml.org/spec/1.2.2/#323-presentation-stream) "
"which might seem familiar as this is frequently used in static-site "
"generators for adding frontmatter to pages. What if we extended Rust's "
"syntax to allow something similar?"
msgstr ""

#: src/3503-frontmatter.md:531
msgid "Flexible for other content"
msgstr ""

#: src/3503-frontmatter.md:535
msgid ""
"**Blocker** Difficult to parse without assistance from something like `syn` "
"as we'd need to distinguish what the start of a stream is vs content of a "
"string literal"
msgstr ""

#: src/3503-frontmatter.md:536
msgid ""
"Being a new file format (a \"text tar\" format), there would be a lot of "
"details to work out, including"
msgstr ""

#: src/3503-frontmatter.md:537
msgid "How to delineate and label documents"
msgstr ""

#: src/3503-frontmatter.md:538
msgid "How to allow escaping to avoid conflicts with content in a documents"
msgstr ""

#: src/3503-frontmatter.md:539
msgid "Potentially an API for accessing the document from within Rust"
msgstr ""

#: src/3503-frontmatter.md:540
msgid "Unfamiliar, new syntax, unclear how it will work out for newer users"
msgstr ""

#: src/3503-frontmatter.md:542
msgid "Prior art"
msgstr ""

#: src/3503-frontmatter.md:545
msgid ""
"See also [Single-file scripts that download their dependencies](https://"
"dbohdan.com/scripts-with-dependencies) which enumerates the syntax used by "
"different tools."
msgstr ""

#: src/3503-frontmatter.md:548
msgid "`cargo-script` family"
msgstr ""

#: src/3503-frontmatter.md:550
msgid ""
"There are several forks of [cargo script](https://github.com/DanielKeep/"
"cargo-script)."
msgstr ""

#: src/3503-frontmatter.md:552
msgid "doc-comments"
msgstr ""

#: src/3503-frontmatter.md:554
msgid ""
"//! This is a regular crate doc comment, but it also contains a partial\n"
"//! Cargo manifest.  Note the use of a *fenced* code block, and the\n"
"//! `cargo` \"language\".\n"
"//!\n"
"//! ```cargo\n"
"//! [dependencies]\n"
"//! time = \"0.1.25\"\n"
"//! ```\n"
msgstr ""

#: src/3503-frontmatter.md:565 src/3503-frontmatter.md:577
msgid "\"{}\""
msgstr ""

#: src/3503-frontmatter.md:568
msgid "short-hand"
msgstr ""

#: src/3503-frontmatter.md:570
msgid ""
"// cargo-deps: time=\"0.1.25\"\n"
"// You can also leave off the version number, in which case, it's assumed\n"
"// to be \"*\".  Also, the `cargo-deps` comment *must* be a single-line\n"
"// comment, and it *must* be the first thing in the file, after the\n"
"// hashbang.\n"
msgstr ""

#: src/3503-frontmatter.md:581
msgid "RustExplorer"
msgstr ""

#: src/3503-frontmatter.md:583
msgid ""
"[Rust Explorer](https://users.rust-lang.org/t/rust-playground-with-the-"
"top-10k-crates/75746) uses a comment syntax for specifying dependencies"
msgstr ""

#: src/3503-frontmatter.md:586 src/3503-frontmatter.md:609
msgid "Example:"
msgstr ""

#: src/3503-frontmatter.md:588
msgid ""
"/*\n"
"[dependencies]\n"
"actix-web = \"*\"\n"
"ureq = \"*\"\n"
"tokio = { version = \"*\", features = [\"full\"] }\n"
"*/"
msgstr ""

#: src/3503-frontmatter.md:607
msgid "PL/Rust"
msgstr ""

#: src/3503-frontmatter.md:613
msgid "\"0.8\""
msgstr ""

#: src/3503-frontmatter.md:621
msgid ""
"See [External Dependencies](https://github.com/tcdi/plrust/blob/main/doc/src/"
"dependencies.md)"
msgstr ""

#: src/3503-frontmatter.md:623
msgid "YAML frontmatter"
msgstr ""

#: src/3503-frontmatter.md:625
msgid ""
"As a specialization of [YAML presentation streams](https://yaml.org/"
"spec/1.2.2/#323-presentation-stream), static site generators use frontmatter "
"to embed YAML at the top of files. Other systems have extended this for non-"
"YAML use, like [zola using `+++` for TOML](https://www.getzola.org/"
"documentation/content/page/#front-matter)."
msgstr ""

#: src/3503-frontmatter.md:630
msgid "Proposed Python syntax"
msgstr ""

#: src/3503-frontmatter.md:632
msgid ""
"Currently the draft [PEP 723](https://peps.python.org/pep-0723/) proposes "
"allowing begin/end markers inside of regular comments:"
msgstr ""

#: src/3503-frontmatter.md:635
msgid ""
"# /// pyproject\n"
"# [run]\n"
"# requires-python = \">=3.11\"\n"
"# dependencies = [\n"
"#   \"requests<3\",\n"
"#   \"rich\",\n"
"# ]\n"
"# ///\n"
msgstr ""

#: src/3503-frontmatter.md:647
msgid "\"https://peps.python.org/api/peps.json\""
msgstr ""

#: src/3503-frontmatter.md:649
msgid "\"title\""
msgstr ""

#: src/3503-frontmatter.md:652
msgid "Unresolved questions"
msgstr ""

#: src/3503-frontmatter.md:655
msgid "Future possibilities"
msgstr ""

#: src/3503-frontmatter.md:658
msgid "Support infostring attributes"
msgstr ""

#: src/3503-frontmatter.md:659
msgid ""
"We need to better understand use cases for how this should be extended, "
"particularly what the syntax should be (see infostring language)"
msgstr ""

#: src/3503-frontmatter.md:660
msgid ""
"Some tools use comma separated attributes, some use more elaborate syntax "
"wrapped in `{}`"
msgstr ""

#: src/3503-frontmatter.md:661
msgid ""
"A safe starting point could be to say that a space or comma separates the "
"identifier from the attributes and everything after it is defined as part of "
"the \"language\""
msgstr ""

#: src/3503-frontmatter.md:662
msgid ""
"Add support for a `#[frontmatter(info = \"\", content = \"\")]` attribute "
"that this syntax maps to."
msgstr ""

#: src/3503-frontmatter.md:663
msgid ""
"Since nothing will read this, whether we do it now or in the future will "
"have no affect"
msgstr ""

#: src/3503-frontmatter.md:665
msgid "Multiple frontmatters"
msgstr ""

#: src/3503-frontmatter.md:667
msgid ""
"At least for cargo's use cases, the only other file that we would consider "
"supporting is `Cargo.lock` and we have other avenues we want to explore as "
"future possibilities before we even consider the idea of multiple "
"frontmatters."
msgstr ""

#: src/3503-frontmatter.md:671
msgid ""
"So **if** we decide we need to embed additional metadata, we have a couple "
"of options for extending frontmatter support."
msgstr ""

#: src/3503-frontmatter.md:673
msgid "Distinct blocks, maybe with newlines"
msgstr ""

#: src/3503-frontmatter.md:683
msgid "Continuous blocks"
msgstr ""

#: src/3503-frontmatter.md:690
msgid ""
"Distinct blocks is more like the source inspiration, markdown, though has "
"more noise, places to get things wrong, and syntax questions (newlines)."
msgstr ""
