msgid ""
msgstr ""
"Project-Id-Version: The Rust RFC Book\n"
"POT-Creation-Date: 2025-12-01T05:53:04Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Language: zh_CN\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/2124-option-filter.md:1
msgid "Feature Name: option_filter"
msgstr ""

#: src/2124-option-filter.md:2
msgid "Start Date: 2017-08-21"
msgstr ""

#: src/2124-option-filter.md:3
msgid ""
"RFC PR: [rust-lang/rfcs#2124](https://github.com/rust-lang/rfcs/pull/2124)"
msgstr ""

#: src/2124-option-filter.md:4
msgid ""
"Rust Issue: [rust-lang/rust#45860](https://github.com/rust-lang/rust/"
"issues/45860)"
msgstr ""

#: src/2124-option-filter.md:6
msgid "Summary"
msgstr ""

#: src/2124-option-filter.md:9
msgid ""
"Add the method `Option::filter<P>(self, predicate: P) -> Self` to the "
"standard library. This method makes it possible to easily throw away a "
"`Some` value depending on a given predicate. The call `opt.filter(p)` is "
"equivalent to `opt.into_iter().filter(p).next()`."
msgstr ""

#: src/2124-option-filter.md:20
msgid "Motivation"
msgstr ""

#: src/2124-option-filter.md:23
msgid ""
"The `Option` type has plenty of methods, every single one intended to help "
"the user write short code dealing with this ubiquitous type. If we would not "
"care about convenience when dealing with `Option`, the type would not have "
"nearly as many methods."
msgstr ""

#: src/2124-option-filter.md:28
msgid ""
"Just like other methods, `filter()` is a useful method in _certain_ "
"situations. While it is not nearly as important as `map()`, it is very handy "
"in many situations. The feedback on the [corresponding `rfcs`\\-issue]"
"(https://github.com/rust-lang/rfcs/issues/1485) clearly shows that many "
"people encountered a situation in which `filter()` would have been helpful."
msgstr ""

#: src/2124-option-filter.md:34
msgid "Consider this tiny example:"
msgstr ""

#: src/2124-option-filter.md:37
msgid "\"APIKEY\""
msgstr ""

#: src/2124-option-filter.md:38
msgid "\"api\""
msgstr ""

#: src/2124-option-filter.md:41
msgid "Here is another example showing tree traversal with a queue:"
msgstr ""

#: src/2124-option-filter.md:46
msgid ""
"// We want to visit all nodes in breadth first search order, but stop\n"
"// immediately once we found a leaf node.\n"
msgstr ""

#: src/2124-option-filter.md:54
msgid ""
"Additionally, adding `filter()` would make the interfaces of `Option` and "
"`Iterator` more consistent. Both types already shared a handful of methods "
"with identical names and functions, most importantly `map()`. Adding another "
"such method would make the whole interface feel more consistent."
msgstr ""

#: src/2124-option-filter.md:59
msgid ""
"In the following example the programmer can easily swap `nth()` and "
"`filter()` statements, if they decide they want to allow the `-j` parameter "
"at any position."
msgstr ""

#: src/2124-option-filter.md:66
msgid "\"-j\""
msgstr ""

#: src/2124-option-filter.md:71
msgid ""
"`filter()` can be especially useful for integration into existing method- "
"chains. Here is a slightly more complicated example which is taken from an "
"existing, real web app's session management. Note that each line introduces "
"a new reason to reject the session."
msgstr ""

#: src/2124-option-filter.md:77
msgid "// Check if there is a session-cookie\n"
msgstr ""

#: src/2124-option-filter.md:79
msgid "// Try to decode the cookie's value as hexadecimal string\n"
msgstr ""

#: src/2124-option-filter.md:81
msgid "// Make sure the session id has the correct length\n"
msgstr ""

#: src/2124-option-filter.md:83
msgid "// Try to find the session with the given ID in the database\n"
msgstr ""

#: src/2124-option-filter.md:87
msgid ""
"All these examples would be less easy to read without `filter()`. There are "
"two main ways to achieve something equivalent to `filter(p)`:"
msgstr ""

#: src/2124-option-filter.md:90
msgid ""
"`opt.into_iter().filter(p).next()`: notably longer and the `next()` feels "
"semantically wrong."
msgstr ""

#: src/2124-option-filter.md:92
msgid ""
"`opt.and_then(|v| if p(&v) { Some(v) } else { None })`: notably longer and a "
"questionable single-line `if-else`."
msgstr ""

#: src/2124-option-filter.md:98
msgid "Guide-level explanation"
msgstr ""

#: src/2124-option-filter.md:101
msgid "A possible documentation of the method:"
msgstr ""

#: src/2124-option-filter.md:108
msgid ""
"Returns `None` if the option is `None`, otherwise calls `predicate` with the "
"wrapped value and returns:"
msgstr ""

#: src/2124-option-filter.md:111
msgid ""
"`Some(t)` if `predicate` returns `true` (where `t` is the wrapped value), and"
msgstr ""

#: src/2124-option-filter.md:113
msgid "`None` if `predicate` returns `false`."
msgstr ""

#: src/2124-option-filter.md:115
msgid ""
"This function works similar to `Iterator::filter()`. You can imagine the "
"`Option<T>` being an iterator over one or zero elements. `filter()` lets you "
"decide which elements to keep."
msgstr ""

#: src/2124-option-filter.md:119
msgid "Examples"
msgstr ""

#: src/2124-option-filter.md:132
msgid "Reference-level explanation"
msgstr ""

#: src/2124-option-filter.md:135
msgid ""
"It is hopefully sufficiently clear how `filter()` is supposed to work from "
"the explanations above. Here is one example implementation:"
msgstr ""

#: src/2124-option-filter.md:157
msgid "Drawbacks"
msgstr ""

#: src/2124-option-filter.md:160
msgid "It increases the size of the standard library by a tiny bit."
msgstr ""

#: src/2124-option-filter.md:162
msgid "Rationale and Alternatives"
msgstr ""

#: src/2124-option-filter.md:165
msgid "Don't do anything."
msgstr ""

#: src/2124-option-filter.md:167
msgid "Unresolved questions"
msgstr ""

#: src/2124-option-filter.md:170
msgid "Maybe `filter()` wouldn't be used a lot."
msgstr ""

#: src/2124-option-filter.md:172
msgid ""
"The feature proposed in this RFC is already implemented in the [`option-"
"filter` crate](https://crates.io/crates/option-filter). This crate hasn't "
"been used a lot (only around 1500 downloads at the time of writing this). "
"Thus, it makes sense to ask whether people would actually use the `filter()` "
"method. However, there are many other reasons for not using this crate:"
msgstr ""

#: src/2124-option-filter.md:177
msgid "The programmer doesn't know about the crate"
msgstr ""

#: src/2124-option-filter.md:178
msgid ""
"The programmer knows about the crate, but doesn't want to have too many tiny "
"dependencies in their project"
msgstr ""

#: src/2124-option-filter.md:180
msgid ""
"The programmer knows about the crate, but they decided it's too much work to "
"use the crate."
msgstr ""

#: src/2124-option-filter.md:183
msgid ""
"A simple calculation: using the crate would require around 80 new characters "
"(`option-filter = \"*\"` + `extern crate option_filter;` + `use "
"option_filter::OptionFilterExt;`) in at least 2, probably 3, files. On the "
"other hand, using the `.and_then()` workaround shown above would only need "
"39 more characters than `filter()` and wouldn't require opening other files."
msgstr ""

#: src/2124-option-filter.md:190
msgid ""
"According to the assessment of this RFC's author, the mentioned crate is not "
"used for reasons independently of `filter()`'s usefulness."
msgstr ""

#: src/2124-option-filter.md:193
msgid ""
"Reading the comments and looking at the feedback in [this thread](https://"
"github.com/rust-lang/rfcs/issues/1485), it's clear that there are at least "
"some people openly requesting this feature. And to give a specific example: "
"this RFC's author wanted to use `filter()` a whole lot more often than he "
"used some of the other methods of `Option` (like `map_or_else()` and "
"`ok_or_else()`)."
msgstr ""
