msgid ""
msgstr ""
"Project-Id-Version: The Rust RFC Book\n"
"POT-Creation-Date: 2025-12-01T05:53:05Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/3389-manifest-lint.md:1
msgid "Feature Name: `manifest-lint`"
msgstr ""

#: src/3389-manifest-lint.md:2
msgid "Start Date: 2023-02-14"
msgstr ""

#: src/3389-manifest-lint.md:3
msgid ""
"RFC PR: [rust-lang/rfcs#3389](https://github.com/rust-lang/rfcs/pull/3389)"
msgstr ""

#: src/3389-manifest-lint.md:4
msgid ""
"Tracking Issue: [rust-lang/cargo#12115](https://github.com/rust-lang/cargo/"
"issues/12115)"
msgstr ""

#: src/3389-manifest-lint.md:6
msgid "Summary"
msgstr ""

#: src/3389-manifest-lint.md:9
msgid ""
"Add a `[lints]` table to `Cargo.toml` to configure reporting levels for "
"rustc and other tool lints."
msgstr ""

#: src/3389-manifest-lint.md:12
msgid "Motivation"
msgstr ""

#: src/3389-manifest-lint.md:15
msgid "Currently, you can configure lints through"
msgstr ""

#: src/3389-manifest-lint.md:16
msgid ""
"`#[<level>(<lint>)]` or `#![<level>(<lint>)]`, like `#[forbid(unsafe_code)]`"
msgstr ""

#: src/3389-manifest-lint.md:17
msgid ""
"But this doesn't scale up with additional targets (benches, examples, tests) "
"or workspaces"
msgstr ""

#: src/3389-manifest-lint.md:19
msgid "On the command line, like `cargo clippy -- --forbid unsafe_code`"
msgstr ""

#: src/3389-manifest-lint.md:20 src/3389-manifest-lint.md:22
msgid "This puts the burden on the caller"
msgstr ""

#: src/3389-manifest-lint.md:21
msgid "Through `RUSTFLAGS`, like `RUSTFLAGS=--forbid=unsafe_code cargo clippy`"
msgstr ""

#: src/3389-manifest-lint.md:23
msgid "In `.cargo/config.toml`'s `target.*.rustflags`"
msgstr ""

#: src/3389-manifest-lint.md:24
msgid ""
"This couples you to the running in specific directories and not running in "
"the right directory causes rebuilds"
msgstr ""

#: src/3389-manifest-lint.md:26
msgid ""
"The cargo team has previously stated that [they would like to see package-"
"specific config moved to manifests](https://internals.rust-lang.org/t/"
"proposal-move-some-cargo-config-settings-to-cargo-toml/13336/14?u=epage)"
msgstr ""

#: src/3389-manifest-lint.md:29
msgid ""
"We would like a solution that makes it easier to share across targets and "
"packages for all tools."
msgstr ""

#: src/3389-manifest-lint.md:32
msgid "See also"
msgstr ""

#: src/3389-manifest-lint.md:33
msgid ""
"[rust-lang/rust-clippy#1313](https://github.com/rust-lang/rust-clippy/"
"issues/1313)"
msgstr ""

#: src/3389-manifest-lint.md:34
msgid "[rust-lang/cargo#5034](https://github.com/rust-lang/cargo/issues/5034)"
msgstr ""

#: src/3389-manifest-lint.md:35
msgid ""
"[EmbarkStudios/rust-ecosystem#59](https://github.com/EmbarkStudios/rust-"
"ecosystem/issues/59)"
msgstr ""

#: src/3389-manifest-lint.md:36
msgid ""
"[Proposal: Cargo Lint configuration](https://internals.rust-lang.org/t/"
"proposal-cargo-lint-configuration/9135)"
msgstr ""

#: src/3389-manifest-lint.md:38
msgid "Guide-level explanation"
msgstr ""

#: src/3389-manifest-lint.md:41
msgid "A new `lints` table would be added to configure lints:"
msgstr ""

#: src/3389-manifest-lint.md:42 src/3389-manifest-lint.md:66
msgid ""
"```toml\n"
"[lints.rust]\n"
"unsafe_code = \"forbid\"\n"
"```"
msgstr ""

#: src/3389-manifest-lint.md:46
msgid ""
"and `cargo` would pass these along as flags to `rustc`, `clippy`, or other "
"lint tools."
msgstr ""

#: src/3389-manifest-lint.md:48
msgid ""
"This would work with [RFC 2906 `workspace-deduplicate`](https://rust-lang."
"github.io/rfcs/2906-cargo-workspace-deduplicate.html?highlight=2906#):"
msgstr ""

#: src/3389-manifest-lint.md:50
msgid ""
"```toml\n"
"[lints]\n"
"workspace = true\n"
"\n"
"[workspace.lints.rust]\n"
"unsafe_code = \"forbid\"\n"
"```"
msgstr ""

#: src/3389-manifest-lint.md:58
msgid "Documentation Updates"
msgstr ""

#: src/3389-manifest-lint.md:60
msgid "The `lints` section"
msgstr ""

#: src/3389-manifest-lint.md:62
msgid ""
"_as a new [\"Manifest Format\" entry](https://doc.rust-lang.org/cargo/"
"reference/manifest.html#the-manifest-format)_"
msgstr ""

#: src/3389-manifest-lint.md:64
msgid ""
"Override the default level of lints from different tools by assigning them "
"to a new level in a table, for example:"
msgstr ""

#: src/3389-manifest-lint.md:71
msgid "This is short-hand for:"
msgstr ""

#: src/3389-manifest-lint.md:72
msgid ""
"```toml\n"
"[lints.rust]\n"
"unsafe_code = { level = \"forbid\", priority = 0 }\n"
"```"
msgstr ""

#: src/3389-manifest-lint.md:77
msgid "`level` corresponds to the lint levels in `rustc`:"
msgstr ""

#: src/3389-manifest-lint.md:78
msgid "`forbid`"
msgstr ""

#: src/3389-manifest-lint.md:79
msgid "`deny`"
msgstr ""

#: src/3389-manifest-lint.md:80
msgid "`warn`"
msgstr ""

#: src/3389-manifest-lint.md:81
msgid "`allow`"
msgstr ""

#: src/3389-manifest-lint.md:83
msgid ""
"`priority` is a signed integer that controls which lints or lint groups "
"override other lint groups:"
msgstr ""

#: src/3389-manifest-lint.md:84
msgid ""
"lower (particularly negative) numbers have lower priority, being overridden "
"by higher numbers, and show up first on the command-line to tools like "
"`rustc`"
msgstr ""

#: src/3389-manifest-lint.md:88
msgid ""
"To know which table under `[lints]` a particular lint belongs under, it is "
"the part before `::` in the lint name.  If there isn't a `::`, then the tool "
"is `rust`.  For example a warning about `unsafe_code` would be `lints.rust."
"unsafe_code` but a lint about `clippy::enum_glob_use` would be `lints.clippy."
"enum_glob_use`."
msgstr ""

#: src/3389-manifest-lint.md:93
msgid "The `lints` table"
msgstr ""

#: src/3389-manifest-lint.md:95
msgid ""
"_as a new [`[workspace]` entry](https://doc.rust-lang.org/cargo/reference/"
"workspaces.html#the-workspace-section)_"
msgstr ""

#: src/3389-manifest-lint.md:97
msgid ""
"The `workspace.lints` table is where you define lint configuration to be "
"inherited by members of a workspace."
msgstr ""

#: src/3389-manifest-lint.md:99
msgid "Specifying a workspace lint configuration is similar to package lints."
msgstr ""

#: src/3389-manifest-lint.md:101
msgid "Example:"
msgstr ""

#: src/3389-manifest-lint.md:103
msgid ""
"```toml\n"
"# [PROJECT_DIR]/Cargo.toml\n"
"[workspace]\n"
"members = [\"crates/*\"]\n"
"\n"
"[workspace.lints.rust]\n"
"unsafe_code = \"forbid\"\n"
"```"
msgstr ""

#: src/3389-manifest-lint.md:112
msgid ""
"```toml\n"
"# [PROJECT_DIR]/crates/bar/Cargo.toml\n"
"[package]\n"
"name = \"bar\"\n"
"version = \"0.1.0\"\n"
"\n"
"[lints]\n"
"workspace = true\n"
"```"
msgstr ""

#: src/3389-manifest-lint.md:122
msgid "Reference-level explanation"
msgstr ""

#: src/3389-manifest-lint.md:125
msgid ""
"When parsing a manifest, cargo will resolve workspace inheritance for `lints."
"workspace = true` as it does with basic fields, when `workspace` is present, "
"no other fields are allowed to be present.  This precludes having the "
"package override the workspace on a lint-by-lint basis."
msgstr ""

#: src/3389-manifest-lint.md:130
msgid ""
"cargo will contain a mapping of tool to underlying command (e.g. `rust` to "
"`rustc`, `clippy` to `rustc` when clippy is the driver, `rustdoc` to "
"`rustdoc`).  When running the underlying command for the specified package, "
"cargo will:"
msgstr ""

#: src/3389-manifest-lint.md:134
msgid "Transform the lints from `tool.lint = level` to `--level tool::lint`"
msgstr ""

#: src/3389-manifest-lint.md:135
msgid "Leaving off the `tool::` when it is `rust`"
msgstr ""

#: src/3389-manifest-lint.md:136
msgid ""
"cargo will error if `lint` contains `::` as the first part is assumed to be "
"a tool and it should be listed in that tool's table"
msgstr ""

#: src/3389-manifest-lint.md:138
msgid ""
"Sort them by priority and then an unspecified order within priority that we "
"may change in the [future](#future-possibilities)."
msgstr ""

#: src/3389-manifest-lint.md:139
msgid ""
"On initial release, the sort will likely be reverse alphabetical which would "
"cause `all` to be last, making it unlikely to do what the user wants which "
"would raise awareness of the need for setting `priority` for all groups."
msgstr ""

#: src/3389-manifest-lint.md:140
msgid ""
"Pass them on the command line before other configuration like `RUSTFLAGS`, "
"allowing user configuration to override package configuration."
msgstr ""

#: src/3389-manifest-lint.md:142
msgid ""
"These flags will be fingerprinted so changing them will cause a rebuild only "
"for the commands where they are used.  By only including the lints for the "
"command in question, we reduce what is fingerprinted, reducing what gets "
"rebuilt when `[lints]` is changed."
msgstr ""

#: src/3389-manifest-lint.md:147
msgid ""
"Note that this means that `[lints]` is only applied to the package where its "
"defined and not to its dependencies, local or not.  This avoids having to "
"unify `[lints]` tables across local packages.  Normally, lints for non-local "
"dependencies won't be shown anyways because of `--cap-lints`.  As for local "
"dependencies, they will likely have their own `[lints]` table, most the same "
"one, inherited from the workspace."
msgstr ""

#: src/3389-manifest-lint.md:154
msgid "Initially, the only supported tools will be:"
msgstr ""

#: src/3389-manifest-lint.md:155
msgid "`rust`"
msgstr ""

#: src/3389-manifest-lint.md:156
msgid "`clippy`"
msgstr ""

#: src/3389-manifest-lint.md:157
msgid "`rustdoc`"
msgstr ""

#: src/3389-manifest-lint.md:159
msgid ""
"The reason for `rust` existing, despite lints not being prefixed with `rust::"
"`, is to avoid ambiguity in the data model between `lint.<lint>` and `lint."
"<tool>.<lint>`.  A downside to naming the tool `rust` is it might be "
"confusing if we ever expose `rustc::` lints."
msgstr ""

#: src/3389-manifest-lint.md:164
msgid ""
"Addition of third-party tools would fall under their [attributes for tools]"
"(https://github.com/rust-lang/rust/issues/44690)."
msgstr ""

#: src/3389-manifest-lint.md:167
msgid ""
"**Note:** This reserves the tool name `workspace` to allow workspace "
"inheritance."
msgstr ""

#: src/3389-manifest-lint.md:169
msgid "Drawbacks"
msgstr ""

#: src/3389-manifest-lint.md:172
msgid ""
"Since `[lints]` only affects the associated package, and not dependencies, "
"it will not work with `future-incompat` lints that are meant to be applied "
"to dependencies.  This may cause some user confusion."
msgstr ""

#: src/3389-manifest-lint.md:176
msgid ""
"There has been some user/IDE confusion about running commands like `rustfmt` "
"directly and expecting them to pick up configuration only associated with "
"their higher-level cargo-plugins despite that configuration (like `package."
"edition`) being cargo-specific.  By baking the configured lint levels for "
"rustc, rustdoc, and clippy directly into cargo, we will be seeing more of "
"this.  A hope is that this will actually improve with this RFC.  Over time, "
"tools will need to switch to the model of running `cargo` to get "
"configuration in response to this RFC. As for users, if a tool's primary "
"configuration is in `Cargo.toml`, that will provide a strong coupling with "
"`cargo` in users minds as compared to using an external configuration file "
"and overlooking the one or two fields read from `Cargo.toml`."
msgstr ""

#: src/3389-manifest-lint.md:188
msgid ""
"As this focuses on lints, this leaves out first-party tools that need "
"configuration but aren't linters, namely `rustfmt`, leading to an "
"inconsistent experience if `clippy.toml` goes away in the future (if we act "
"on the future possibility of supporting linter configuration)"
msgstr ""

#: src/3389-manifest-lint.md:193
msgid ""
"A concern brought up in [rust-lang/rust-clippy#1313](https://github.com/rust-"
"lang/rust-clippy/issues/1313) was that this will pass lints unconditionally "
"to the underlying tool, leading to \"undefined lint\" warnings when used on "
"earlier versions, requiring that warning to also be suppressed, reducing its "
"value.  However, in the \"Future possibilities\" section, we mention direct "
"support for tying lints to rust versions."
msgstr ""

#: src/3389-manifest-lint.md:200
msgid "This does not allow sharing lints across workspaces."
msgstr ""

#: src/3389-manifest-lint.md:202
msgid "Rationale and alternatives"
msgstr ""

#: src/3389-manifest-lint.md:205
msgid ""
"When designing this, we wanted to keep in mind how things work today, "
"including"
msgstr ""

#: src/3389-manifest-lint.md:206
msgid ""
"`clippy` defines all configuration as linter/tool config and not lint config "
"(linter/lint config is a future possibility)"
msgstr ""

#: src/3389-manifest-lint.md:207
msgid "All `clippy` lint groups are disjoint"
msgstr ""

#: src/3389-manifest-lint.md:208
msgid "`rustdoc` has no plans for groups outside of `all`"
msgstr ""

#: src/3389-manifest-lint.md:209
msgid "`rustc` today has some intersecting groups"
msgstr ""

#: src/3389-manifest-lint.md:211
msgid ""
"However, we also need to consider how decisions might limit us in the future "
"and whether we want to bind future decisions with this RFC, including"
msgstr ""

#: src/3389-manifest-lint.md:212
msgid "Whether existing decisions will be revisited"
msgstr ""

#: src/3389-manifest-lint.md:213
msgid ""
"When new tools are added, like `cargo` and `cargo-semver-check`, which "
"haven't had lint levels and configuration long enough (or at all) to explore "
"their problem and design space."
msgstr ""

#: src/3389-manifest-lint.md:215
msgid "Misc"
msgstr ""

#: src/3389-manifest-lint.md:217
msgid ""
"This could be left to `clippy.toml` but that leaves `rustc`, `rustdoc`, and "
"future linters without a solution."
msgstr ""

#: src/3389-manifest-lint.md:219
msgid ""
"`[lints]` could be `[package.lints]`, tying it to the package unlike "
"`[patch]` and other fields that are more workspace related.  Instead, we "
"used `[dependencies]` as our model."
msgstr ""

#: src/3389-manifest-lint.md:223
msgid ""
"`[lints]` could be `[lint]` but we decided to follow the precedence of "
"`[dependencies]`."
msgstr ""

#: src/3389-manifest-lint.md:225
msgid "Schema"
msgstr ""

#: src/3389-manifest-lint.md:227
msgid ""
"In evaluating prior art, we saw two major styles for configuring lint levels:"
msgstr ""

#: src/3389-manifest-lint.md:229
msgid "Python-style:"
msgstr ""

#: src/3389-manifest-lint.md:230
msgid ""
"```toml\n"
"[lints]\n"
"warn = [\n"
"  { lint = \"rust_2018_idioms\", priority = -1 },\n"
"  { lint = \"clippy::all\", priority = -1 },\n"
"  \"clippy::await_holding_lock\",\n"
"  \"clippy::char_lit_as_u8\",\n"
"  \"clippy::checked_conversions\",\n"
"]\n"
"deny = [\n"
"  \"unsafe_code\",\n"
"]\n"
"```"
msgstr ""

#: src/3389-manifest-lint.md:244
msgid "Inspired by ESLint-style:"
msgstr ""

#: src/3389-manifest-lint.md:245
msgid ""
"```toml\n"
"[lints.rust]\n"
"rust_2018_idioms = { level = \"warn\", priority = -1}\n"
"\n"
"unsafe_code = \"deny\"\n"
"\n"
"[lints.clippy]\n"
"all = { level = \"warn\", priority = -1 }\n"
"\n"
"await_holding_lock = \"warn\"\n"
"char_lit_as_u8 = \"warn\"\n"
"checked_conversions = \"warn\"\n"
"```"
msgstr ""

#: src/3389-manifest-lint.md:258
msgid "More akin to `eslint`"
msgstr ""

#: src/3389-manifest-lint.md:260
msgid ""
"In a lot of areas, which to choose comes down to personal preference and "
"what people are comfortable with:"
msgstr ""

#: src/3389-manifest-lint.md:261
msgid "If you want to lookup everything for a level, Python-style works better"
msgstr ""

#: src/3389-manifest-lint.md:262
msgid "If you want to look up the level for a lint, ESLint-style works better"
msgstr ""

#: src/3389-manifest-lint.md:263
msgid "Python-style is more succinct"
msgstr ""

#: src/3389-manifest-lint.md:264
msgid "Python-style has fewer jagged edges"
msgstr ""

#: src/3389-manifest-lint.md:266
msgid "We ended up favoring more of the ESLint-style because:"
msgstr ""

#: src/3389-manifest-lint.md:267
msgid ""
"ESLint-style offers more syntax choices for lint config (inline tables, "
"standard tables, dotted keys).  In general, the TOML experience for deeply "
"nested inline structures is not great."
msgstr ""

#: src/3389-manifest-lint.md:270
msgid ""
"Right now, the only other lint field beside `level` is `priority`.  In the "
"future we may add lint configuration.  While we shouldn't exclusively design "
"for this possibility, all things being equal, we shouldn't make that "
"potential future's experience worse"
msgstr ""

#: src/3389-manifest-lint.md:271
msgid ""
"ESLInt-style makes it easier to visually highlight groups and the lints "
"related to those groups"
msgstr ""

#: src/3389-manifest-lint.md:272
msgid ""
"The cargo team has seen support issues that partially arise from a user "
"losing track of which `dependencies` table they are in because the list of "
"dependencies is large enough to have the header far enough away (or off "
"screen).  This can similarly happen with Python-style as the context of the "
"level is in the table header.  See [EmbarkStudios's lint list as an example "
"of where this could happen](https://github.com/EmbarkStudios/rust-ecosystem/"
"blob/81d62539a57add13f4b0f1c503e267b6de358f70/lints.toml)"
msgstr ""

#: src/3389-manifest-lint.md:277
msgid ""
"If we add support for packages to override some of the lints inherited from "
"the workspace, it is easier for users to map out this relationship with "
"ESLint-style."
msgstr ""

#: src/3389-manifest-lint.md:281
msgid "Linter Tables vs Linter Namespaces"
msgstr ""

#: src/3389-manifest-lint.md:283
msgid ""
"We started off with lints being referenced with their tool as a namespace (e."
"g. `\"clipp::enum_glob_use\"`) like in diagnostic messages, making copy/"
"paste easy."
msgstr ""

#: src/3389-manifest-lint.md:286
msgid ""
"However, we switched to a more hierarchical data model (e.g. `clippy."
"enum_glob_use`) to avoid quoting keys with the `lints.<lint> = <level>` "
"schema."
msgstr ""

#: src/3389-manifest-lint.md:289
msgid "If we add lint/linter config in the future"
msgstr ""

#: src/3389-manifest-lint.md:290
msgid ""
"Being more hierarchical means lint and linter config are kept closer to each "
"other, making it easier to evaluate their impact on each other."
msgstr ""

#: src/3389-manifest-lint.md:292
msgid ""
"`lints.<lint> = <level>` combined with `lints.<linter>.metadata` makes it "
"harder for cargo to collect all the lints to pass down into the compiler "
"driver."
msgstr ""

#: src/3389-manifest-lint.md:296
msgid "Lint Precedence"
msgstr ""

#: src/3389-manifest-lint.md:298
msgid ""
"Currently, `rustc` allows lints to be controlled on the command-line with "
"the last level for a lint winning.  They may also be specified as attributes "
"with the last instance winning.  `cargo` adds the `RUSTFLAGS` environment "
"variable and `config.toml` entry.  On top of this, there are lint groups "
"that act as aliases to sets of lints.  These groups may be disjoint, "
"supersets, or they may even intersect."
msgstr ""

#: src/3389-manifest-lint.md:305
msgid "Example `RUSTFLAGS`:"
msgstr ""

#: src/3389-manifest-lint.md:306
msgid "`-Aclippy::all -Wclippy::doc_markdown`"
msgstr ""

#: src/3389-manifest-lint.md:307
msgid "`-Dfuture-incompatible -Asemicolon_in_expressions_from_macros`"
msgstr ""

#: src/3389-manifest-lint.md:309
msgid ""
"In providing lint-level configuration in `Cargo.toml`, users will need to be "
"able to set the lint level for group and then override individual lints "
"within that group while interacting with the existing `RUSTFLAGS` system."
msgstr ""

#: src/3389-manifest-lint.md:313
msgid ""
"We have chosen **Option 6** with `priority` being in-scope for this RFC and "
"warnings and auto-sorting as a future possibility."
msgstr ""

#: src/3389-manifest-lint.md:316
msgid "**Option 1: Auto-sort**"
msgstr ""

#: src/3389-manifest-lint.md:319 src/3389-manifest-lint.md:330
#: src/3389-manifest-lint.md:376 src/3389-manifest-lint.md:385
#: src/3389-manifest-lint.md:397
msgid "\"deny\""
msgstr ""

#: src/3389-manifest-lint.md:320 src/3389-manifest-lint.md:329
#: src/3389-manifest-lint.md:375 src/3389-manifest-lint.md:384
#: src/3389-manifest-lint.md:396
msgid "\"allow\""
msgstr ""

#: src/3389-manifest-lint.md:321 src/3389-manifest-lint.md:328
#: src/3389-manifest-lint.md:374 src/3389-manifest-lint.md:383
#: src/3389-manifest-lint.md:394
msgid "\"warn\""
msgstr ""

#: src/3389-manifest-lint.md:323
msgid ""
"Unable to handle if two intersecting groups are assigned different levels"
msgstr ""

#: src/3389-manifest-lint.md:325
msgid "**Option 2: Ordered keys**"
msgstr ""

#: src/3389-manifest-lint.md:332
msgid "Relies on the order of keys in a TOML table which is undefined"
msgstr ""

#: src/3389-manifest-lint.md:333
msgid ""
"Without standard ordering semantics, like with `[]`, users or formatters "
"might naively reformat the table which would affect the semantics"
msgstr ""

#: src/3389-manifest-lint.md:336
msgid "**Option 3: Array of tables**"
msgstr ""

#: src/3389-manifest-lint.md:337
msgid ""
"```toml\n"
"# inline table\n"
"[lints]\n"
"rust = [\n"
"    { lint = \"all\", level = \"warn\" },\n"
"    { lint = \"allow_dead_code\", level = \"allow\" },\n"
"    { lint = \"unsafe_code\", level = \"deny\" },\n"
"]\n"
"# standard table\n"
"[[lints.clippy]]\n"
"lint = \"all\"\n"
"level = \"warn\"\n"
"[[lints.clippy]]\n"
"lint = \"cyclomatic_complexity\"\n"
"level = \"allow\"\n"
"```"
msgstr ""

#: src/3389-manifest-lint.md:353
msgid "The syntax for this seems overly verbose"
msgstr ""

#: src/3389-manifest-lint.md:354 src/3389-manifest-lint.md:369
msgid "Complex, nested structures aren't the easiest to work with in TOML"
msgstr ""

#: src/3389-manifest-lint.md:356
msgid "**Option 4: Compact array of tables**"
msgstr ""

#: src/3389-manifest-lint.md:357
msgid ""
"```toml\n"
"[tools.rust]\n"
"lints = [\n"
"    { warn = \"all\" },\n"
"    { allow = \"allow_dead_code\" },\n"
"    { deny = \"unsafe_code\" },\n"
"]\n"
"```"
msgstr ""

#: src/3389-manifest-lint.md:365
msgid ""
"_Note:_ `lints.rust = []` wasn't used as that won't work with linter "
"configuration in the future"
msgstr ""

#: src/3389-manifest-lint.md:366
msgid ""
"_Note:_ Top-level table was changed to avoid `lints.rust.lints` redundancy "
"and would allow us to open this up to more tools in the future"
msgstr ""

#: src/3389-manifest-lint.md:367
msgid ""
"_Note:_ `<level> = <lint>` (instead of the other way) to keep the keys "
"finite so we can add more fields in the future"
msgstr ""

#: src/3389-manifest-lint.md:368
msgid "Mirrors the familiar `RUSTFLAGS` syntax"
msgstr ""

#: src/3389-manifest-lint.md:371
msgid "**Option 5: `priority` field**"
msgstr ""

#: src/3389-manifest-lint.md:378
msgid ""
"Difficult for the user to figure out there is a problem or how to address it"
msgstr ""

#: src/3389-manifest-lint.md:380
msgid "**Option 6: `priority` field with warnings and maybe auto-sort**"
msgstr ""

#: src/3389-manifest-lint.md:387
msgid ""
"Option 1 (auto-sort) but using Option 5 (`priority` field) to break ties"
msgstr ""

#: src/3389-manifest-lint.md:388
msgid "Produces warnings to tell the user when `priority` may be needed"
msgstr ""

#: src/3389-manifest-lint.md:389
msgid ""
"As `priority` is a low-level subset, we can start with that as an MVP.  "
"Later, we can add warnings for all the ambiguity cases.  As we gain "
"confidence in this, we can then add auto-sorting."
msgstr ""

#: src/3389-manifest-lint.md:391
msgid "**Option 7: Explicit groups**"
msgstr ""

#: src/3389-manifest-lint.md:399
msgid "Hard codes knowledge of `all`"
msgstr ""

#: src/3389-manifest-lint.md:400
msgid "Does not solve the intersecting group problem"
msgstr ""

#: src/3389-manifest-lint.md:401
msgid ""
"Names aren't validated as being from a group without duplicating the work "
"needed for Option 1 (auto-sort)"
msgstr ""

#: src/3389-manifest-lint.md:403
msgid "Workspace Inheritance"
msgstr ""

#: src/3389-manifest-lint.md:405
msgid ""
"Instead of using workspace inheritance for `[lint]`, we could make it "
"workspace-level configuration, like `[patch]` which is automatically applied "
"to all workspace members.  However, `[patch]` and friends are because they "
"affect the resolver / `Cargo.toml` and so they can only operate at the "
"workspace level.  `[lints]` is more like `[dependencies]` in being something "
"that applies at the package level but we want shared across workspaces."
msgstr ""

#: src/3389-manifest-lint.md:412
msgid ""
"Instead of traditional workspace inheritance where there is a single value "
"to inherit with `workspace = true`, we could have `[workspace.lints."
"<preset>]` which defines presets and the user could do `lints.<preset> = "
"true`.  The user could then name them as they wish to avoid collision with "
"rustc lints."
msgstr ""

#: src/3389-manifest-lint.md:417
msgid "`rustfmt`"
msgstr ""

#: src/3389-manifest-lint.md:419
msgid ""
"We could possibly extend this new field to `rustfmt` by shifting the focus "
"from \"lints\" to \"rules\" (see [eslint](https://eslint.org/docs/latest/use/"
"configure/rules)).  However, the more we generalize this field, the fewer "
"assumptions we can make about it.  On one extreme is `package.metadata` "
"which is so free-form we can't support it with workspace inheritance.  A "
"less extreme example is if we make the configuration too general, we would "
"preclude the option of supporting per-package overrides as we wouldn't know "
"enough about the shape of the data to know how to merge it.  There is likely "
"a middle ground that we could make work but it would take time and "
"experimentation to figure that out which is at odds with trying to maintain "
"a stable file format.  Another problem with `rules` is that it is divorced "
"from any context.  In eslint, it is in an eslint-specific config file but a "
"`[rules]` table is not a clear as a `[lints]` table as to what role it "
"fulfills."
msgstr ""

#: src/3389-manifest-lint.md:434
msgid "Target-specific lint"
msgstr ""

#: src/3389-manifest-lint.md:436
msgid ""
"We could support platform or feature specific settings, like with `[lints."
"<target>]` or `[target.<target>.lints]` but"
msgstr ""

#: src/3389-manifest-lint.md:438
msgid ""
"There isn't a defined use case for this yet besides having support for "
"`cfg(feature = \"clippy\")` or which does not seem high enough priority to "
"design around."
msgstr ""

#: src/3389-manifest-lint.md:441
msgid ""
"`[lints.<target>]` runs into ambiguity issues around what is a `<target>` "
"entry vs a `<lint>` entry in the `[lints]` table."
msgstr ""

#: src/3389-manifest-lint.md:443
msgid ""
"We have not yet defined semantics for sharing something like this across a "
"workspace"
msgstr ""

#: src/3389-manifest-lint.md:446
msgid "Prior art"
msgstr ""

#: src/3389-manifest-lint.md:449
msgid "Rust"
msgstr ""

#: src/3389-manifest-lint.md:450
msgid "[cargo cranky](https://github.com/ericseppanen/cargo-cranky)"
msgstr ""

#: src/3389-manifest-lint.md:452
msgid "Python"
msgstr ""

#: src/3389-manifest-lint.md:453
msgid "[flake8](https://flake8.pycqa.org/en/latest/user/configuration.html)"
msgstr ""

#: src/3389-manifest-lint.md:454 src/3389-manifest-lint.md:466
msgid "Format is `level = [lint, ...]`"
msgstr ""

#: src/3389-manifest-lint.md:455
msgid ""
"[pylint](https://github.com/PyCQA/pylint/blob/main/examples/pylintrc#L402)"
msgstr ""

#: src/3389-manifest-lint.md:456
msgid ""
"Format is `level = [lint, ...]` but the [config file is a reflection of the "
"CLI](https://pylint.pycqa.org/en/latest/user_guide/configuration/index.html)"
msgstr ""

#: src/3389-manifest-lint.md:457
msgid "[ruff](https://beta.ruff.rs/docs/configuration/)"
msgstr ""

#: src/3389-manifest-lint.md:458
msgid ""
"Format is `level = [lint, ...]`, due to past precedence in ecosystem (see "
"above)"
msgstr ""

#: src/3389-manifest-lint.md:460
msgid "Javascript"
msgstr ""

#: src/3389-manifest-lint.md:461
msgid "[eslint](https://eslint.org/docs/latest/use/configure/rules)"
msgstr ""

#: src/3389-manifest-lint.md:462
msgid "Format is `lint = level` / `lint = [ level, additional config ]`"
msgstr ""

#: src/3389-manifest-lint.md:464
msgid "Go"
msgstr ""

#: src/3389-manifest-lint.md:465
msgid "[golangci-lint](https://golangci-lint.run/usage/configuration/)"
msgstr ""

#: src/3389-manifest-lint.md:468
msgid "Ruby"
msgstr ""

#: src/3389-manifest-lint.md:469
msgid "[rubocop](https://docs.rubocop.org/rubocop/1.45/configuration.html)"
msgstr ""

#: src/3389-manifest-lint.md:470
msgid "Format is `Lint: Enabled: true`"
msgstr ""

#: src/3389-manifest-lint.md:472
msgid "Unresolved questions"
msgstr ""

#: src/3389-manifest-lint.md:475
msgid "Blocking for stablization"
msgstr ""

#: src/3389-manifest-lint.md:476
msgid "Are we still comfortable with our schema choice?"
msgstr ""

#: src/3389-manifest-lint.md:477
msgid "Are we still comfortable with our precedence choice?"
msgstr ""

#: src/3389-manifest-lint.md:478
msgid "Can we fingerprint only the lints for the tool being run?"
msgstr ""

#: src/3389-manifest-lint.md:480
msgid "Future possibilities"
msgstr ""

#: src/3389-manifest-lint.md:483
msgid "Help the user with `priority`"
msgstr ""

#: src/3389-manifest-lint.md:485
msgid ""
"When running linters through cargo, we could warn the user when there is "
"ambiguity, including"
msgstr ""

#: src/3389-manifest-lint.md:486
msgid "A group and a lint at the same priority"
msgstr ""

#: src/3389-manifest-lint.md:487
msgid "A group that is a superset of another group at the same priority"
msgstr ""

#: src/3389-manifest-lint.md:488
msgid "Two intersecting groups at the same priority"
msgstr ""

#: src/3389-manifest-lint.md:489
msgid "A lint or group that is masked by a group in a later priority"
msgstr ""

#: src/3389-manifest-lint.md:491
msgid ""
"We could then take this a step further and change the way we sort within a "
"priority level to put the most specific entry last, where ambiguity doesn't "
"exist.  This would nearly eliminate the need for specifying `priority` with "
"the current groups."
msgstr ""

#: src/3389-manifest-lint.md:496
msgid ""
"We specifically recommend warning, rather than error, so groups can evolve "
"to become intersecting without it being a breaking change."
msgstr ""

#: src/3389-manifest-lint.md:499
msgid ""
"To implement this, either cargo needs to pass the lints down to the tool in "
"a way to communicate the priority batches, allow cargo to query the group "
"memberships from the linter, or we hard code this at compile-time like rust-"
"analyzer ([lints](https://rust-lang.github.io/rust-clippy/master/lints."
"json), [generate](https://github.com/rust-lang/rust-analyzer/blob/"
"a6464392c15fa8788215d669c4c0b1e46bcadeea/crates/ide-db/src/tests/"
"sourcegen_lints.rs)). One thing to keep in mind is the potential for [custom "
"tools](https://rust-lang.github.io/rfcs/2103-tool-attributes.html) in the "
"future."
msgstr ""

#: src/3389-manifest-lint.md:509
msgid "rustc reporting `Cargo.toml` as lint-level source"
msgstr ""

#: src/3389-manifest-lint.md:511
msgid ""
"Currently Rust tells you where a lint level was enabled when it emits a "
"lint. `rustc` only sees that these lints are coming in from the command-line "
"and doesn't know about `[lints]`. It would be nice if it could also point to "
"Cargo.toml for this.  This could be as simple as a `--lint-source=Cargo."
"toml` with rustc knowing just enough about the `[lints]` table to process it "
"directly."
msgstr ""

#: src/3389-manifest-lint.md:518
msgid "External file"
msgstr ""

#: src/3389-manifest-lint.md:520
msgid ""
"Like with `package.license`, users might want to refer to an external file "
"for their lints.  This especially becomes useful for copy/pasting lints "
"between projects."
msgstr ""

#: src/3389-manifest-lint.md:524
msgid "Configurable lints"
msgstr ""

#: src/3389-manifest-lint.md:526
msgid "We can extend basic lint syntax:"
msgstr ""

#: src/3389-manifest-lint.md:527
msgid ""
"```toml\n"
"[lints.clippy]\n"
"cyclomatic_complexity = \"allow\"\n"
"```"
msgstr ""

#: src/3389-manifest-lint.md:531
msgid "to support configuration, whether for cargo or the lint tool:"
msgstr ""

#: src/3389-manifest-lint.md:532
msgid ""
"```toml\n"
"[lints.clippy]\n"
"cyclomatic_complexity = { level = \"allow\", rust-version = \"1.23.0\", "
"threshold = 30 }\n"
"```"
msgstr ""

#: src/3389-manifest-lint.md:536
msgid ""
"Where `rust-version` is used by cargo to determine whether to pass along "
"this lint and `threshold` is used by the tool.  We'd need to define how to "
"distinguish between reserved and unreserved field names."
msgstr ""

#: src/3389-manifest-lint.md:540
msgid ""
"Tool-wide configuration would be in the `lints.<tool>.metadata` table and be "
"completely ignored by `cargo`.  For example:"
msgstr ""

#: src/3389-manifest-lint.md:547
msgid ""
"Tools will need `cargo metadata` to report the `lints` table so they can "
"read it without re-implementing workspace inheritance."
msgstr ""

#: src/3389-manifest-lint.md:550
msgid ""
"**Note:** At this time, there is no lint configuration for clippy, just tool "
"configuration.  `lints.clippy.cyclomatic_complexity` exists for illustrative "
"purposes of what linters could support and is not indicative of any future "
"plans for clippy itself."
msgstr ""

#: src/3389-manifest-lint.md:555
msgid "Packages overriding inherited lints"
msgstr ""

#: src/3389-manifest-lint.md:557
msgid ""
"Currently, it is a hard error to mix `workspace = true` and lints.  We could "
"open this up in the future for the package to override lints from the "
"workspace.  This would not be a breaking change as we'd be changing an error "
"case into a working case.  We should consider the possibility of adding "
"configurable lints in the future and what that would look like with "
"overridin of lints."
msgstr ""

#: src/3389-manifest-lint.md:564
msgid "Extending the syntax to `.cargo/config.toml`"
msgstr ""

#: src/3389-manifest-lint.md:566
msgid ""
"Similar to `profile` and `patch` being in both files, we could support "
"`[lints]` in both files.  This allows more flexibility for experimentation "
"with this feature, like conditionally applying them or applying them via "
"environment variables.  For now, users still have the option of using "
"`rustflags`."
msgstr ""

#: src/3389-manifest-lint.md:571
msgid ""
"We would need to define whether this only affects local packages as-if the "
"user set it in `Cargo.toml` or if it also affects dependencies."
msgstr ""

#: src/3389-manifest-lint.md:574
msgid ""
"In doing so, we would need to define how `priority` interacts with different "
"sources of `[lints]`."
msgstr ""

#: src/3389-manifest-lint.md:577
msgid "Cargo Lints"
msgstr ""

#: src/3389-manifest-lint.md:579
msgid ""
"The cargo team has expressed interest in producing warnings for more "
"situations but this requires defining a lint control system for it.  The "
"overhead of doing so has detered people from adding additional warnings.  "
"This would provide an MVP for controlling cargo lints, unblocking the cargo "
"team from adding more warnings.  This just leaves the question of whether "
"these belong more in cargo or in clippy which already has some cargo-"
"specific lints."
msgstr ""
