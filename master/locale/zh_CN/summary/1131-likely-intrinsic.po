msgid ""
msgstr ""
"Project-Id-Version: The Rust RFC Book\n"
"POT-Creation-Date: 2025-12-01T05:53:03Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/1131-likely-intrinsic.md:1
msgid "Feature Name: expect_intrinsic"
msgstr ""

#: src/1131-likely-intrinsic.md:2
msgid "Start Date: 2015-05-20"
msgstr ""

#: src/1131-likely-intrinsic.md:3
msgid ""
"RFC PR: [rust-lang/rfcs#1131](https://github.com/rust-lang/rfcs/pull/1131)"
msgstr ""

#: src/1131-likely-intrinsic.md:4
msgid ""
"Rust Issue: [rust-lang/rust#26179](https://github.com/rust-lang/rust/"
"issues/26179)"
msgstr ""

#: src/1131-likely-intrinsic.md:6
msgid "Summary"
msgstr ""

#: src/1131-likely-intrinsic.md:8
msgid ""
"Provide a pair of intrinsic functions for hinting the likelihood of branches "
"being taken."
msgstr ""

#: src/1131-likely-intrinsic.md:10
msgid "Motivation"
msgstr ""

#: src/1131-likely-intrinsic.md:12
msgid ""
"Branch prediction can have significant effects on the running time of some "
"code. Especially tight inner loops which may be run millions of times. While "
"in general programmers aren't able to effectively provide hints to the "
"compiler, there are cases where the likelihood of some branch being taken "
"can be known."
msgstr ""

#: src/1131-likely-intrinsic.md:17
msgid ""
"For example: in arbitrary-precision arithmetic, operations are often "
"performed in a base that is equal to `2^word_size`. The most basic division "
"algorithm, \"Schoolbook Division\", has a step that will be taken in `2/B` "
"cases (where `B` is the base the numbers are in), given random input. On a "
"32-bit processor that is approximately one in two billion cases, for 64-bit "
"it's one in 18 quintillion cases."
msgstr ""

#: src/1131-likely-intrinsic.md:23
msgid "Detailed design"
msgstr ""

#: src/1131-likely-intrinsic.md:25
msgid ""
"Implement a pair of intrinsics `likely` and `unlikely`, both with signature "
"`fn(bool) -> bool` which hint at the probability of the passed value being "
"true or false. Specifically, `likely` hints to the compiler that the passed "
"value is likely to be true, and `unlikely` hints that it is likely to be "
"false. Both functions simply return the value they are passed."
msgstr ""

#: src/1131-likely-intrinsic.md:30
msgid ""
"The primary reason for this design is that it reflects common usage of this "
"general feature in many C and C++ projects, most of which define simple "
"`LIKELY` and `UNLIKELY` macros around the gcc `__builtin_expect` intrinsic. "
"It also provides the most flexibility, allowing branches on any condition to "
"be hinted at, even if the process that produced the branched-upon value is "
"complex. For why an equivalent to `__builtin_expect` is not being exposed, "
"see the Alternatives section."
msgstr ""

#: src/1131-likely-intrinsic.md:37
msgid ""
"There are no observable changes in behaviour from use of these intrinsics. "
"It is valid to implement these intrinsics simply as the identity function. "
"Though it is expected that the intrinsics provide information to the "
"optimizer, that information is not guaranteed to change the decisions the "
"optimiser makes."
msgstr ""

#: src/1131-likely-intrinsic.md:42
msgid "Drawbacks"
msgstr ""

#: src/1131-likely-intrinsic.md:44
msgid ""
"The intrinsics cannot be used to hint at arms in `match` expressions. "
"However, given that hints would need to be variants, a simple intrinsic "
"would not be sufficient for those purposes."
msgstr ""

#: src/1131-likely-intrinsic.md:47
msgid "Alternatives"
msgstr ""

#: src/1131-likely-intrinsic.md:49
msgid ""
"Expose an `expect` intrinsic. This is what gcc/clang does with "
"`__builtin_expect`. However there is a restriction that the second argument "
"be a constant value, a requirement that is not easily expressible in Rust "
"code. The split into `likely` and `unlikely` intrinsics reflects the "
"strategy we have used for similar restrictions like the ordering constraint "
"of the atomic intrinsics."
msgstr ""

#: src/1131-likely-intrinsic.md:54
msgid "Unresolved questions"
msgstr ""

#: src/1131-likely-intrinsic.md:56
msgid "None."
msgstr ""
