msgid ""
msgstr ""
"Project-Id-Version: The Rust RFC Book\n"
"POT-Creation-Date: 2025-12-01T05:53:06Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Language: zh_TW\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/3691-trusted-publishing-cratesio.md:1
msgid "Security Improvements for CI Publishing to crates.io"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:3
msgid "Feature Name: crates-io-trusted-publishing"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:4
msgid "Start Date: 2024-09-10"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:5
msgid ""
"RFC PR: [rust-lang/rfcs#3691](https://github.com/rust-lang/rfcs/pull/3691)"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:7
msgid "Summary"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:10
msgid ""
"This RFC proposes adding support for [\"trusted publishing\"](https://blog."
"trailofbits.com/2023/05/23/trusted-publishing-a-new-benchmark-for-packaging-"
"security/) to crates.io. Short-lived access tokens are granted via the "
"[OpenID Connect (OIDC) protocol](https://openid.net/connect/) to "
"authenticate and authorize actions with the crates.io APIs."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:12
msgid ""
"The term \"trusted publishing\" here refers to the publishing of crates from "
"a trusted CI/CD system, for example GitHub Actions (GHA), without the use of "
"a manually configured API token. Instead, an access token typically valid "
"for less than an hour is created via OIDC flows and used to authenticate to "
"crates.io."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:14
msgid ""
"\\[!IMPORTANT\\] We will first implement trusted publishing for GitHub "
"Actions as it will encompass the largest user base."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:17
msgid ""
"After GitHub Actions, we will have a foundation and will be able to add "
"support for other CI/CD trusted publishers including GitLab and [CircleCI]"
"(https://circleci.com/docs/openid-connect-tokens/)."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:20
msgid "Motivation"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:23
msgid ""
"Support for trusted publishing is used to strengthen the security posture "
"around the supply chain of publishing Rust crates by _reducing the risk of "
"credential leaks and streamlining release workflows_[^1]. Implementation of "
"this would follow in [PyPI's footsteps](https://blog.pypi.org/"
"posts/2023-04-20-introducing-trusted-publishers/) and align with [OpenSSF's "
"Principles for Package Repository Security](https://repos.openssf.org/"
"principles-for-package-repository-security#authorization)."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:25
msgid ""
"Currently, crates.io only supports user-created API tokens used for either "
"manual (i.e. running `cargo publish` from the developer machine) or "
"automated publishing (i.e. via a CI/CD system)."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:27
msgid "These tokens have some security flaws:"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:29
msgid ""
"They can have no expiration (as of Sept 12 2024, they default to 90 days)."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:30
msgid "They can be used from any source without restriction."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:31
msgid ""
"For example, the same token can be used from a GitHub Actions workflow or "
"from a personal workstation."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:32
msgid ""
"When using the tokens in automated workflows, they must be created in "
"advance and copied by a human -- increasing the risk of accidental exposure."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:33
msgid ""
"Manually-configured API tokens need to be manually revoked if compromised."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:34
msgid ""
"The lag time between exposure and revocation provides more opportunity for "
"abuse."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:35
msgid ""
"This introduces more manual, error prone steps during incident response."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:36
msgid ""
"GitHub's Secret Scanning does partially mitigate token exposures with "
"[automatic detection and reporting to crates.io](https://github.blog/"
"changelog/2023-01-19-the-crate-io-registry-is-now-a-github-secret-scanning-"
"integrator/), but it's not a complete mitigation."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:38
msgid ""
"Our goal with trusted publishing is to mitigate and/or eliminate these risks."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:40
msgid ""
"In contrast to using a traditional API token from crates.io, [OIDC](https://"
"docs.github.com/en/actions/deployment/security-hardening-your-deployments/"
"about-security-hardening-with-openid-connect) and GitHub Actions will allow "
"crate authors to:"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:42
msgid "Avoid any manual creation of an API token."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:43
msgid ""
"OIDC flows create an access token with a limited valid lifetime. For "
"example, the access token may only be valid for 15 minutes after its "
"creation."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:44
msgid ""
"Using OIDC's support for assertions and claims, access can be restricted to "
"authorized sources"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:45
msgid ""
"Claims can be associated to a specific GitHub organization, repository, "
"workflow, and environment."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:46
msgid ""
"Instead of creating an API token, [a trusted publisher configuration]"
"(#trusted-publisher-configuration-cratesio) is used to authorize GitHub "
"Action workflows from a particular organization, repository, workflow, and "
"environment."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:47
msgid "No credential is ever created or copied"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:50
msgid "Guide-level explanation"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:53
msgid "Terminology"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:56
msgid ""
"**OpenID Connect**: [OpenID Connect](https://openid.net/developers/how-"
"connect-works/) (or \"OIDC\") is a federated authentication protocol built "
"on top of OAuth 2.0. OIDC allows unrelated third parties to make and verify "
"cryptographically signed claims about identities."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:57
msgid ""
"**OpenID Connect provider**: An OpenID Connect Provider (OIDC Provider or "
"OIDC IdP) is a third-party service (such as GitHub Actions) that creates ID "
"tokens attesting to identities within its purview. For example, GitHub "
"Actions is the OIDC Provider for ID tokens corresponding to GitHub Actions "
"workflows. An OIDC Provider both creates ID tokens and presents the public "
"keys needed to verify them."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:58
msgid ""
"**Relying Party (RP)**: This is the resource that depends on the OIDC IdP to "
"authenticate users or machines. For example, crates.io would be the _relying "
"party_ that depends on the GitHub Actions OIDC Provider to authenticate "
"incoming _machines_ (i.e. a GHA workflow run)."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:59
msgid ""
"**Trusted Publisher**: A Trusted Publisher is a _specific_ identity trusted "
"to publish for a project on the package index. For example, if `github.com/"
"example/repo/.github/workflows/release.yml` was registered to publish for "
"`https://crates.io/crates/example`, we would say that the former is the "
"latter's Trusted Publisher."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:60
msgid ""
"**Identity token**: Typically referred to as an _ID token_. An ID token is a "
"cryptographically signed representation of an identity (machine or human). "
"In the context of OIDC and trusted publishing ID tokens are structured as "
"JSON Web Tokens that represent the identity of a CI/CD workflow, such as "
"`github.com/example/repo/.github/workflows/release.yml`."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:61
msgid ""
"**Access Token**: In the context of OIDC, after an ID token is verified it "
"can be exchanged for an access token. The access token is used as if it was "
"an API token and actually permits access to perform API actions on crates."
"io. This exchange process is detailed below."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:62
msgid ""
"**JSON Web Key Sets (JWKS)**: The public keys provided by the OIDC provider "
"that the _relying party/resource servers_ use to verify the validity of a "
"cryptographically signed ID token. Often found at the `/.well-known/jwks` "
"URI path on the OIDC provider or in the `jwks_url` key of the `/.well-known/"
"openid-configuration`."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:63
msgid ""
"**Authentication (AuthN)**: Refers to the process of verifying someone or "
"something is _who_ they say they are. This identity verification process can "
"happen in many different ways, including but not limited to, a username/"
"password combination, a shared secret, or even a biometric."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:64
msgid ""
"**Authorization (AuthZ)**: Refers to _what_ an authenticated user/machine "
"can do. For example, they are allowed to _publish_ new crate versions on "
"crates.io, but are not allowed to _yank_ existing crate versions."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:69
msgid "Overview of OpenID Connect (OIDC)"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:72
msgid ""
"We'll do our best here to give you a primer on OIDC and enough contextual "
"information to assist in a solid understanding of this RFC."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:74
msgid ""
"If you'd like more detail about OIDC here are some additional resources:"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:76
msgid ""
"[How OpenID Connect Works](https://openid.net/developers/how-connect-works/)"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:77
msgid ""
"[OpenID Authentication 2.0 Specification](https://openid.net/specs/openid-"
"authentication-2_0.html)"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:78
msgid ""
"OAuth 2.0 RFCs [6749](https://www.ietf.org/rfc/rfc6749.txt) and [6750]"
"(https://www.ietf.org/rfc/rfc6750.txt)"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:79
msgid "_OpenID is built on top of OAuth 2.0_"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:80
msgid ""
"[Using GitHub Action's OIDC Implementation](https://docs.github.com/en/"
"actions/deployment/security-hardening-your-deployments/about-security-"
"hardening-with-openid-connect)"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:82
msgid "A typical machine-to-machine OIDC flow will follow these steps:"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:84
msgid ""
"The client machine will authenticate itself to the OIDC IdP and request an "
"ID token."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:85
msgid ""
"The OIDC IdP, after authenticating the client, will issue a "
"cryptographically signed ID token to be used to prove the client's identity."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:86
msgid ""
"The client will send the ID token to the _resource server_ (aka. _relying "
"party_) to authenticate and request an _access token_."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:87
msgid ""
"The _resource server_ configured to outsource its authentication to the OIDC "
"IdP will verify the cryptographic signature of the ID token using the IdP's "
"public keys provided in its JSON Web Key Sets (JWKS)."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:88
msgid ""
"Once verified, the resource server will create and respond with an _access "
"token_ that can be used by the client."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:89
msgid "The client uses the access token to access the resource server's APIs."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:106
msgid "GitHub Actions OIDC and crates.io"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:109
msgid ""
"When publishing a new crate version to crates.io using GitHub Actions using "
"OIDC authentication the participants include:"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:111
msgid "The _client_ is a particular run of a GitHub Action workflow."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:112
msgid ""
"The _OIDC provider_ is GitHub's own provider dedicated to GitHub Actions."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:113
msgid ""
"Their OpenID configuration can be found at https://token.actions."
"githubusercontent.com/.well-known/openid-configuration."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:114
msgid "The _resource server/relying party_ is crates.io."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:116
msgid ""
"\\[!NOTE\\] Crates.io would be configured by the crates.io Team to trust "
"GitHub's OIDC provider using their configuration declared at [`.well-known/"
"openid-configuration`](https://token.actions.githubusercontent.com/.well-"
"known/openid-configuration)."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:119
msgid ""
"Practically, this means the crates.io server will periodically fetch the "
"public keys needed to verify the validity of the cryptographically signed ID "
"tokens."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:121
msgid ""
"A typical flow (after setting up a trusted publisher configuration) would "
"follow these steps to publish a crate version on crates.io:"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:146
msgid ""
"A developer, possibly after merging a pull request to their default branch, "
"triggers a GitHub Actions release workflow."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:147
msgid ""
"The trigger of this workflow could be either manual or automatic depending "
"on what's supported in the CI/CD system. Triggers that can be used to start "
"a GitHub Action workflow can be found in [their documentation](https://docs."
"github.com/en/actions/using-workflows/events-that-trigger-workflows)."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:148
msgid ""
"The GitHub Actions workflow requests an _ID token_ from the GitHub Action "
"OIDC Provider."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:149
msgid ""
"For the workflow to be authorized to do this, [it needs `id-token: write` "
"permissions declared in the workflow YAML](https://docs.github.com/en/"
"actions/deployment/security-hardening-your-deployments/about-security-"
"hardening-with-openid-connect#adding-permissions-settings)."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:150
msgid ""
"After authenticating the workflow's request for an ID token, the GitHub "
"Actions OIDC provider returns a cryptographically signed ID token (signed by "
"its private key) ."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:151
msgid ""
"The release workflow, sends the signed ID token to crates.io to exchange for "
"an access token."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:152
msgid ""
"The ID token is not used to authorize any action on crates.io, it's only "
"used to authenticate."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:153
msgid ""
"Crates.io, using the public keys of the GitHub Action OIDC Provider, "
"validates the signature of the provided ID token that has been signed."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:154
msgid ""
"Once validated, crates.io generates a temporary access token and returns it "
"to the Github Actions release workflow."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:155
msgid ""
"The release workflow builds the artifact to be published (i.e. [the `.crate` "
"file](https://doc.rust-lang.org/cargo/commands/cargo-package.html))"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:156
msgid ""
"The release workflow, using the access token retrieved from step 6, "
"authenticates to crates.io and publishes the version of the crate."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:157
msgid ""
"As a good steward, once the crate has successfully been published, the "
"workflow job will request the revocation of the access token from crates.io"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:158
msgid ""
"An access token's lifetime might outlive the actual time needed to perform "
"the action. It's good practice to revoke it once done to further limit any "
"risks of accidental exposure."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:160
msgid ""
"\\[!NOTE\\] Steps 7 and 8 are abstracted in the `cargo publish` command. The "
"access token would be passed via the `CARGO_REGISTRY_TOKEN` environment "
"variable."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:165
msgid "Trusted Publisher Configuration on crates.io"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:168
msgid ""
"Prior to publishing a crate through a GitHub Actions workflow, the crate "
"author will need to create a _Trusted Publisher Configuration_ via the "
"crates.io web UI. This is a one-time configuration **required per crate**."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:170
msgid ""
"\\[!Note\\] A _Trusted Publisher Configuration_ can only be created after an "
"initial manual publishing of a crate."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:173
msgid ""
"See [Future Possibilities](#future-possibilities) for future plans to "
"alleviate this pain."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:175
msgid ""
"Without a corresponding _Trusted Publisher Configuration_ any attempts from "
"a GitHub Action workflow to exchange an ID token for an access token from "
"crates.io will be unauthorized and fail."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:177
msgid ""
"A _Trusted Publisher Configuration_ will vary on requirements depending on "
"the trusted publisher being used (e.g. GitHub Actions, GitLab Pipelines, and "
"so on). CI/CD providers will vary in the claims they make within their ID "
"token."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:179
msgid "For GitHub Actions, the crate author will need to provide:"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:181
#: src/3691-trusted-publishing-cratesio.md:248
msgid "(required) The owning GitHub username or organization"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:182
#: src/3691-trusted-publishing-cratesio.md:249
msgid "(required) The repository name"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:183
#: src/3691-trusted-publishing-cratesio.md:250
msgid ""
"(required) The workflow file name (must be located in `.github/workflows/`)"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:184
#: src/3691-trusted-publishing-cratesio.md:251
msgid ""
"(optional) The [GitHub Actions environment](https://docs.github.com/en/"
"actions/deployment/targeting-different-environments/using-environments-for-"
"deployment) name"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:186
msgid ""
"\\[!Note\\] Supply chain compromises are still possible. As such, we are "
"requiring the workflow file name to be defined in order to limit the attack "
"surface. An attacker would need to compromise an action used specifically "
"within the defined workflow file."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:189
msgid ""
"It's recommended to thoroughly review any actions used in your release "
"worfklow."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:191
msgid "Example GitHub Actions Workflow"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:194
msgid ""
"With a _Trusted Publisher Configuration_ in place, a example GitHub Actions "
"workflow may look like this:"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:197
#: src/3691-trusted-publishing-cratesio.md:220
#: src/3691-trusted-publishing-cratesio.md:225
#: src/3691-trusted-publishing-cratesio.md:229
#: src/3691-trusted-publishing-cratesio.md:233
msgid "name"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:197
msgid "Publish Crate"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:199
msgid "Some may opt to use a trigger based on a push with a tag instead"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:201
#: src/3691-trusted-publishing-cratesio.md:213
msgid "release"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:202
msgid "types"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:202
msgid "published"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:203
msgid "jobs"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:205
msgid "build"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:206
msgid "runs-on"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:206
msgid "ubuntu-latest"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:208
msgid ""
"# here we use a GitHub Actions _Environment_ that allows for more \n"
"    # control and steps to ensure security of the publishing \n"
"    # process\n"
"    # \n"
"    # See https://docs.github.com/en/actions/deployment/targeting-different-"
"environments/using-environments-for-deployment\n"
"    environment"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:215
msgid "permissions"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:216
msgid "id-token"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:216
msgid ""
"write  # required in order to get a signed ID token\n"
"      contents"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:217
msgid "read"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:219
msgid "steps"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:220
msgid "Checkout code"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:221
#: src/3691-trusted-publishing-cratesio.md:231
msgid "uses"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:221
msgid "actions/checkout@v4"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:223
msgid ""
"# The step below is not strictly required as `cargo publish`\n"
"    # will perform a build as well.\n"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:225
msgid "Install dependencies"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:226
#: src/3691-trusted-publishing-cratesio.md:234
msgid "run"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:226
msgid "cargo build --release"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:228
msgid "# This action does not exist currently.\n"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:229
msgid "Authenticate with crates.io"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:230
msgid "id"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:230
msgid "auth"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:231
msgid "rust-lang/crates-io-auth-action@v1"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:233
msgid "Publish to crates.io"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:234
msgid "cargo publish"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:235
msgid "env"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:236
msgid "CARGO_REGISTRY_TOKEN"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:236
msgid "${{ steps.auth.outputs.token }}"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:240
msgid "Reference-level explanation"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:243
msgid "Required Configuration Parameters"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:246
msgid ""
"As stated in the [Trusted Publisher Configuration on crates.io](#trusted-"
"publisher-configuration-cratesio) section, a configuration will need to "
"provide:"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:253
msgid ""
"The crate owner will need to provide which crate the particular Trusted "
"Publisher Configuration is allowed to publish."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:255
msgid ""
"The Trusted Publisher Configuration might look like the below, represented "
"in JSON format:"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:259
msgid "\"name\""
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:259
msgid "\"trusted-publisher-config-for-sampleproject\""
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:260
msgid "\"required-claims\""
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:261
msgid "\"owner\""
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:261
msgid "\"octo-org\""
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:262
msgid "\"repo\""
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:262
msgid "\"sampleproject\""
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:263
msgid "\"workflow\""
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:263
msgid "\"release.yml\""
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:264
msgid "\"environment\""
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:264
msgid "\"release\""
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:266
msgid "\"crate\""
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:266
msgid "\"my-sample\""
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:270
msgid ""
"A Trusted Publisher Configuration will be _owned_ by the associated crate. "
"Any owners of the crate can create, delete, or edit these configurations."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:272
msgid "Drawbacks"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:275
msgid "Why should we not do this?"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:278
msgid ""
"_There is some initial complexity in setting up trusted relationship between "
"the CI/CD provider and crates.io._"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:279
msgid ""
"_There is a learning curve to understanding the OIDC authentication flow and "
"its principles that could slow adoption._"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:281
msgid ""
"While these are potential drawbacks, we believe the benefits outweigh them. "
"In reality, OIDC authentication between CI/CD systems and package "
"repositories is generally adopted quickly. PyPI's release of trusted "
"publishing support has seen over 13,000 projects adopt it since April "
"2023[^2]."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:283
msgid ""
"_The external dependency on GitHub's OIDC provider could impact "
"authentication processes from GitHub Actions to crates.io and introduces a "
"potential point of failure in publishing processes._"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:285
msgid ""
"This is unavoidable, but GitHub Actions generally has good uptime. Their "
"most recent incident in May 2024 resulted in degraded performance of "
"workflow runs, but not an entire outage[^3]. Their most significant recent "
"impact in April 2024 potentially resulted in a total outage of 77 minutes "
"for some GitHub Actions users[^4]."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:287
msgid ""
"_The security model changes and requires careful consideration in "
"configuring the GitHub Action workflow and repository permissions._"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:289
msgid ""
"[PyPI does a good job of documenting these concerns.](https://docs.pypi.org/"
"trusted-publishers/security-model/) In our GitHub Action performing the OIDC "
"authentication we will use sane and secure defaults. We will also provide "
"documentation on recommended secure configurations of GithHub Action "
"workflows."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:292
msgid "Rationale and alternatives"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:295
msgid "Why is this design the best in the space of possible designs?"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:298
msgid ""
"This model of authentication to package repositories has been implemented in "
"other communities (see [prior art](#prior-art)). As this model of "
"authentication becomes more ubiquitous adoption will become easier among the "
"developer communities."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:300
msgid ""
"The OAuth 2.0 framework combined with the Open ID Connect protocol is widely "
"used and well documented."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:302
msgid ""
"We can benefit from the cumulative security expertise intrinsically embedded "
"into these solutions."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:304
msgid ""
"What other designs have been considered and what is the rationale for not "
"choosing them?"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:307
msgid ""
"Some services that use OIDC to authenticate use the _ID token_ itself to "
"authorize actions."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:309
msgid ""
"ID tokens will differ in their supported claims from publishing provider to "
"publishing provider."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:310
msgid ""
"This would complicate the authorization code on crates.io for actual API "
"actions (e.g. publishing a crate through our existing APIs) as it would "
"require logic for each publishing provider."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:311
msgid ""
"Identity Providers are in control of the ID token and its contents. "
"Unexpected changes to these contents could lead to authentication issues to "
"crates.io."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:312
msgid ""
"Exchanging the ID token for a crates.io token ensures we have consistency in "
"the authorization logic of crates.io APIs."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:313
msgid ""
"ID tokens would not benefit as much from Secret Scanning or revocation. They "
"are JWTs with a varying format not as well-suited as the crates.io API token."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:314
msgid ""
"By exchanging the ID token for a crates.io-specific access token, when the "
"access token is leaked it can be quickly detected and revoked by the "
"[existing Secret Scanning integrations](https://github.blog/"
"changelog/2023-01-19-the-crate-io-registry-is-now-a-github-secret-scanning-"
"integrator/)."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:316
msgid ""
"The OpenSSF Security Software Repositories Working Group [provides more "
"detailed justification](https://repos.openssf.org/trusted-publishers-for-all-"
"package-repositories#oidc-id-tokens-and-repository-controlled-tokens) to use "
"the token exchange model were a valid ID token is exchanged for a package "
"repository specific access token."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:319
msgid "What is the impact of not doing this?"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:322
msgid ""
"Foregoing the OIDC integration with trusted publishing providers would "
"result in the status-quo. Authentication to crates.io from CI/CD systems "
"would be facilitated via the current API token implementation."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:324
msgid ""
"Crate authors who are more security-sensitive could using the expiring "
"option on API tokens to further reduce potential impact of a leaked API "
"token. However, these API tokens would need to be regularly regenerated in "
"order to avoid interruption in release processes."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:326
msgid ""
"These same API tokens are likely stored long term in a secrets manager like "
"GitHub Actions Secrets or AWS Secrets Manager where a misconfiguration could "
"lead to exposure of the secret."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:328
msgid ""
"\\[!NOTE\\] Other security challenges that would persist by not utilizing "
"Trusted Publishing are detailed in the [Motivation](#motivation) section of "
"this document."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:331
msgid "Prior art"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:334
msgid "Other package repositories have implemented similar support:"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:336
msgid "[PyPI's Trusted Publishing](https://docs.pypi.org/trusted-publishers/)"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:337
msgid ""
"[RubyGem's Trusted Publishing](https://guides.rubygems.org/trusted-"
"publishing/)"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:338
msgid ""
"[Dart's Automated Publishing](https://dart.dev/tools/pub/automated-"
"publishing)"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:339
msgid ""
"[OSSF's Trusted Publishers For All Package Repositories Blog Post](https://"
"repos.openssf.org/trusted-publishers-for-all-package-repositories)"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:341
msgid "Unresolved questions"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:345
msgid ""
"~~Should crate owners be able to configure the allowed token scopes for a "
"Trusted Publisher configuration?~~"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:346
msgid ""
"~~We could default to `publish-new` and `publish-update`, but maybe it's "
"best to allow this to be configurable?~~"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:347
msgid ""
"_Initially, all Trusted Publisher Configurations will default to `publish-"
"update` with no option to change this. After some of the implementations in "
"[Future Possibilities](#future-possibilities) are completed, this can be "
"expanded to allow configuration of additional scopes._"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:348
msgid ""
"~~How long should an access token derived from the ID token exchange be "
"valid for?~~"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:349
msgid ""
"\\_We will provide a long enough lifetime initially for access tokens. We "
"may also allow this to be configured in the Trusted Publisher Configuration. "
"Regardless of the lifetime, the action that performs the token exchange will "
"issue a request to revoke the token at the end of the workflow."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:351
msgid "Out of Scope"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:354
msgid ""
"Provenance verification of published crates (e.g. sigstore or other signing "
"mechanisms)."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:355
msgid ""
"Discussion/debate of CI/CD providers to support next and their expected "
"timelines."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:356
msgid ""
"Support in the GitHub Action used to perform the OIDC authentication with "
"other Rust package registries."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:357
msgid ""
"Direct suppport and implementation of the token exchange flow within `cargo`."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:359
msgid "Items to Resolve Before General Availability"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:362
msgid ""
"Before crates.io officially supports the OIDC authentication flow from "
"GitHub Actions, we will have an official GitHub Action to facilitate the "
"OIDC token exchange."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:363
msgid ""
"Crates.io lacks accessible usage documentation. We will need to document the "
"setup of a Trusted Publisher with screenshots and provide example GitHub "
"Action workflows."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:364
msgid ""
"Maybe a good spot for this would be in [The Cargo Book](https://doc.rust-"
"lang.org/cargo/index.html)?"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:366
msgid "Future possibilities"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:369
msgid ""
"Support creating _Trusted Publisher Configurations_ in a `PENDING` state, "
"prior to the initial publishing of a crate."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:370
msgid ""
"Support for defining the maximum allowed scopes (e.g. `publish-update`, "
"`publish-new`, `yank`, etc.) allowed for the Trusted Publisher Configuration."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:371
msgid ""
"Support for a `DEACTIVATED` state on the Trusted Publisher Configuration to "
"allow toggling on/off the ability to publish crates from the corresponding "
"trusted publisher."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:372
msgid ""
"Support providing a list of crate names in the crates.io UI to simplify "
"configuration for monorepos that publish multiple crates."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:373
msgid "Support for additional trusted publishers (i.e. GitLab, CircleCI)."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:374
msgid "Support for custom assertions on OIDC ID token claims."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:375
msgid ""
"[Additional claims supported by GitHub Actions OIDC ID tokens](https://docs."
"github.com/en/actions/deployment/security-hardening-your-deployments/about-"
"security-hardening-with-openid-connect#understanding-the-oidc-token)"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:376
msgid ""
"Implement support for the authentication and token exchange within `cargo` "
"to minimize the necessary lifetime of the token."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:377
msgid ""
"Once implemented, the default lifetime of the token can be reduced "
"significantly as it will not be dependent on the build time of the crate."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:378
msgid ""
"Support for setting up Trusted Publisher Configurations via a machine-"
"accessible API."
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:381
msgid ""
"https://blog.trailofbits.com/2023/05/23/trusted-publishing-a-new-benchmark-"
"for-packaging-security/"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:382
msgid ""
"https://repos.openssf.org/trusted-publishers-for-all-package-"
"repositories#why-trusted-publishers"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:383
msgid ""
"https://github.blog/news-insights/company-news/github-availability-report-"
"may-2024/"
msgstr ""

#: src/3691-trusted-publishing-cratesio.md:384
msgid ""
"https://github.blog/news-insights/company-news/github-availability-report-"
"april-2024/"
msgstr ""
