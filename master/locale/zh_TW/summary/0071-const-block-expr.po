msgid ""
msgstr ""
"Project-Id-Version: The Rust RFC Book\n"
"POT-Creation-Date: 2025-12-01T05:53:02Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Language: zh_TW\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/0071-const-block-expr.md:1
msgid "Start Date: 2014-05-07"
msgstr ""

#: src/0071-const-block-expr.md:2
msgid "RFC PR: [rust-lang/rfcs#71](https://github.com/rust-lang/rfcs/pull/71)"
msgstr ""

#: src/0071-const-block-expr.md:3
msgid ""
"Rust Issue: [rust-lang/rust#14181](https://github.com/rust-lang/rust/"
"issues/14181)"
msgstr ""

#: src/0071-const-block-expr.md:5
msgid "Summary"
msgstr ""

#: src/0071-const-block-expr.md:7
msgid ""
"Allow block expressions in statics, as long as they only contain items and a "
"trailing const expression."
msgstr ""

#: src/0071-const-block-expr.md:10
msgid "Example:"
msgstr ""

#: src/0071-const-block-expr.md:22
msgid "Motivation"
msgstr ""

#: src/0071-const-block-expr.md:24
msgid ""
"This change allows defining items as part of a const expression, and "
"evaluating to a value using them. This is mainly useful for macros, as it "
"allows hiding complex machinery behind something that expands to a value, "
"but also enables using `unsafe {}` blocks in a static initializer."
msgstr ""

#: src/0071-const-block-expr.md:29
msgid ""
"Real life examples include the `regex!` macro, which currently expands to a "
"block containing a function definition and a value, and would be usable in a "
"static with this."
msgstr ""

#: src/0071-const-block-expr.md:32
msgid ""
"Another example would be to expose a static reference to a fixed memory "
"address by dereferencing a raw pointer in a const expr, which is useful in "
"embedded and kernel, but requires a `unsafe` block to do."
msgstr ""

#: src/0071-const-block-expr.md:36
msgid ""
"The outcome of this is that one additional expression type becomes valid as "
"a const expression, with semantics that are a strict subset of its "
"equivalent in a function."
msgstr ""

#: src/0071-const-block-expr.md:39
msgid "Drawbacks"
msgstr ""

#: src/0071-const-block-expr.md:41
msgid ""
"Block expressions in a function are usually just used to run arbitrary code "
"before evaluating to a value. Allowing them in statics without allowing code "
"execution might be confusing."
msgstr ""

#: src/0071-const-block-expr.md:45
msgid "Detailed design"
msgstr ""

#: src/0071-const-block-expr.md:47
msgid ""
"A branch implementing this feature can be found at https://github.com/"
"Kimundi/rust/tree/const_block."
msgstr ""

#: src/0071-const-block-expr.md:50
msgid "It mainly involves the following changes:"
msgstr ""

#: src/0071-const-block-expr.md:52
msgid "const check now allows block expressions in statics:"
msgstr ""

#: src/0071-const-block-expr.md:53
msgid "All statements that are not item declarations lead to an compile error."
msgstr ""

#: src/0071-const-block-expr.md:54
msgid "trans and const eval are made aware of block expressions:"
msgstr ""

#: src/0071-const-block-expr.md:55
msgid "A trailing expression gets evaluated as a constant."
msgstr ""

#: src/0071-const-block-expr.md:56
msgid "A missing trailing expressions is treated as a unit value."
msgstr ""

#: src/0071-const-block-expr.md:57
msgid ""
"trans is made to recurse into static expressions to generate possible items."
msgstr ""

#: src/0071-const-block-expr.md:59
msgid ""
"Things like privacy/reachability of definitions inside a static block are "
"already handled more generally at other places, as the situation is very "
"similar to a regular function."
msgstr ""

#: src/0071-const-block-expr.md:63
msgid ""
"The branch also includes tests that show how this feature works in practice."
msgstr ""

#: src/0071-const-block-expr.md:65
msgid "Alternatives"
msgstr ""

#: src/0071-const-block-expr.md:67
msgid ""
"Because this feature is a straight forward extension of the valid const "
"expressions, it already causes a very minimal impact on the language, with "
"most alternative ways of enabling the same benefits being more complex."
msgstr ""

#: src/0071-const-block-expr.md:71
msgid ""
"For example, a expression AST node that can include items but is only usable "
"from procedural macros could be added."
msgstr ""

#: src/0071-const-block-expr.md:74
msgid ""
"Not having this feature would not prevent anything interesting from getting "
"implemented, but it would lead to less nice looking solutions."
msgstr ""

#: src/0071-const-block-expr.md:77
msgid ""
"For example, a comparison between static-supporting `regex!` with and "
"without this feature:"
msgstr ""

#: src/0071-const-block-expr.md:80
msgid "// With this feature, you can just initialize a static:\n"
msgstr ""

#: src/0071-const-block-expr.md:81 src/0071-const-block-expr.md:86
msgid "\"[0-9]\""
msgstr ""

#: src/0071-const-block-expr.md:82
msgid ""
"// Without it, the static needs to be generated by the\n"
"// macro itself, alongside all generated items:\n"
msgstr ""

#: src/0071-const-block-expr.md:90
msgid "Unresolved questions"
msgstr ""

#: src/0071-const-block-expr.md:92
msgid "None so far."
msgstr ""
