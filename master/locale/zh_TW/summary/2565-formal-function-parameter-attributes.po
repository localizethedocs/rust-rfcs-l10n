msgid ""
msgstr ""
"Project-Id-Version: The Rust RFC Book\n"
"POT-Creation-Date: 2025-12-01T05:53:05Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"Language: zh_TW\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/2565-formal-function-parameter-attributes.md:1
msgid "Feature Name: `param_attrs`"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:2
msgid "Start Date: 2018-10-14"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:3
msgid ""
"RFC PR: [rust-lang/rfcs#2565](https://github.com/rust-lang/rfcs/pull/2565)"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:4
msgid ""
"Rust Issue: [rust-lang/rust#60406](https://github.com/rust-lang/rust/"
"issues/60406)"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:6
msgid "Summary"
msgstr "摘要"

#: src/2565-formal-function-parameter-attributes.md:9
msgid ""
"Allow attributes in formal function parameter position. For example, "
"consider a Jax-Rs-style HTTP API:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:13
msgid "\"/foo/bar\""
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:15
msgid "\"/person/:name\""
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:18
msgid "// <-- formal function parameter.\n"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:19
msgid "// <-- here too.\n"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:26
msgid "Motivation"
msgstr "動機"

#: src/2565-formal-function-parameter-attributes.md:29
msgid ""
"Allowing attributes on formal function parameters enables external tools and "
"compiler internals to take advantage of the additional information that the "
"attributes provide."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:33
msgid ""
"Conditional compilation with `#[cfg(..)]` is also facilitated by allowing "
"more ergonomic addition and removal of parameters."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:36
msgid ""
"Moreover, procedural macro authors can use annotations on these parameters "
"and thereby richer DSLs may be encoded by users. We already saw an example "
"of such a DSL in the [summary](#summary). To further illustrate potential "
"usages, let's go through a few examples."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:41
msgid "Compiler internals: Improving `#[rustc_args_required_const]`"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:45
msgid ""
"A number of platform intrinsics are currently provided by rust compilers. "
"For example, we have [`core::arch::wasm32::memory_grow`](https://doc.rust-"
"lang.org/nightly/core/arch/wasm32/fn.memory_grow.html) which, for soundness "
"reasons, requires that when `memory_grow` is applied, `mem` must provided a "
"`const` expression:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:55
msgid ""
"This is specified in a positional manner, referring to `mem` by `0`. While "
"this is serviceable, this RFC enables us encode the invariant more directly:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:67
msgid "Property based testing of polymorphic functions"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:73
msgid ""
"Property based testing a la [QuickCheck](https://www.cs.tufts.edu/~nr/cs257/"
"archive/john-hughes/quick.pdf) allows users to state properties they expect "
"their programs to adhere to. These properties are then tested by randomly "
"generating input data and running the properties with those. The properties "
"are can then be falsified by finding counter-examples. If no such example "
"are found, the test passes and the property is \"verified\". In the Rust "
"ecosystem, property based testing is primarily provided by the [proptest]"
"(https://github.com/altsysrq/proptest) and [quickcheck](https://www.cs.tufts."
"edu/~nr/cs257/archive/john-hughes/quick.pdf) crates where the former uses "
"integrated shrinking whereas the latter uses type based shrinking."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:82
msgid ""
"Consider a case where we want to test a \"polymorphic\" function on a number "
"of concrete types."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:86
msgid "// N.B. Using proptest doesn't look like this today.\n"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:90
msgid ""
"Here, we've overloaded the test for the types `u8`, `u16`, and `u32`. The "
"test will then act as if you had written:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:104
msgid ""
"By allowing attributes on function parameters, the test can be specified "
"more succinctly and without repetition as done in the first example."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:107
msgid "FFI and interoperation with other languages"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:111
msgid ""
"There's interest in using attributes on function parameters for "
"[`#[wasm_bindgen]`](https://github.com/rustwasm/wasm-bindgen). For example, "
"to interoperate well with TypeScript's type system, you could write:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:121
msgid "\"MapNode[]\""
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:126
msgid "\"MapEdge[]\""
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:134
msgid ""
"Currently, in `#[wasm_bindgen]`, the arguments and return type of `layout` "
"are all `any[]`. By using allowing the annotations above, tighter types can "
"be used which can help in catching problems at compile time rather than "
"having UI bugs later."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:139
msgid "Greater control over optimizations in low-level code"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:141
msgid ""
"For raw pointers that are oftentimes used when operating with C code, "
"additional information could be given to the compiler about the set of "
"parameters. You could for example mirror C's restrict keyword or even be "
"more explicit by stating which pointer arguments may overlap:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:154
msgid ""
"This would tell the compiler or some static analysis tool that the pointers "
"`in_a` and `in_b` might overlap but `out` is non overlapping. Note that "
"neither `overlaps_with` and `restrict` are part of this proposal; rather, "
"they are examples of what this RFC facilities."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:159
msgid "Handling of unused parameter"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:161
msgid ""
"In today's Rust it is possible to prefix the name of an identifier to "
"silence the compiler about it being unused. With attributes on formal "
"parameters, we could hypothetically have an attribute like `#[unused]` that "
"explicitly states this for a given parameter. Note that `#[unused]` is not "
"part of this proposal but merely a simple use-case. In other words, we could "
"write (1):"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:171
msgid "instead of (2):"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:177
msgid ""
"Especially Rust beginners might find the meaning of (1) to be clearer than "
"(2)."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:179
msgid "Guide-level explanation"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:182
msgid ""
"Formal parameters of `fn` definitions as well closures parameters may have "
"attributes attached to them. Thereby, additional information may be provided."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:185
msgid ""
"For the purposes of illustration, let's assume we have the attributes "
"`#[orange]` and `#[lemon]` available to us."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:188
msgid "Basic examples"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:190
msgid ""
"The syntax for attaching attributes to parameters is shown in the snippet "
"below:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:193
msgid "// Free functions:\n"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:196
msgid ""
"// In inherent implementations.\n"
"    // - `self` can also be attributed:\n"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:205
msgid "// Also works in trait implementations.\n"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:214
msgid "// Closures:\n"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:220
msgid "Trait definitions"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:222
msgid ""
"An `fn` definition doesn't need to have a body to permit parameter "
"attributes. Thus, in `trait` definitions, we may write:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:233
msgid ""
"In Rust 2015, since anonymous parameters are allowed, you may also write:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:237
msgid "// <-- Note the absence of `x`!\n"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:241
msgid "`fn` types"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:243
msgid ""
"You can also use attributes in function pointer types. For example, you may "
"write:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:251
#: src/2565-formal-function-parameter-attributes.md:448
msgid "Built-in attributes"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:253
msgid ""
"Attributes attached to formal parameters do not have an inherent meaning in "
"the type system or in the language. Instead, the meaning is what your "
"procedural macros, the tools you use, or what the compiler interprets "
"certain specific attributes as."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:258
msgid ""
"As for the built-in attributes and their semantics, we will, for the time "
"being, only permit the following attributes on parameters:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:261
msgid ""
"Lint check attributes, that is: `#[allow(C)]`, `#[warn(C)]`, `#[deny(C)]`, "
"`#[forbid(C)]`, and tool lint attributes such as `#[allow(clippy::foobar)]`."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:265
msgid "Conditional compilation attributes:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:267
msgid "`#[cfg_attr(...)]`, e.g."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:273
#: src/2565-formal-function-parameter-attributes.md:291
msgid "If `bar` is active, this is equivalent to:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:279
#: src/2565-formal-function-parameter-attributes.md:297
msgid "And otherwise equivalent to:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:285
msgid "`#[cfg(...)]`, e.g."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:303
msgid ""
"All other built-in attributes will be rejected with a semantic check. For "
"example, you may not write:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:310
msgid "Reference-level explanation"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:313
msgid "Grammar"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:315
msgid "Let `OuterAttr` denote the production for an attribute `#[...]`."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:317
msgid ""
"On the formal parameters of an `fn` item, including on method receivers, and "
"irrespective of whether the `fn` has a body or not, `OuterAttr+` is allowed "
"but not required. For example, all the following are valid:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:341
msgid ""
"The attributes here apply to the parameter _as a whole_, e.g. in `g2`, "
"`#[attr]` applies to `pat: Type` as opposed to `pat`."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:344
msgid ""
"More generally, an `fn` item contains a list of formal parameters separated "
"or terminated by `,` and delimited by `(` and `)`. Each parameter in that "
"list may optionally be prefixed by `OuterAttr+`."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:348
msgid "Variadics"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:350
msgid "Attributes may also be attached to `...` on variadic functions, e.g."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:353
msgid "\"C\""
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:358
msgid ""
"That is, for the purposes of this RFC, `...` is considered as a parameter."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:360
msgid "Anonymous parameters in Rust 2015"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:362
msgid "In Rust 2015 edition, as `fn`s may have anonymous parameters, e.g."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:368
msgid "attributes are allowed on those, e.g."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:374
msgid "`fn` pointers"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:378
msgid ""
"Assuming roughly the following type grammar for function pointers (in the "
"[lykenware/gll](https://github.com/lykenware/gll/) notation):"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:385
msgid "\"unsafe\""
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:385
msgid "\"extern\""
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:386
msgid "\"fn\" \"(\""
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:386
msgid "\",\""
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:386
msgid "\")\""
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:386
#: src/2565-formal-function-parameter-attributes.md:425
msgid "\"->\""
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:393
msgid "\",\" \",\" \"...\""
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:396
#: src/2565-formal-function-parameter-attributes.md:403
msgid "\"...\""
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:397
#: src/2565-formal-function-parameter-attributes.md:409
#: src/2565-formal-function-parameter-attributes.md:429
#: src/2565-formal-function-parameter-attributes.md:435
msgid "\":\""
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:400
msgid "we change `VaradicTail` to:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:406
msgid "and change `FnSigInput` to:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:412
msgid ""
"Similar to parameters in `fn` items, the attributes here also apply to the "
"pattern and the type if both are present, i.e. `pat: ty` as opposed to `pat`."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:415
msgid "Closures"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:417
msgid "Given roughly the following expression grammar for closures:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:424
msgid "\"move\""
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:425
msgid "\"|\""
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:425
msgid "\",\" \",\""
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:432
msgid "we change `ClosureArg` into:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:438
msgid ""
"As before, when the type is specified, `OuterAttr*` applies to `pat: Type` "
"as opposed to just `pat`."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:441
msgid "Static semantics"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:443
msgid ""
"Attributes on formal parameters of functions, closures and function pointers "
"have no inherent meaning in the type system or elsewhere. Semantics, if "
"there are any, are given by the attributes themselves on a case by case "
"basis or by tools external to a Rust compiler."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:450
msgid "The built-in attributes that are permitted on the parameters are:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:452
msgid "lint check attributes including tool lint attributes."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:454
msgid "`cfg_attr(..)` unconditionally."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:456
msgid "`cfg(..)` unconditionally."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:458
msgid ""
"When a `cfg(..)` is active, the formal parameter will be included whereas if "
"it is inactive, the formal parameter will be excluded."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:461
msgid ""
"All other built-in attributes are for the time being rejected with a "
"_semantic_ check resulting in a compilation error."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:464
msgid "Macro attributes"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:466
msgid ""
"Finally, a registered `#[proc_macro_attribute]` may not be attached directly "
"to a formal parameter. For example, if given:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:474
msgid "then it is not legal to write:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:480
msgid "Dynamic semantics"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:482
msgid "No changes."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:484
msgid "Drawbacks"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:487
msgid ""
"All drawbacks for attributes in any location also count for this proposal."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:489
msgid ""
"Having attributes in many different places of the language complicates its "
"grammar."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:491
msgid "Rationale and alternatives"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:494
msgid ""
"Why is this proposal considered the best in the space of available ideas?"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:496
msgid ""
"This proposal goes the path of having attributes in more places of the "
"language. It nicely plays together with the advance of procedural macros and "
"macros 2.0 where users can define their own attributes for their special "
"purposes."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:500
msgid "Alternatives"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:502
msgid ""
"An alternative to having attributes for formal parameters might be to just "
"use the current set of available attributable items to store meta "
"information about formal parameters like in the following example:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:511
msgid ""
"An example of this is `#[rustc_args_required_const]` as discussed in the "
"[motivation](#motivation)."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:514
msgid ""
"Note that this does not work in all situations (for example closures) and "
"might involve even more complexity in user's code than simply allowing "
"attributes on formal function parameters."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:518
msgid "Impact"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:520
msgid ""
"The impact will be that users might create custom attributes when designing "
"procedural macros involving formal function parameters."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:523
msgid "There should be no breakage of existing code."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:525
msgid "Variadics and `fn` pointers"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:527
msgid ""
"In this proposal it is legal to write `#[attr] ...` as well as `fn(#[attr] "
"u8)`. The primary justification for doing so is that conditional compilation "
"with `#[cfg(..)]` is facilitated. Moreover, since the `fn` type grammar and "
"that of `fn` items is somewhat shared, and since `...` is the tail of a "
"list, allowing attributes there makes for a simpler grammar."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:533
msgid "Prior art"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:536
msgid ""
"Some example languages that allow for attributes on formal function "
"parameter positions are Java, C#, and C++."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:539
msgid ""
"Also note that attributes in other parts of the Rust language could be "
"considered prior art to this proposal."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:542
msgid "Unresolved questions"
msgstr "未解決的問題"

#: src/2565-formal-function-parameter-attributes.md:545
msgid "None as of yet."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:547
msgid "Future possibilities"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:549
msgid "Attributes in more places"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:553
msgid ""
"In the pursuit of allowing more flexible DSLs and more ergonomic conditional "
"compilation, [RFC 2602](https://github.com/rust-lang/rfcs/pull/2602) builds "
"upon this RFC."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:556
msgid "Documentation comments"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:558
msgid ""
"In this RFC, we have not allowed documentation comments on parameters. For "
"example, you may not write:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:563
msgid "/// Some description about `bar`.\n"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:570
msgid "Neither may you write the desugared form:"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:581
msgid ""
"In the future, we may want to consider supporting this form of "
"documentation. This will require support in `rustdoc` to actually display "
"the information."
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:584
msgid "`#[proc_macro_attribute]`"
msgstr ""

#: src/2565-formal-function-parameter-attributes.md:586
msgid ""
"In this RFC we stated that `fn foo(#[attr] x: u8) { .. }`, where `#[attr]` "
"is a `#[proc_macro_attribute]` is not allowed. In the future, if use cases "
"arise to justify a change,  we could lift this restriction such that "
"transformations can be done directly on `x: u8`."
msgstr ""
