msgid ""
msgstr ""
"Project-Id-Version: The Rust RFC Book\n"
"POT-Creation-Date: 2025-12-01T05:53:05Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"Language: zh_TW\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/3373-avoid-nonlocal-definitions-in-fns.md:1
msgid "Feature Name: N/A"
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:2
msgid "Start Date: 2022-01-19"
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:3
msgid ""
"RFC PR: [rust-lang/rfcs#3373](https://github.com/rust-lang/rfcs/pull/3373)"
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:4
msgid ""
"Tracking Issue: [rust-lang/rust#120363](https://github.com/rust-lang/rust/"
"issues/120363)"
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:6
msgid "Summary"
msgstr "摘要"

#: src/3373-avoid-nonlocal-definitions-in-fns.md:9
msgid ""
"Add a warn-by-default lint for items inside functions or expressions that "
"implement methods or traits that are visible outside the function or "
"expression. Consider ramping that lint to deny-by-default for Rust 2024, and "
"evaluating a hard error for 2027."
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:14
msgid "Motivation"
msgstr "動機"

#: src/3373-avoid-nonlocal-definitions-in-fns.md:17
msgid ""
"Currently, tools cross-referencing uses and definitions (such as IDEs) must "
"either search inside all function bodies and other expression-containing "
"items to find potential definitions corresponding to uses within another "
"function, or not cross-reference those definitions at all."
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:22
msgid ""
"Humans cross-referencing such uses and definitions may find themselves "
"similarly baffled."
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:25
msgid ""
"This change helps humans limit the scope of their search and avoid looking "
"for definitions inside other functions or items, without missing any "
"relevant definitions. If in the future we manage to forbid it entirely "
"within a subsequent Rust edtion, tools will be able to rely on this as well."
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:30
msgid "Explanation"
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:33
msgid ""
"The following types of items, \"expression-containing items\", can contain "
"expressions, including the definitions of other items:"
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:35
msgid "Functions"
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:36
msgid "Closures"
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:37
msgid "The values assigned to `static` items or non-anonymous `const` items."
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:38
msgid "The discriminant values assigned to `enum` variants"
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:40
msgid "Rust will emit a warn-by-default lint for all of the following cases:"
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:41
msgid ""
"An item nested inside an expression-containing item (through any level of "
"nesting) may not define an `impl Type` block unless the `Type` is also "
"nested inside the same expression-containing item."
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:44
msgid ""
"An item nested inside an expression-containing item (through any level of "
"nesting) may not define an `impl Trait for Type` unless either the `Trait` "
"or the `Type` is also nested inside the same expression-containing item."
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:47
msgid ""
"An item nested inside an expression-containing item (through any level of "
"nesting) may not define an exported macro visible outside the expression-"
"containing item (e.g. using `#[macro_export]`)."
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:51
msgid ""
"In a future edition, we may consider making this lint deny-by-default, or "
"eventually making it a hard error. We'll evaluate the impact on the "
"ecosystem and existing use cases before doing so."
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:55
msgid ""
"The lint is considered to attach to the `impl` token of an `impl` block, or "
"the `macro_rules!` token of a macro definition."
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:58
msgid "Drawbacks"
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:61
msgid ""
"Some existing code makes use of this pattern, and would need to migrate to a "
"different pattern. In particular, this pattern may occur in macro-generated "
"code, or in code generated by tools like rustdoc. Making this change would "
"require such code and tools to restructure to meet this requirement."
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:66
msgid "Prior art"
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:69
msgid ""
"Other aspects of Rust's design attempt to enable local reasoning and avoid "
"global reasoning, including non-inference of function signatures, and not "
"having the function body affect non-opaque properties of `impl Trait` uses "
"in the signature without reflecting those properties in the signature."
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:74
msgid "Unresolved questions"
msgstr "未解決的問題"

#: src/3373-avoid-nonlocal-definitions-in-fns.md:77
msgid ""
"We'll need a crater run to look at how widespread this pattern is in "
"existing code."
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:80
msgid ""
"Should we flag these definitions in anonymous `const` items as well, or "
"would that produce unwanted warnings?"
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:83
msgid "Future possibilities"
msgstr ""

#: src/3373-avoid-nonlocal-definitions-in-fns.md:86
msgid ""
"If in the future Rust provides a \"standalone `derive`\" mechanism (e.g. "
"`derive Trait for Type` as a standalone definition separate from `Type`), "
"the `impl` produced by that mechanism would be subject to the same "
"requirements."
msgstr ""
