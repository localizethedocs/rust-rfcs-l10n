msgid ""
msgstr ""
"Project-Id-Version: The Rust RFC Book\n"
"POT-Creation-Date: 2025-12-22T09:04:45Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"Language: zh_TW\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/3391-result_ffi_guarantees.md:1
msgid "RFC: result_ffi_guarantees"
msgstr ""

#: src/3391-result_ffi_guarantees.md:3
msgid "Feature Name: `result_ffi_guarantees`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:4
msgid "Start Date: 2023-02-15"
msgstr ""

#: src/3391-result_ffi_guarantees.md:5
msgid ""
"RFC PR: [rust-lang/rfcs#3391](https://github.com/rust-lang/rfcs/pull/3391)"
msgstr ""

#: src/3391-result_ffi_guarantees.md:6
msgid ""
"Rust Issue: [rust-lang/rust#110503](https://github.com/rust-lang/rust/"
"issues/110503)"
msgstr ""

#: src/3391-result_ffi_guarantees.md:8
msgid "Summary"
msgstr "摘要"

#: src/3391-result_ffi_guarantees.md:11
msgid ""
"This RFC gives specific layout and ABI guarantees when wrapping \"non-zero\" "
"data types from `core` in `Option` or `Result`. This allows those data types "
"to be used directly in FFI, in place of the primitive form of the data (eg: "
"`Result<(), NonZeroI32>` instead of `i32`)."
msgstr ""

#: src/3391-result_ffi_guarantees.md:13
msgid "Motivation"
msgstr "動機"

#: src/3391-result_ffi_guarantees.md:16
msgid ""
"Rust often needs to interact with foreign code. However, foreign function "
"type signatures don't normally support any of Rust's rich type system. "
"Particular function inputs and outputs will simply use 0 (or null) as a "
"sentinel value and the programmer has to remember when that's happening."
msgstr ""

#: src/3391-result_ffi_guarantees.md:18
msgid ""
"Though it's common for \"raw bindings\" crates to also have \"high level "
"wrapper\" crates that go with them (eg: `windows-sys`/`windows`, or `sdl2-"
"sys`/`sdl2`, etc), someone still has to write those wrapper crates which use "
"the foreign functions directly. Allowing Rust programmers to use more "
"detailed types with foreign functions makes their work easier."
msgstr ""

#: src/3391-result_ffi_guarantees.md:20
msgid "Guide-level explanation"
msgstr ""

#: src/3391-result_ffi_guarantees.md:23
msgid ""
"I'm not sure how to write a \"guide\" portion of this that's any simpler "
"than the \"reference\" portion, which is already quite short."
msgstr ""

#: src/3391-result_ffi_guarantees.md:25
msgid "Reference-level explanation"
msgstr ""

#: src/3391-result_ffi_guarantees.md:28
msgid "When either of these two `core` types:"
msgstr ""

#: src/3391-result_ffi_guarantees.md:30
msgid "`Option<T>`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:31
msgid ""
"`Result<T, E>` where either `T` or `E` meet all of the following conditions:"
msgstr ""

#: src/3391-result_ffi_guarantees.md:32
msgid "Is a zero-sized type with alignment 1 (a \"1-ZST\")."
msgstr ""

#: src/3391-result_ffi_guarantees.md:33
msgid "Has no fields."
msgstr ""

#: src/3391-result_ffi_guarantees.md:34
msgid "Does not have the `#[non_exhaustive]` attribute."
msgstr ""

#: src/3391-result_ffi_guarantees.md:36
msgid ""
"Is combined with a non-zero or non-null type (see the chart), the "
"combination has the same layout (size and alignment) and the same ABI as the "
"primitive form of the data."
msgstr ""

#: src/3391-result_ffi_guarantees.md:38
msgid "Example combined Type"
msgstr ""

#: src/3391-result_ffi_guarantees.md:38
msgid "Primitive Type"
msgstr ""

#: src/3391-result_ffi_guarantees.md:40
msgid "`Result<NonNull<T>, ()>`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:40
msgid "`*mut T`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:41
msgid "`Result<&T, ()>`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:41
msgid "`&T`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:42
msgid "`Result<&mut T, ()>`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:42
msgid "`&mut T`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:43
msgid "`Result<fn(), ()>`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:43
msgid "`fn()`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:44
msgid "`Result<NonZeroI8, ()>`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:44
msgid "`i8`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:45
msgid "`Result<NonZeroI16, ()>`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:45
msgid "`i16`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:46
msgid "`Result<NonZeroI32, ()>`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:46
msgid "`i32`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:47
msgid "`Result<NonZeroI64, ()>`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:47
msgid "`i64`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:48
msgid "`Result<NonZeroI128, ()>`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:48
msgid "`i128`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:49
msgid "`Result<NonZeroIsize, ()>`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:49
msgid "`isize`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:50
msgid "`Result<NonZeroU8, ()>`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:50
msgid "`u8`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:51
msgid "`Result<NonZeroU16, ()>`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:51
msgid "`u16`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:52
msgid "`Result<NonZeroU32, ()>`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:52
msgid "`u32`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:53
msgid "`Result<NonZeroU64, ()>`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:53
msgid "`u64`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:54
msgid "`Result<NonZeroU128, ()>`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:54
msgid "`u128`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:55
msgid "`Result<NonZeroUsize, ()>`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:55
msgid "`usize`"
msgstr ""

#: src/3391-result_ffi_guarantees.md:57
msgid ""
"While `fn()` is listed just once in the above table, this rule applies to "
"all `fn` types (regardless of ABI, arguments, and return type)."
msgstr ""

#: src/3391-result_ffi_guarantees.md:59
msgid ""
"For simplicity the table listing only uses `Result<_, ()>`, but swapping the "
"`T` and `E` types, or using `Option<T>`, is also valid. What changes are the "
"implied semantics:"
msgstr ""

#: src/3391-result_ffi_guarantees.md:61
msgid "`Result<NonZeroI32, ()>` is \"a non-zero success value\""
msgstr ""

#: src/3391-result_ffi_guarantees.md:62
msgid "`Result<(), NonZeroI32>` is \"a non-zero error value\""
msgstr ""

#: src/3391-result_ffi_guarantees.md:63
msgid "`Option<NonZeroI32>` is \"a non-zero value is present\""
msgstr ""

#: src/3391-result_ffi_guarantees.md:64
msgid "they all pass over FFI as if they were an `i32`."
msgstr ""

#: src/3391-result_ffi_guarantees.md:66
msgid ""
"Which type you should use with a particular FFI function signature still "
"depends on the function. Rust can't solve that part for you. However, once "
"you've decided on the type you want to use, the compiler's normal type "
"checks can guide you everywhere else in the code."
msgstr ""

#: src/3391-result_ffi_guarantees.md:70
msgid "Drawbacks"
msgstr ""

#: src/3391-result_ffi_guarantees.md:73
msgid ""
"The compiler has less flexibility with respect to discriminant computation "
"and pattern matching optimizations when a type is niche-optimized."
msgstr ""

#: src/3391-result_ffi_guarantees.md:75
msgid "Rationale and alternatives"
msgstr ""

#: src/3391-result_ffi_guarantees.md:78
msgid ""
"It's always possible to _not_ strengthen the guarantees of the language."
msgstr ""

#: src/3391-result_ffi_guarantees.md:80
msgid "Prior art"
msgstr ""

#: src/3391-result_ffi_guarantees.md:83
msgid ""
"The compiler already supports `Option` being combined with specific non-zero "
"types, this RFC mostly expands the list of guaranteed support."
msgstr ""

#: src/3391-result_ffi_guarantees.md:85
msgid "Unresolved questions"
msgstr "未解決的問題"

#: src/3391-result_ffi_guarantees.md:88
msgid "None at this time."
msgstr ""

#: src/3391-result_ffi_guarantees.md:90
msgid "Future possibilities"
msgstr ""

#: src/3391-result_ffi_guarantees.md:93
msgid ""
"This could be expanded to include [ControlFlow](https://doc.rust-lang.org/"
"nightly/core/ops/enum.ControlFlow.html) and [Poll](https://doc.rust-lang.org/"
"nightly/core/task/enum.Poll.html)."
msgstr ""

#: src/3391-result_ffi_guarantees.md:94
msgid ""
"This could be extended to _all_ similar enums in the future. However, "
"without a way to opt-in to the special layout and ABI guarantees (eg: a "
"trait or attribute) it becomes yet another semver hazard for library "
"authors. The RFC is deliberately limited in scope to avoid bikesheding."
msgstr ""
