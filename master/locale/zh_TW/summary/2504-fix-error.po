msgid ""
msgstr ""
"Project-Id-Version: The Rust RFC Book\n"
"POT-Creation-Date: 2025-12-01T05:53:04Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"Language: zh_TW\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/2504-fix-error.md:1
msgid "Feature Name: `fix_error`"
msgstr ""

#: src/2504-fix-error.md:2
msgid "Start Date: 2018-07-18"
msgstr ""

#: src/2504-fix-error.md:3
msgid ""
"RFC PR: [rust-lang/rfcs#2504](https://github.com/rust-lang/rfcs/pull/2504)"
msgstr ""

#: src/2504-fix-error.md:4
msgid ""
"Rust Issue: [rust-lang/rust#53487](https://github.com/rust-lang/rust/"
"issues/53487)"
msgstr ""

#: src/2504-fix-error.md:6
msgid "Summary"
msgstr "摘要"

#: src/2504-fix-error.md:9
msgid ""
"Change the `std::error::Error` trait to improve its usability. Introduce a "
"backtrace module to the standard library to provide a standard interface for "
"backtraces."
msgstr ""

#: src/2504-fix-error.md:13
msgid "Motivation"
msgstr "動機"

#: src/2504-fix-error.md:16
msgid ""
"The `Error` trait has long been known to be flawed in several respects. In "
"particular:"
msgstr ""

#: src/2504-fix-error.md:19
msgid ""
"The required `description` method is limited, usually, to returning static "
"strings, and has little utility that isn't adequately served by the required "
"`Display` impl for the error type."
msgstr ""

#: src/2504-fix-error.md:22
msgid ""
"The signature of the `cause` method does not allow the user to downcast the "
"cause type, limiting the utility of that method unnecessarily."
msgstr ""

#: src/2504-fix-error.md:24
msgid ""
"It provides no standard API for errors that contain backtraces (as some "
"users' errors do) to expose their backtraces to end users."
msgstr ""

#: src/2504-fix-error.md:27
msgid ""
"We propose to fix this by deprecating the existing methods of `Error` and "
"adding two new, provided methods. As a result, the undeprecated portion of "
"the `Error` trait would look like this:"
msgstr ""

#: src/2504-fix-error.md:43
msgid "Guide-level explanation"
msgstr ""

#: src/2504-fix-error.md:46
msgid "The new API of the Error trait"
msgstr ""

#: src/2504-fix-error.md:48
msgid "The new API provides three main components:"
msgstr ""

#: src/2504-fix-error.md:50
msgid ""
"The Display and Debug impls, for printing error messages. Ideally, the "
"Display API would be focused on _end user_ messages, whereas the Debug impl "
"would contain information relevant to the programmer."
msgstr ""

#: src/2504-fix-error.md:53
msgid ""
"The backtrace method. If the Error contains a backtrace, it should be "
"exposed through this method. Errors are not required to contain a backtrace, "
"and are not expected to."
msgstr ""

#: src/2504-fix-error.md:56
msgid ""
"The `source` method. This returns another Error type, which is the "
"underlying source of this error. If this error has no underlying source "
"(that is, it is the \"root source\" of the error), this method should return "
"none."
msgstr ""

#: src/2504-fix-error.md:60
msgid "The backtrace API"
msgstr ""

#: src/2504-fix-error.md:62
msgid ""
"This RFC adds a new `backtrace` module to std, with one type, with this API:"
msgstr ""

#: src/2504-fix-error.md:66 src/2504-fix-error.md:75 src/2504-fix-error.md:83
#: src/2504-fix-error.md:87 src/2504-fix-error.md:92 src/2504-fix-error.md:96
msgid "// ...\n"
msgstr ""

#: src/2504-fix-error.md:70
msgid ""
"// Capture the backtrace for the current stack if it is supported on this\n"
"    // platform.\n"
"    //\n"
"    // This will respect backtrace controlling environment variables.\n"
msgstr ""

#: src/2504-fix-error.md:78
msgid ""
"// Capture the backtrace for the current stack if it is supported on this\n"
"    // platform.\n"
"    //\n"
"    // This will ignore backtrace controlling environment variables.\n"
msgstr ""

#: src/2504-fix-error.md:107
msgid ""
"This minimal initial API is just intended for printing backtraces for end "
"users. In time, this may grow the ability to visit individual frames of the "
"backtrace."
msgstr ""

#: src/2504-fix-error.md:110
msgid "Backtrace controlling environment variables"
msgstr ""

#: src/2504-fix-error.md:112
msgid ""
"Today, the `RUST_BACKTRACE` controls backtraces generated by panics. After "
"this RFC, it also controls backtraces generated in the standard library: no "
"backtrace will be generated when calling `Backtrace::capture` unless this "
"variable is set. On the other hand, `Backtrace::force_capture` will ignore "
"this variable."
msgstr ""

#: src/2504-fix-error.md:117
msgid ""
"Two additional variables will be added: `RUST_PANIC_BACKTRACE` and "
"`RUST_LIB_BACKTRACE`: these will independently override the behavior of "
"`RUST_BACKTRACE` for backtraces generated for panics and from the std API."
msgstr ""

#: src/2504-fix-error.md:121
msgid "The transition plan"
msgstr ""

#: src/2504-fix-error.md:123
msgid ""
"Deprecating both `cause` and `description` is a backward compatible change, "
"and adding provided methods `backtrace` and `source` is also backward "
"compatible. We can make these changes unceremoniously, and the `Error` trait "
"will be much more functional."
msgstr ""

#: src/2504-fix-error.md:128
msgid ""
"We also change the default definition of `cause`, even though it is "
"deprecated:"
msgstr ""

#: src/2504-fix-error.md:136
msgid ""
"This way, if an error defines `source`, someone calling the deprecated "
"`cause` API will still get the correct cause type, even though they can't "
"downcast it."
msgstr ""

#: src/2504-fix-error.md:139
msgid "Stability"
msgstr ""

#: src/2504-fix-error.md:141
msgid ""
"The addition of `source` and the deprecation of `cause` will be instantly "
"stabilized after implementing this RFC."
msgstr ""

#: src/2504-fix-error.md:144
msgid ""
"The addition of the backtrace method and the entire backtrace API will be "
"left unstable under the `backtrace` feature for now."
msgstr ""

#: src/2504-fix-error.md:147
msgid "Reference-level explanation"
msgstr ""

#: src/2504-fix-error.md:150
msgid "Why `cause` -> `source`"
msgstr ""

#: src/2504-fix-error.md:152
msgid ""
"The problem with the existing `cause` API is that the error it returns is "
"not `'static`. This means it is not possible to downcast the error trait "
"object, because downcasting can only be done on `'static` trait objects (for "
"soundness reasons)."
msgstr ""

#: src/2504-fix-error.md:157
msgid "Note on backtraces"
msgstr ""

#: src/2504-fix-error.md:159
msgid ""
"The behavior of backtraces is somewhat platform specific, and on certain "
"platforms backtraces may contain strange and inaccurate information. The "
"backtraces provided by the standard library are designed for user display "
"purposes only, and not guaranteed to provide a perfect representation of the "
"program state, depending on the capabilities of the platform."
msgstr ""

#: src/2504-fix-error.md:165
msgid "How this impacts failure"
msgstr ""

#: src/2504-fix-error.md:167
msgid ""
"The failure crate defines a `Fail` trait with an API similar to (but not "
"exactly like) the API proposed here. In a breaking change to failure, we "
"would change that trait to be an extension trait to `Error`:"
msgstr ""

#: src/2504-fix-error.md:172
msgid "// Maybe rename to ErrorExt?\n"
msgstr ""

#: src/2504-fix-error.md:174
msgid "// various provided helper methods\n"
msgstr ""

#: src/2504-fix-error.md:182
msgid ""
"Instead of providing a derive for Fail, failure would provide a derive for "
"the std library Error trait, e.g.:"
msgstr ""

#: src/2504-fix-error.md:187
msgid "\"My display message.\""
msgstr ""

#: src/2504-fix-error.md:195
msgid ""
"The exact nature of the new failure API would be determined by the "
"maintainers of failure, it would not be proscribed by this RFC. This section "
"is just to demonstrate that failure could still work using the std Error "
"trait."
msgstr ""

#: src/2504-fix-error.md:199
msgid "Drawbacks"
msgstr ""

#: src/2504-fix-error.md:202
msgid ""
"This causes some churn, as users who are already using one of the deprecated "
"methods will be encouraged (by warnings) to change their code, and library "
"authors will need to revisit whether they should override one of the new "
"methods."
msgstr ""

#: src/2504-fix-error.md:207
msgid "Rationale and alternatives"
msgstr ""

#: src/2504-fix-error.md:210
msgid "Provide a new error trait"
msgstr ""

#: src/2504-fix-error.md:212
msgid ""
"The most obvious alternative to this RFC would be to provide an entirely new "
"error trait. This could make deeper changes to the API of the trait than we "
"are making here. For example, we could take an approach like `failure` has, "
"and impose stricter bounds on all implementations of the trait:"
msgstr ""

#: src/2504-fix-error.md:229
msgid ""
"Doing this would allow us to assemble a more perfect error trait, rather "
"than limiting us to the changes we can make backwards compatibly to the "
"existing trait."
msgstr ""

#: src/2504-fix-error.md:233
msgid ""
"However, it would be much more disruptive to the ecosystem than changing the "
"existing trait. We've already seen some friction with failure and other APIs "
"(like serde's) that expect to receive something that implements `Error`. "
"Right now, we reason that the churn is not worth slight improvements that "
"wouldn't be compatible with the Error trait as it exists."
msgstr ""

#: src/2504-fix-error.md:239
msgid ""
"In the future, if these changes are not enough to resolve the warts with the "
"Error trait, we could follow this alternative: we would deprecate the Error "
"trait and introduce a new trait then. That is, accepting this RFC now does "
"not foreclose on this alternative later."
msgstr ""

#: src/2504-fix-error.md:244
msgid "Bikeshedding the name of `source`"
msgstr ""

#: src/2504-fix-error.md:246
msgid ""
"The replacement for `cause` could have another name. The only one the RFC "
"author came up with is `origin`."
msgstr ""

#: src/2504-fix-error.md:249
msgid "Prior art"
msgstr ""

#: src/2504-fix-error.md:252
msgid ""
"This proposal is largely informed by our experience with the existing Error "
"trait API, and from the experience of the `failure` experiment. The main "
"conclusions we drew:"
msgstr ""

#: src/2504-fix-error.md:256
msgid "The current Error trait has serious flaws."
msgstr ""

#: src/2504-fix-error.md:257
msgid "The `Fail` trait in failure has a better API."
msgstr ""

#: src/2504-fix-error.md:258
msgid ""
"Having multiple error traits in the ecosystem (e.g. both `Error` and `Fail`) "
"can be very disruptive."
msgstr ""

#: src/2504-fix-error.md:261
msgid ""
"This RFC threads the needle between the problem with the Error trait and the "
"problems caused by defining a new trait."
msgstr ""

#: src/2504-fix-error.md:264
msgid "Unresolved questions"
msgstr "未解決的問題"

#: src/2504-fix-error.md:267
msgid "Backtrace API"
msgstr ""

#: src/2504-fix-error.md:269
msgid ""
"This RFC intentionally proposes a most minimal API. There are a number of "
"API extensions we could consider in the future. Prominent examples:"
msgstr ""

#: src/2504-fix-error.md:272
msgid ""
"Extending the backtrace API to allow programmatic iteration of backtrace "
"frames and so on."
msgstr ""

#: src/2504-fix-error.md:274
msgid ""
"Providing derives for traits like `Display` and `Error` in the standard "
"library."
msgstr ""

#: src/2504-fix-error.md:276
msgid ""
"Providing helper methods on `Error` that have been experimented with in "
"failure, such as the causes iterator."
msgstr ""

#: src/2504-fix-error.md:279
msgid ""
"None of these are proposed as a part of _this_ RFC, and would have a future "
"RFC discussion."
msgstr ""

#: src/2504-fix-error.md:282
msgid ""
"Additionally, the choice to implement nullability internal to backtrace may "
"prove to be a mistake: during the period when backtrace APIs are only "
"available on nightly, we will gain more experience and possible change "
"backtrace's constructors to return an `Option<Backtrace>` instead."
msgstr ""
