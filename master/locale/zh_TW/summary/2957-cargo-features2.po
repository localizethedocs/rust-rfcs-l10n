msgid ""
msgstr ""
"Project-Id-Version: The Rust RFC Book\n"
"POT-Creation-Date: 2025-12-22T09:04:45Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"Language: zh_TW\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/2957-cargo-features2.md:1
msgid "Feature Name: `cargo-features2`"
msgstr ""

#: src/2957-cargo-features2.md:2
msgid "Start Date: 2020-05-09"
msgstr ""

#: src/2957-cargo-features2.md:3
msgid ""
"RFC PR: [rust-lang/rfcs#2957](https://github.com/rust-lang/rfcs/pull/2957)"
msgstr ""

#: src/2957-cargo-features2.md:4
msgid ""
"Cargo Issue: [rust-lang/cargo#8088](https://github.com/rust-lang/cargo/"
"issues/8088)"
msgstr ""

#: src/2957-cargo-features2.md:6
msgid "Summary"
msgstr "摘要"

#: src/2957-cargo-features2.md:8
msgid ""
"This RFC is to gather final feedback on stabilizing the new feature resolver "
"in Cargo. This new feature resolver introduces a new algorithm for computing "
"[package features](https://doc.rust-lang.org/nightly/cargo/reference/"
"features.html) that helps to avoid some unwanted unification that happens in "
"the current resolver. This also includes some changes in how features are "
"enabled on the command-line."
msgstr ""

#: src/2957-cargo-features2.md:14
msgid ""
"These changes have already been implemented and are available on the nightly "
"channel as an unstable feature. See the [unstable feature docs](https://doc."
"rust-lang.org/nightly/cargo/reference/unstable.html#features) for "
"information on how to test out the new resolver, and the [unstable package "
"flags](https://doc.rust-lang.org/nightly/cargo/reference/unstable."
"html#package-features) for information on the new flag behavior."
msgstr ""

#: src/2957-cargo-features2.md:19
msgid ""
"_Note_: The new feature resolver does not address all of the enhancement "
"requests for feature resolution. Some of these are listed below in the "
"[Feature resolver enhancements](#feature-resolver-enhancements) section. "
"These are explicitly deferred for future work."
msgstr ""

#: src/2957-cargo-features2.md:28
msgid "Motivation"
msgstr "動機"

#: src/2957-cargo-features2.md:30
msgid "Feature unification"
msgstr ""

#: src/2957-cargo-features2.md:32
msgid ""
"Currently, when features are computed for a package, Cargo takes the union "
"of all requested features in all situations for that package. This is "
"relatively easy to understand, and ensures that packages are only built once "
"during a single build. However, this has problems when features introduce "
"unwanted behavior, dependencies, or other requirements. The following three "
"situations illustrate some of the unwanted feature unification that the new "
"resolver aims to solve:"
msgstr ""

#: src/2957-cargo-features2.md:40
msgid ""
"Unused targets: If a dependency shows up multiple times in the resolve "
"graph, and one of those situations is a target-specific dependency, the "
"features of the target-specific dependency are enabled on all platforms. See "
"[target dependencies](#target-dependencies) below for how this problem is "
"solved."
msgstr ""

#: src/2957-cargo-features2.md:46
msgid ""
"Dev-dependencies: If a dependency is shared as a normal dependency and a dev-"
"dependency, then any features enabled on the dev-dependency will also show "
"up when used as a normal dependency. This only applies to workspace "
"packages; dev-dependencies in packages on registries like [crates.io]"
"(https://crates.io/) have always been ignored. `cargo install` has also "
"always ignored dev-dependencies. See [dev-dependencies](#dev-dependencies) "
"below for how this problem is solved."
msgstr ""

#: src/2957-cargo-features2.md:54
msgid ""
"Host-dependencies: Similarly to dev-dependencies, if a build-dependency or "
"proc-macro has a shared dependency with a normal dependency, then the "
"features are unified with the normal dependency. See [host dependencies]"
"(#host-dependencies) below for how this problem is solved."
msgstr ""

#: src/2957-cargo-features2.md:61
msgid "Command-line feature selection"
msgstr ""

#: src/2957-cargo-features2.md:63
msgid ""
"Cargo has several flags for choosing which features are enabled during a "
"build. `--features` allows enabling individual features, `--all-features` "
"enables all features, and `--no-default-features` ensures the \"default\" "
"feature is not automatically enabled."
msgstr ""

#: src/2957-cargo-features2.md:68
msgid ""
"These are fairly straightforward when used with a single package, but in a "
"workspace the current behavior is limited and confusing. There are several "
"problems in a workspace:"
msgstr ""

#: src/2957-cargo-features2.md:72
msgid ""
"`cargo build -p other_member --features …` — The listed features are for the "
"package in the current directory, even if that package isn't being built! "
"This also makes it difficult or impossible to build multiple packages at "
"once with different features enabled."
msgstr ""

#: src/2957-cargo-features2.md:76
msgid ""
"`--features` and `--no-default-features` flags are not allowed in the root "
"of a virtual workspace."
msgstr ""

#: src/2957-cargo-features2.md:79
msgid ""
"See [New command-line behavior](#new-command-line-behavior) below for how "
"these problems are solved."
msgstr ""

#: src/2957-cargo-features2.md:82
msgid "Guide-level explanation"
msgstr ""

#: src/2957-cargo-features2.md:84
msgid "New resolver behavior"
msgstr ""

#: src/2957-cargo-features2.md:86
msgid ""
"When the new feature resolver is enabled, features are not always unified "
"when a dependency appears multiple times in the dependency graph. The new "
"behaviors are described below."
msgstr ""

#: src/2957-cargo-features2.md:90
msgid ""
"For [target dependencies](#target-dependencies) and [dev-dependencies](#dev-"
"dependencies), the general rule is, if a dependency is not built, it does "
"not affect feature resolution. For [host dependencies](#host-dependencies), "
"the general rule is that packages used for building (like proc-macros) do "
"not affect the packages being built."
msgstr ""

#: src/2957-cargo-features2.md:96
msgid ""
"The following three sections describe the new behavior for three difference "
"situations."
msgstr ""

#: src/2957-cargo-features2.md:99
msgid "Target dependencies"
msgstr ""

#: src/2957-cargo-features2.md:101
msgid ""
"When a package appears multiple times in the build graph, and one of those "
"instances is a target-specific dependency, then the features of the target-"
"specific dependency are only enabled if the target is currently being built. "
"For example:"
msgstr ""

#: src/2957-cargo-features2.md:106
msgid ""
"```toml\n"
"[dependency.common]\n"
"version = \"1.0\"\n"
"features = [\"f1\"]\n"
"\n"
"[target.'cfg(windows)'.dependencies.common]\n"
"version = \"1.0\"\n"
"features = [\"f2\"]\n"
"```"
msgstr ""

#: src/2957-cargo-features2.md:116
msgid ""
"When building this example for a non-Windows platform, the `f2` feature will "
"_not_ be enabled."
msgstr ""

#: src/2957-cargo-features2.md:119
msgid "dev-dependencies"
msgstr ""

#: src/2957-cargo-features2.md:121
msgid ""
"When a package is shared as a normal dependency and a dev-dependency, the "
"dev-dependency features are only enabled if the current build is including "
"dev-dependencies. For example:"
msgstr ""

#: src/2957-cargo-features2.md:125
msgid ""
"```toml\n"
"[dependencies]\n"
"serde = {version = \"1.0\", default-features = false}\n"
"\n"
"[dev-dependencies]\n"
"serde = {version = \"1.0\", features = [\"std\"]}\n"
"```"
msgstr ""

#: src/2957-cargo-features2.md:133
msgid ""
"In this situation, a normal `cargo build` will build `serde` without any "
"features. When built with `cargo test`, Cargo will build `serde` with its "
"default features plus the \"std\" feature."
msgstr ""

#: src/2957-cargo-features2.md:137
msgid ""
"Note that this is a global decision. So a command like `cargo build --all-"
"targets` will include examples and tests, and thus features from dev-"
"dependencies will be enabled."
msgstr ""

#: src/2957-cargo-features2.md:141
msgid "Host dependencies"
msgstr ""

#: src/2957-cargo-features2.md:143
msgid ""
"When a package is shared as a normal dependency and a build-dependency or "
"proc-macro, the features for the normal dependency are kept independent of "
"the build-dependency or proc-macro. For example:"
msgstr ""

#: src/2957-cargo-features2.md:147
msgid ""
"```toml\n"
"[dependencies]\n"
"log = \"0.4\"\n"
"\n"
"[build-dependencies]\n"
"log = {version = \"0.4\", features=['std']}\n"
"```"
msgstr ""

#: src/2957-cargo-features2.md:155
msgid ""
"In this situation, the `log` package will be built with the default features "
"for the normal dependencies. As a build-dependency, it will have the `std` "
"feature enabled. This means that `log` will be built twice, once without "
"`std` and once with `std`."
msgstr ""

#: src/2957-cargo-features2.md:160
msgid ""
"Note that a dependency shared between a build-dependency and proc-macro are "
"still unified. This is intended to help reduce build times, and is expected "
"to be unlikely to cause problems that feature unification usually cause "
"because they are both being built for the host platform, and are only used "
"at build time."
msgstr ""

#: src/2957-cargo-features2.md:166
msgid "Resolver opt-in"
msgstr ""

#: src/2957-cargo-features2.md:168
msgid ""
"Testing has been performed on various projects. Some were found to fail to "
"compile with the new resolver. This is because some dependencies are written "
"to assume that features are enabled from another part of the graph. Because "
"the new resolver results in a backwards-incompatible change in resolver "
"behavior, the user must opt-in to use the new resolver. This can be done "
"with the `resolver` field in `Cargo.toml`:"
msgstr ""

#: src/2957-cargo-features2.md:175
msgid ""
"```toml\n"
"[package]\n"
"name = \"my-package\"\n"
"version = \"1.0.0\"\n"
"resolver = \"2\"\n"
"```"
msgstr ""

#: src/2957-cargo-features2.md:182
msgid ""
"Setting the resolver to `\"2\"` switches Cargo to use the new feature "
"resolver. It also enables backwards-incompatible behavior detailed in [New "
"command-line behavior](#new-command-line-behavior). A value of `\"1\"` uses "
"the previous resolver behavior, which is the default if not specified."
msgstr ""

#: src/2957-cargo-features2.md:187
msgid ""
"The value is a string (instead of an integer) to allow for possible "
"extensions in the future."
msgstr ""

#: src/2957-cargo-features2.md:190
msgid ""
"The `resolver` field is only honored in the top-level package or workspace, "
"it is ignored in dependencies. This is because feature-unification is an "
"inherently global decision."
msgstr ""

#: src/2957-cargo-features2.md:194
msgid ""
"If using a virtual workspace, the root definition should be in the "
"`[workspace]` table like this:"
msgstr ""

#: src/2957-cargo-features2.md:197
msgid ""
"```toml\n"
"[workspace]\n"
"members = [\"member1\", \"member2\"]\n"
"resolver = \"2\"\n"
"```"
msgstr ""

#: src/2957-cargo-features2.md:203
msgid ""
"For packages that encounter a problem due to missing feature declarations, "
"it is backwards-compatible to add the missing features. Adding those missing "
"features should not affect projects using the old resolver."
msgstr ""

#: src/2957-cargo-features2.md:207
msgid ""
"It is intended that `resolver = \"2\"` will likely become the default "
"setting in a future Rust Edition. See [\"Default opt-in\"](#default-opt-in) "
"below for more details."
msgstr ""

#: src/2957-cargo-features2.md:211
msgid "New command-line behavior"
msgstr ""

#: src/2957-cargo-features2.md:213
msgid ""
"The following changes are made to the behavior of selecting features on the "
"command-line."
msgstr ""

#: src/2957-cargo-features2.md:216
msgid ""
"Features listed in the `--features` flag no longer pay attention to the "
"package in the current directory. Instead, it only enables the given "
"features for the selected packages. Additionally, the features are enabled "
"only if the package defines the given features."
msgstr ""

#: src/2957-cargo-features2.md:221
msgid "For example:"
msgstr ""

#: src/2957-cargo-features2.md:225
msgid ""
"In this situation, features \"foo\" and \"bar\" are enabled on the given "
"members only if the member defines that feature. It is still an error if "
"none of the selected packages defines a given feature."
msgstr ""

#: src/2957-cargo-features2.md:229
msgid ""
"Features for individual packages can be enabled by using `member_name/"
"feature_name` syntax. For example, `cargo build --workspace --feature "
"member_name/feature_name` will build all packages in a workspace, and enable "
"the given feature only for the given member."
msgstr ""

#: src/2957-cargo-features2.md:234
msgid ""
"The `--features` and `--no-default-features` flags may now be used in the "
"root of a virtual workspace."
msgstr ""

#: src/2957-cargo-features2.md:237
msgid ""
"The ability to set features for non-workspace members is not allowed, as the "
"resolver fundamentally does not support that ability."
msgstr ""

#: src/2957-cargo-features2.md:240
msgid ""
"The first change is only enabled if the `resolver = \"2\"` value is set in "
"the workspace manifest because it is a backwards-incompatible change. The "
"other changes are intended to be stabilized for everyone, as they only "
"extend previously invalid usage."
msgstr ""

#: src/2957-cargo-features2.md:245
msgid "`cargo metadata`"
msgstr ""

#: src/2957-cargo-features2.md:247
msgid ""
"At this time, the `cargo metadata` command will not be changed to expose the "
"new feature resolver. The \"features\" field will continue to display the "
"features as computed by the original dependency resolver."
msgstr ""

#: src/2957-cargo-features2.md:251
msgid ""
"Properly expressing the dependency graph with features would require a "
"number of changes to `cargo metadata` that can add complexity to the "
"interface. For example, the following flags would need to be added to "
"properly show how features are selected:"
msgstr ""

#: src/2957-cargo-features2.md:256
msgid "Workspace selection flags (`-p`, `--workspace`, `--exclude`)."
msgstr ""

#: src/2957-cargo-features2.md:257
msgid "Whether or not dev-dependencies are included (`--dep-kinds`?)."
msgstr ""

#: src/2957-cargo-features2.md:259
msgid ""
"Additionally, the current graph structure does not expose the host-vs-target "
"dependency relationship, among other issues."
msgstr ""

#: src/2957-cargo-features2.md:262
msgid ""
"It is intended that this will be addressed at some point in the future. "
"Feedback on desired use cases for feature information will help define the "
"solution. A possible alternative is to stabilize the [`--unit-graph`]"
"(https://doc.rust-lang.org/nightly/cargo/reference/unstable.html#unit-graph) "
"flag, which exposes Cargo's internal graph structure, which accurately "
"indicates the actual dependency relationships and uses the new feature "
"resolver."
msgstr ""

#: src/2957-cargo-features2.md:268
msgid ""
"For non-parseable output, `cargo tree` will show features from the new "
"resolver."
msgstr ""

#: src/2957-cargo-features2.md:273
msgid "Drawbacks"
msgstr ""

#: src/2957-cargo-features2.md:275
msgid "There are a number of drawbacks to this approach:"
msgstr ""

#: src/2957-cargo-features2.md:277
msgid ""
"In some situations, dependencies will be built multiple times where they "
"were previously only built once. This causes two problems: increased build "
"times, and potentially broken builds when transitioning to the new resolver. "
"It is intended that if the user wants to build a dependency once that now "
"has non-unified features, they will need to add feature declarations within "
"their dependencies so that they once again have the same features. The "
"`cargo tree` command has been added to help the user identify and remedy "
"these situations. `cargo tree -d` will expose dependencies that are built "
"multiple times, and the `-e features` flag can be used to see which packages "
"are enabling which features."
msgstr ""

#: src/2957-cargo-features2.md:288
msgid ""
"Unfortunately the error message is not very clear when a feature that was "
"previously assumed to be enabled is no longer enabled. Typically these "
"appear in the form of unresolved paths. In testing so far, this has come up "
"occasionally, but is usually fairly easy to identify what is wrong. Once "
"more of the ecosystem starts using the new resolver, these errors should "
"become less frequent."
msgstr ""

#: src/2957-cargo-features2.md:295
msgid ""
"Feature unification with dev-dependencies being a global decision can result "
"in some artifacts including features that may not be desired. For example, a "
"project with a binary and a shared dependency that is used as a dev-"
"dependency and a normal dependency. When running `cargo test` the binary "
"will include the shared dev-dependency features. Compare this to a normal "
"`cargo build --bin name`, where the binary will be built without those "
"features. This means that if you are testing a binary with an integration "
"test, you end up not testing the same thing as what is normally built. "
"Changing this has significant drawbacks. Cargo's dependency graph "
"construction will require fundamental changes to support this scenario. "
"Additionally, it has a high risk that will cause increased build times for "
"many projects that aren't affected or don't care that it may have slightly "
"different features enabled."
msgstr ""

#: src/2957-cargo-features2.md:309
msgid ""
"This adds complexity to Cargo, and adds boilerplate to `Cargo.toml`. It can "
"also be confusing when switching between projects that use different "
"settings. It is intended in the future that new resolver will become the "
"default via the \"edition\" declaration. This will remove the extra "
"boilerplate, and hopefully most projects will eventually adopt the new "
"edition, so that there will be consistency between projects. See [\"Default "
"opt-in\"](#default-opt-in) below for more details"
msgstr ""

#: src/2957-cargo-features2.md:317
msgid ""
"This may not cover all of the backwards-incompatible changes that we may "
"want to make to the feature resolver. At this time, we do not have any "
"specific enhancements planned that are backwards-incompatible, but there is "
"a risk that additional enhancements will require a bump to version `\"3\"` "
"of the resolver field, causing further ecosystem churn. Since there aren't "
"any specific changes on the horizon that we know will cause problems, I am "
"reluctant to force the new resolver to wait until some uncertain point in "
"the future. See [Future possibilities](#future-possibilities) for a list of "
"possible changes."
msgstr ""

#: src/2957-cargo-features2.md:327
msgid ""
"The new resolver has not had widespread testing. It is unclear if it covers "
"most of the concerns that motivated it, or if there are shortcomings or "
"problems. It is difficult to get sufficient testing, particularly when only "
"available as an unstable feature."
msgstr ""

#: src/2957-cargo-features2.md:332
msgid "Subtle behaviors"
msgstr ""

#: src/2957-cargo-features2.md:334
msgid ""
"The following are behaviors that may be confusing or surprising, and are "
"highlighted here as potential concerns."
msgstr ""

#: src/2957-cargo-features2.md:337
msgid "Optional dependency feature names"
msgstr ""

#: src/2957-cargo-features2.md:339
msgid ""
"`dep_name/feat_name` will always enable the feature `dep_name`, even if it "
"is an inactive optional dependency (such as a dependency for another "
"platform). The intent here is to be consistent where features are always "
"activated when explicitly written, but the _dependency_ is not activated."
msgstr ""

#: src/2957-cargo-features2.md:344
msgid ""
"`--all-features` enables features for inactive optional dependencies (but "
"does not activate the _dependency_). This is consistent with `--features "
"foo` enabling `foo`, even if the `foo` dependency is not activated."
msgstr ""

#: src/2957-cargo-features2.md:348
msgid ""
"Code that needs to have a `cfg` expression for a dependency of this kind "
"should use a `cfg` that matches the condition (like `cfg(windows)`) or use "
"`cfg(accessible(dep_name))` when that syntax is stabilized."
msgstr ""

#: src/2957-cargo-features2.md:352
msgid ""
"This is somewhat intertwined with the upcoming [namespaced features](https://"
"doc.rust-lang.org/nightly/cargo/reference/unstable.html#namespaced-"
"features). For an optional dependency, the feature is decoupled from the "
"activating of the dependency itself."
msgstr ""

#: src/2957-cargo-features2.md:356
msgid "Proc-macro unification in a workspace"
msgstr ""

#: src/2957-cargo-features2.md:358
msgid ""
"If there is a proc-macro in a workspace, and the proc-macro is included as a "
"\"root\" package along with other packages in a workspace (for example with "
"`cargo build --workspace`), then there can be some potentially surprising "
"feature unification between the proc-macro and the other members of the "
"workspace. This is because proc-macros _may_ have normal targets such as "
"binaries or tests, which need feature unification with the rest of the "
"workspace."
msgstr ""

#: src/2957-cargo-features2.md:366
msgid ""
"This issue is detailed in [issue #8312](https://github.com/rust-lang/cargo/"
"issues/8312)."
msgstr ""

#: src/2957-cargo-features2.md:368
msgid ""
"At this time, there isn't a clear solution to this problem. If this is an "
"issue, projects are encouraged to avoid using `--workspace` or use `--"
"exclude` or otherwise avoid building multiple workspace members together. "
"This is also related to the [workspace unification issue](https://github.com/"
"rust-lang/cargo/issues/4463)."
msgstr ""

#: src/2957-cargo-features2.md:377
msgid "Rationale and alternatives"
msgstr ""

#: src/2957-cargo-features2.md:379
msgid ""
"These changes could be forced on all users without an opt-in. The amount of "
"breakage is not expected to be widespread, though limited testing has "
"exposed that it will happen some of the time. Generally, Cargo tries to "
"avoid breaking changes that affect a significant portion of users, and we "
"feel that breakage will come up often enough that an opt-in is the best "
"route."
msgstr ""

#: src/2957-cargo-features2.md:386
msgid ""
"An alternative approach would be to give the user manual control over which "
"specific dependencies are unified and which aren't. A similar option would "
"be feature masks. This would likely be a tedious process, whereas hopefully "
"this RFC's approach is more automatic and streamlined for the common case."
msgstr ""

#: src/2957-cargo-features2.md:391
msgid "Prior art"
msgstr ""

#: src/2957-cargo-features2.md:393
msgid ""
"Other tools have various ways of controlling conditional compilation, but "
"none are quite exactly like Cargo to our knowledge. The following is a "
"survey of a few tools with similar capabilities."
msgstr ""

#: src/2957-cargo-features2.md:397
msgid ""
"[Ivy](https://ant.apache.org/ivy/) has [module configurations](http://ant."
"apache.org/ivy/history/latest-milestone/tutorial/conf.html) for "
"conditionally selecting dependencies. It also has [pluggable resolvers]"
"(https://ant.apache.org/ivy/history/latest-milestone/settings/resolvers."
"html)."
msgstr ""

#: src/2957-cargo-features2.md:399
msgid ""
"[Maven](https://maven.apache.org/) has [optional dependencies](https://maven."
"apache.org/guides/introduction/introduction-to-optional-and-excludes-"
"dependencies.html) with the ability to express exclusions."
msgstr ""

#: src/2957-cargo-features2.md:401
msgid ""
"[Gradle](https://gradle.org/) has [feature variants](https://docs.gradle.org/"
"current/userguide/feature_variants.html), with [capabilities](https://docs."
"gradle.org/6.0.1/userguide/component_capabilities.html) indicating what is "
"provided. [Conflicts](https://docs.gradle.org/current/userguide/"
"dependency_capability_conflict.html) can be resolved with user-defined code."
msgstr ""

#: src/2957-cargo-features2.md:404
msgid ""
"[Bazel](https://www.bazel.build/) has [configurable build attributes]"
"(https://docs.bazel.build/versions/master/configurable-attributes.html) to "
"change build rules on the command-line."
msgstr ""

#: src/2957-cargo-features2.md:406
msgid ""
"Several build tools, like [make](https://www.gnu.org/software/make/manual/"
"make.html), rely on user scripting to inspect variables to make decisions on "
"build settings."
msgstr ""

#: src/2957-cargo-features2.md:408
msgid ""
"[Meson](https://mesonbuild.com/) has [optional dependencies](https://"
"mesonbuild.com/Dependencies.html) which are skipped if not available. [Build "
"options](https://mesonbuild.com/Build-options.html) provide a way to set "
"different settings, including enabled/disabled/auto features."
msgstr ""

#: src/2957-cargo-features2.md:411
msgid ""
"[go](https://golang.org/) has [build constraints](https://golang.org/pkg/go/"
"build/#hdr-Build_Constraints) which can conditionally include a file."
msgstr ""

#: src/2957-cargo-features2.md:413
msgid ""
"[NuGet](https://docs.microsoft.com/en-us/nuget/) dependencies can use the "
"[PackageReference](https://docs.microsoft.com/en-us/nuget/consume-packages/"
"package-references-in-project-files) to specify conditions for inclusion."
msgstr ""

#: src/2957-cargo-features2.md:415
msgid ""
"[Cabal](https://www.haskell.org/cabal/) has [conditional features](https://"
"www.haskell.org/cabal/users-guide/developing-packages.html#resolution-of-"
"conditions-and-flags) to control configuration flags."
msgstr ""

#: src/2957-cargo-features2.md:417
msgid ""
"[Bundler](https://bundler.io/) can use arbitrary Ruby code to define "
"conditions. [Optional dependency groups](https://bundler.io/guides/groups."
"html#optional-groups) can be toggled by the user."
msgstr ""

#: src/2957-cargo-features2.md:419
msgid ""
"[pip](https://pypi.org/project/pip/) dependencies can have [constraints]"
"(https://setuptools.readthedocs.io/en/latest/setuptools.html#declaring-"
"dependencies), and can have [\"extras\"](https://setuptools.readthedocs.io/"
"en/latest/setuptools.html#declaring-extras-optional-features-with-their-own-"
"dependencies) which can be enabled by dependencies. [Environment markers]"
"(https://www.python.org/dev/peps/pep-0508/#environment-markers) also provide "
"a way to further restrict when a dependency is used."
msgstr ""

#: src/2957-cargo-features2.md:423
msgid ""
"[CPAN](https://www.cpan.org/) [dependencies](http://blogs.perl.org/users/"
"neilb/2017/05/specifying-dependencies-for-your-cpan-distribution.html) use a "
"requires/recommends/suggests/conflicts model. [Optional features](https://"
"metacpan.org/pod/CPAN::Meta::Spec#optional_features) are also available."
msgstr ""

#: src/2957-cargo-features2.md:426
msgid ""
"[npm](https://www.npmjs.com/) and [yarn](https://yarnpkg.com/) have optional "
"dependencies that are skipped if they fail to install."
msgstr ""

#: src/2957-cargo-features2.md:428
msgid ""
"[Gentoo Linux Portage](https://wiki.gentoo.org/wiki/Portage) has one of the "
"most sophisticated feature selection capabilities of the common system "
"packagers. Its [USE flags](https://wiki.gentoo.org/wiki/Handbook:X86/Working/"
"USE) control dependencies and features. [Dependencies](https://devmanual."
"gentoo.org/general-concepts/dependencies/index.html) can specify USE flag "
"requirements. [REQUIRED_USE](https://devmanual.gentoo.org/ebuild-writing/"
"variables/#required_use) supports expressions for USE restrictions, mutually "
"exclusive flags, etc. [Profiles](https://wiki.gentoo.org/wiki/"
"Profile_(Portage)) provide a way to group USE flags."
msgstr ""

#: src/2957-cargo-features2.md:474
msgid "Unresolved questions"
msgstr "未解決的問題"

#: src/2957-cargo-features2.md:476
msgid "None at this time."
msgstr ""

#: src/2957-cargo-features2.md:478
msgid "Motivating issues"
msgstr ""

#: src/2957-cargo-features2.md:480
msgid ""
"The Cargo issue tracker contains historical context for some of the requests "
"that have motivated these changes:"
msgstr ""

#: src/2957-cargo-features2.md:483
msgid ""
"[\\#8088](https://github.com/rust-lang/cargo/issues/8088) Features 2.0 meta "
"tracking issue."
msgstr ""

#: src/2957-cargo-features2.md:484
msgid ""
"[\\#7914](https://github.com/rust-lang/cargo/issues/7914) Tracking issue for "
"-Z features=itarget"
msgstr ""

#: src/2957-cargo-features2.md:485
msgid ""
"[\\#1197](https://github.com/rust-lang/cargo/issues/1197) Target-specific "
"features"
msgstr ""

#: src/2957-cargo-features2.md:486
msgid ""
"[\\#2524](https://github.com/rust-lang/cargo/issues/2524) Conditional "
"compilation of dependency feature based on target doesn't work"
msgstr ""

#: src/2957-cargo-features2.md:487
msgid ""
"[\\#7915](https://github.com/rust-lang/cargo/issues/7915) Tracking issue for "
"-Z features=host_dep"
msgstr ""

#: src/2957-cargo-features2.md:488
msgid ""
"[\\#2589](https://github.com/rust-lang/cargo/issues/2589) Build Deps getting "
"mixed in with dependencies"
msgstr ""

#: src/2957-cargo-features2.md:489
msgid ""
"[\\#4361](https://github.com/rust-lang/cargo/issues/4361) Shared "
"build+target dependency crates conflate features"
msgstr ""

#: src/2957-cargo-features2.md:490
msgid ""
"[\\#4866](https://github.com/rust-lang/cargo/issues/4866) build-dependencies "
"and dependencies should not have features unified"
msgstr ""

#: src/2957-cargo-features2.md:491
msgid ""
"[\\#5730](https://github.com/rust-lang/cargo/issues/5730) Features of "
"dependencies are enabled if they're enabled in build-dependencies; breaks "
"no_std libs"
msgstr ""

#: src/2957-cargo-features2.md:492
msgid ""
"[\\#7916](https://github.com/rust-lang/cargo/issues/7916) Tracking issue for "
"-Z features=dev_dep"
msgstr ""

#: src/2957-cargo-features2.md:493
msgid ""
"[\\#1796](https://github.com/rust-lang/cargo/issues/1796) Incorrect dev-"
"dependency feature resolution"
msgstr ""

#: src/2957-cargo-features2.md:494
msgid ""
"[\\#4664](https://github.com/rust-lang/cargo/issues/4664) Don't pass `--"
"features` from `dev-dependencies` to `dependencies`"
msgstr ""

#: src/2957-cargo-features2.md:495
msgid ""
"[\\#5364](https://github.com/rust-lang/cargo/issues/5364) New behavior of `--"
"feature` + `--package` combination"
msgstr ""

#: src/2957-cargo-features2.md:496
msgid ""
"[\\#4106](https://github.com/rust-lang/cargo/issues/4106) Testing workspace "
"package with features expects the root package to have those features"
msgstr ""

#: src/2957-cargo-features2.md:497
msgid ""
"[\\#4753](https://github.com/rust-lang/cargo/issues/4753) Add support for --"
"features and --no-default-features flags in workspace builds"
msgstr ""

#: src/2957-cargo-features2.md:498
msgid ""
"[\\#5015](https://github.com/rust-lang/cargo/issues/5015) building "
"workspaces can't use --features flag"
msgstr ""

#: src/2957-cargo-features2.md:499
msgid ""
"[\\#5362](https://github.com/rust-lang/cargo/issues/5362) Cargo sometimes "
"doesn't ungate crate features"
msgstr ""

#: src/2957-cargo-features2.md:500
msgid ""
"[\\#6195](https://github.com/rust-lang/cargo/issues/6195) Testing whole "
"workspace with features enabled in some crate(s)"
msgstr ""

#: src/2957-cargo-features2.md:521
msgid "Future possibilities"
msgstr ""

#: src/2957-cargo-features2.md:523
msgid "Feature resolver enhancements"
msgstr ""

#: src/2957-cargo-features2.md:525
msgid ""
"The following changes are things we are thinking about, but are not in a "
"fully-baked state. It is uncertain if they will require backwards-"
"incompatible changes or not."
msgstr ""

#: src/2957-cargo-features2.md:529
msgid ""
"Workspace feature unification. Currently the features enabled in a workspace "
"depend on which workspace members are built (and those members' dependency "
"tree). Sometimes projects want to ensure a dependency is only built once, "
"regardless of which member included it, to avoid duplicate builds, or "
"surprising changes in behavior. Sometimes projects want to ensure "
"dependencies are _not_ unified, since they don't want unrelated workspace "
"members to affect one another. It seems likely this may require explicit "
"notation to control the behavior, so it may be possible to add in a "
"backwards-compatible fashion. There are also workarounds for this behavior, "
"so it is not as urgent."
msgstr ""

#: src/2957-cargo-features2.md:539
msgid ""
"Automatic features. This allows a dependency to automatically be enabled if "
"it is already enabled somewhere else in the graph. [rfc#1787](https://github."
"com/rust-lang/rfcs/pull/1787)"
msgstr ""

#: src/2957-cargo-features2.md:541
msgid "Profile and target default features."
msgstr ""

#: src/2957-cargo-features2.md:542
msgid ""
"Namespaced features. [rust-lang/cargo#5565](https://github.com/rust-lang/"
"cargo/issues/5565)"
msgstr ""

#: src/2957-cargo-features2.md:543
msgid ""
"Mutually-exclusive features. [rust-lang/cargo#2980](https://github.com/rust-"
"lang/cargo/issues/2980)"
msgstr ""

#: src/2957-cargo-features2.md:544
msgid "Private and unstable features."
msgstr ""

#: src/2957-cargo-features2.md:545
msgid ""
"And many other issues and enhancements in the Cargo tracker: [A-features]"
"(https://github.com/rust-lang/cargo/issues?q=is%3Aopen+is%3Aissue+label%3AA-"
"features)"
msgstr ""

#: src/2957-cargo-features2.md:552
msgid "Default opt-in"
msgstr ""

#: src/2957-cargo-features2.md:554
msgid ""
"We are planning to make it so that in the next Rust Edition, Cargo will "
"automatically use the new resolver. It will assume you specify `resolver = "
"\"2\"` when a workspace specifies the next edition. This may help reduce the "
"boilerplate in the manifest, and make the preferred behavior the default for "
"new projects. Cargo has some precedent for this, as in the 2018 edition "
"several defaults were changed. It is unclear how this would work in a "
"virtual workspace, or if this will cause additional confusion, so this is "
"left as a possibility to be explored in the future."
msgstr ""

#: src/2957-cargo-features2.md:563
msgid "Default `cargo new`"
msgstr ""

#: src/2957-cargo-features2.md:565
msgid ""
"In the short term, `cargo new` (and `init`) will not set the `resolver` "
"field. After this feature has had some time on stable and more projects have "
"some experience with it, the default manifest for `cargo new` will be "
"modified to set `resolver = \"2\"`."
msgstr ""
