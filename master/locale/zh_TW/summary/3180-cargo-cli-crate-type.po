msgid ""
msgstr ""
"Project-Id-Version: The Rust RFC Book\n"
"POT-Creation-Date: 2025-12-22T09:04:45Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"Language: zh_TW\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/3180-cargo-cli-crate-type.md:1
msgid "RFC: Cargo `--crate-type` CLI Argument"
msgstr ""

#: src/3180-cargo-cli-crate-type.md:3
msgid "Feature Name: `cargo_cli_crate_type`"
msgstr ""

#: src/3180-cargo-cli-crate-type.md:4
msgid "Start Date: 2021-10-07"
msgstr ""

#: src/3180-cargo-cli-crate-type.md:5
msgid ""
"RFC PR: [rust-lang/rfcs#3180](https://github.com/rust-lang/rfcs/pull/3180)"
msgstr ""

#: src/3180-cargo-cli-crate-type.md:6
msgid ""
"Tracking Issue: [rust-lang/cargo#10083](https://github.com/rust-lang/cargo/"
"issues/10083)"
msgstr ""

#: src/3180-cargo-cli-crate-type.md:8
msgid "Summary"
msgstr "摘要"

#: src/3180-cargo-cli-crate-type.md:11
msgid ""
"Add the ability to provide `--crate-type <crate-type>` as an argument to "
"`cargo rustc`. This would have the same affect of adding `crate-type` in the "
"`Cargo.toml`, while taking higher priority than any value specified there."
msgstr ""

#: src/3180-cargo-cli-crate-type.md:13
msgid ""
"[Previous implementation PR](https://github.com/rust-lang/cargo/pull/8789)"
msgstr ""

#: src/3180-cargo-cli-crate-type.md:15
msgid "Motivation"
msgstr "動機"

#: src/3180-cargo-cli-crate-type.md:18
msgid ""
"A crate can declare in its `Cargo.toml` manifest what sort of sort of "
"compilation artifact to produce. However, there are times when the _user_ of "
"such a crate, as opposed to the author, would want to alter what artifacts "
"are produced."
msgstr ""

#: src/3180-cargo-cli-crate-type.md:20
msgid ""
"Some crates may provide both a Rust API and an optional C API. A current "
"example is the [hyper](https://github.com/hyperium/hyper) crate. Most users "
"of the Rust API only need an `rlib`, so forcing the compilation of a "
"`cdylib` as well is a waste. It can also cause problems for people including "
"such a crate as a dependency when cross-compiling, or when combining with `-"
"C prefer-dynamic` ([example](https://github.com/rust-lang/rust/"
"issues/82151))."
msgstr ""

#: src/3180-cargo-cli-crate-type.md:22
msgid ""
"Another usecase is sharing a library across different platforms (e.g. iOS, "
"Android, WASM). iOS requires static linking (`staticlib`) [\\[1\\]](https://"
"github.com/rust-lang/cargo/issues/4881#issuecomment-732751642), [\\[2\\]]"
"(https://github.com/rust-lang/rust/pull/77716), Android and WASM require "
"dynamic linking (`cdylib`) and in order to use it as a dependency in Rust "
"requires `rlib`."
msgstr ""

#: src/3180-cargo-cli-crate-type.md:24
msgid ""
"Lastly, being able to pick a specific crate type also decreases build times "
"when you already know which platform you're targeting."
msgstr ""

#: src/3180-cargo-cli-crate-type.md:26
msgid "Guide-level explanation"
msgstr ""

#: src/3180-cargo-cli-crate-type.md:29
msgid ""
"When a user builds a library, using `cargo rustc`, they can provide a `--"
"crate-type` argument to adjust the crate type that is compiled. The argument "
"can be any that can also be listed in the `Cargo.toml`."
msgstr ""

#: src/3180-cargo-cli-crate-type.md:31
msgid "Some examples:"
msgstr ""

#: src/3180-cargo-cli-crate-type.md:39
msgid "Reference-level explanation"
msgstr ""

#: src/3180-cargo-cli-crate-type.md:42
msgid ""
"A new command-line argument, `--crate-type`, will be added to Cargo. It must "
"be provided a comma-separated list of 1 or more crate types, of which the "
"allowed values are the same as can be [provided in the manifest](https://doc."
"rust-lang.org/cargo/reference/cargo-targets.html#the-crate-type-field)."
msgstr ""

#: src/3180-cargo-cli-crate-type.md:44
msgid "The argument will be added for `cargo rustc`."
msgstr ""

#: src/3180-cargo-cli-crate-type.md:46
msgid ""
"As with the existing `crate-type` manifest property, this will only work "
"when building a `lib` or `example`."
msgstr ""

#: src/3180-cargo-cli-crate-type.md:48
msgid ""
"If the manifest contains a list, and this new command-line argument is "
"provided by the user, the command-line argument value will override what is "
"in the manifest. For example:"
msgstr ""

#: src/3180-cargo-cli-crate-type.md:50
msgid ""
"```toml\n"
"[lib]\n"
"crate-type = [\"lib\", \"staticlib\", \"cdylib\"]\n"
"```"
msgstr ""

#: src/3180-cargo-cli-crate-type.md:59
msgid ""
"This will produce output only as a `staticlib`, ignoring the other values in "
"the manifest."
msgstr ""

#: src/3180-cargo-cli-crate-type.md:61
msgid "Drawbacks"
msgstr ""

#: src/3180-cargo-cli-crate-type.md:64
msgid "The usual reasons to not do this apply here:"
msgstr ""

#: src/3180-cargo-cli-crate-type.md:66
msgid ""
"An additional feature means more surface area to maintain, and more "
"possibility of bugs."
msgstr ""

#: src/3180-cargo-cli-crate-type.md:67
msgid ""
"The Cargo team is already stretched too thin to ask for another feature. "
"However, in this case, an implementation is already written."
msgstr ""

#: src/3180-cargo-cli-crate-type.md:69
msgid "Rationale and alternatives"
msgstr ""

#: src/3180-cargo-cli-crate-type.md:72
msgid ""
"This gives direct control of the compilation to the end user, instead of "
"making them depend on whatever the crate author put in the `Cargo.toml`."
msgstr ""

#: src/3180-cargo-cli-crate-type.md:74
msgid ""
"An alternative detail to this proposal is to make it so specifying `--crate-"
"type` adds to the list in the `Cargo.toml`, instead of overriding it. "
"However, there would still be a need for end users to override, so there "
"would need to be an additional argument, such as `--no-default-crate-type`. "
"Overriding feels like the less complex solution for a user to comprehend."
msgstr ""

#: src/3180-cargo-cli-crate-type.md:76
msgid ""
"The story around compiling Rust for different targets, and especially in "
"ways that are compatible with C, needs to grow stronger. Choosing not to do "
"this would mean this pain point would continue to exist, which hurts the "
"adoption of writing libraries in Rust instead of C."
msgstr ""

#: src/3180-cargo-cli-crate-type.md:78
msgid "Prior art"
msgstr ""

#: src/3180-cargo-cli-crate-type.md:81
msgid "There are a couple similar-looking features already in cargo:"
msgstr ""

#: src/3180-cargo-cli-crate-type.md:83
msgid ""
"`--target`: When building a crate, a user can specify the specific target "
"architecture of the compilation output. When not specified, it defaults to "
"the host architecture."
msgstr ""

#: src/3180-cargo-cli-crate-type.md:84
msgid ""
"`--features`: A user can specify a list of features to enable when building "
"a crate directly with `cargo build`. The `Cargo.toml` can provide a default "
"set of features to compile. This differs from the other art, since "
"specifying `--features` will _add_ to the default, instead of _overriding_ "
"it."
msgstr ""

#: src/3180-cargo-cli-crate-type.md:86
msgid "Unresolved questions"
msgstr "未解決的問題"

#: src/3180-cargo-cli-crate-type.md:89
msgid ""
"**Should a user be able to configure the crate-type of _all_ crates in the "
"dependency graph?**"
msgstr ""

#: src/3180-cargo-cli-crate-type.md:91
msgid ""
"When this feature was first proposed, [it was suggested](https://github.com/"
"rust-lang/cargo/pull/8789#issuecomment-713161246) that a user may wish to "
"configure many dependencies at once, not just the top level crate. This RFC "
"doesn't propose how to solve that, but claims that it can be safely "
"considered out of scope."
msgstr ""

#: src/3180-cargo-cli-crate-type.md:93
msgid ""
"First, such a feature is much larger, and there isn't prior art _in Cargo_ "
"to have command-line arguments configuring other dependencies. Designing "
"that would take much more effort. There doesn't seem to be resources "
"available to explore that."
msgstr ""

#: src/3180-cargo-cli-crate-type.md:95
msgid ""
"Additionally, the small focus of the feature proposed in this RFC doesn't "
"prevent that larger design from being explored and added at a later point. "
"Figuring out a way to specify configuration arguments for other dependencies "
"would likely need to work for the existing `--features` argument. Therefore, "
"this isn't a 1-way-door decision, and thus we don't need to stop fixing this "
"particular pain before that is figured out."
msgstr ""

#: src/3180-cargo-cli-crate-type.md:97
msgid "Future possibilities"
msgstr ""

#: src/3180-cargo-cli-crate-type.md:100
msgid ""
"The command-line argument may be useful for other `cargo` commands in the "
"future. This RFC starts with a conservative list."
msgstr ""

#: src/3180-cargo-cli-crate-type.md:102
msgid ""
"It may also be of interest to allow a crate \"feature\" enable different "
"crate-types, such as `--features ffi` enabling `--crate-type cdylib`."
msgstr ""
