<!DOCTYPE HTML>
<html lang="en_US" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>3192-dyno - The Rust RFC Book</title>


        <!-- Custom HTML head -->
        <script type="text/javascript" src="ltd-provenance.js"></script>
        <script type="text/javascript" src="ltd-current.js"></script>
        <script type="text/javascript" src="../../ltd-config.js"></script>
        <script type="text/javascript" src="../../ltd-flyout.js"></script>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex-0060737d.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-5025baa3.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">The Rust RFC Book</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/rust-lang/rfcs" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <ul>
<li>Feature Name: <code>provide_any</code></li>
<li>Start Date: 2021-11-04</li>
<li>RFC PR: <a href="https://github.com/rust-lang/rfcs/pull/3192">rust-lang/rfcs#3192</a></li>
<li>Rust Issue: <a href="https://github.com/rust-lang/rust/issues/96024">rust-lang/rust#96024</a></li>
</ul>
<h2 id="this-rfc-was-previously-approved-but-part-of-it-later-rejected"><a class="header" href="#this-rfc-was-previously-approved-but-part-of-it-later-rejected">This RFC was previously approved, but part of it later <strong>rejected</strong></a></h2>
<p>The <code>Provider</code> interface that is core to this proposal has been rejected for now by <a href="https://github.com/rust-lang/rust/issues/96024">the libs team meeting</a>. Without that element, what remains here is essentially just the <code>Demand</code> type (being renamed in https://github.com/rust-lang/rust/pull/113464 to <code>Request</code>). Without <code>Provider</code>, <code>Demand</code>/<code>Request</code> is only usable by types defined within the standard library itself as is the case in the <a href="https://github.com/rust-lang/rfcs/pull/2895">error_generic_member_access</a> feature proposal. Since <code>error_generic_member_access</code> is the only known (at the time of writing this) feature using <code>Demand</code>/<code>Request</code>, the <a href="https://github.com/rust-lang/rust/issues/96024#issuecomment-1629794600">decision</a> was made to track it in the <code>error_generic_member_access</code> feature and mark this as rejected for now.</p>
<h2 id="summary"><a class="header" href="#summary">Summary</a></h2>
<p>This RFC proposes extending the <a href="https://doc.rust-lang.org/nightly/std/any/index.html"><code>any</code> module</a> of the core library with a generic API for objects to provide type-based access to data. (In contrast to the existing APIs which provides type-driven downcasting, the proposed extension integrates downcasting into data access to provide a safer and more ergonomic API).</p>
<p>By using the proposed API, a trait object can offer functionality like:</p>
<pre><code class="language-rust">let s: String = object.request();
let s = object.request_field::&lt;str&gt;();           // s: &amp;str
let x = object.request_field::&lt;SpecificData&gt;();  // x: &amp;SpecificData</code></pre>
<p>Here, the <code>request</code> and <code>request_field</code> methods are implemented by the author of <code>object</code> using the proposed API as a framework.</p>
<h3 id="notes"><a class="header" href="#notes">Notes</a></h3>
<ul>
<li>A major motivation for this RFC is ‘generic member access’ for the <code>Error</code> trait. That was previously proposed in <a href="https://github.com/rust-lang/rfcs/pull/2895">RFC 2895</a>. This RFC will use <code>Error</code> as a driving example, but explicitly does not propose changes to <code>Error</code>.</li>
<li>A proof-of-concept implementation of this proposal (and the motivating extension to <code>Error</code>) is at <a href="https://github.com/nrc/provide-any">provide-any</a>.</li>
<li>This work is adapted from <a href="https://github.com/mystor/dyno/tree/min_magic">dyno</a>.</li>
<li>Previous iterations of this work included exposing the concept of type tags. These are still used in the implementation but are no longer exposed in the API.</li>
</ul>
<h2 id="motivation"><a class="header" href="#motivation">Motivation</a></h2>
<p>Trait objects (<code>Pointer&lt;dyn Trait&gt;</code>) provide strong abstraction over concrete types, often reducing a wide variety of types to just a few methods. This allows writing code which can operate over many types, using only a restricted interface. However, in practice some kind of partial abstraction is required, where objects are treated abstractly but can be queried for data only present in a subset of all types which implement the trait interface. In this case there are only bad options: speculatively downcasting to concrete types (inefficient, boilerplatey, and fragile due to breaking abstraction) or adding numerous methods to the trait which <em>might</em> be functionally implemented, typically returning an <code>Option</code> where <code>None</code> means not applicable for the concrete type (boilerplatey, confusing, and leads to poor abstractions).</p>
<p>As a concrete example of the above scenario, consider the <code>Error</code> trait. It is often used as a trait object so that all errors can be handled generically. However, classes of errors often have additional context that can be useful when handling or reporting errors. For example, an error <a href="https://doc.rust-lang.org/nightly/std/backtrace/struct.Backtrace.html">backtrace</a>, information about the runtime state of the program or environment, the location of the error in the source code, or help text suggestions. Adding backtrace methods to <code>Error</code> has already been implemented (currently unstable), but adding methods for all context information is impossible.</p>
<p>Using the API proposed in this RFC, a solution might look something like:</p>
<pre><code class="language-rust">use std::error::Error;

// Some concrete error type.
struct MyError {
    backtrace: Backtrace,
    suggestion: String,
}

impl Error for MyError {
    fn provide_context&lt;'a&gt;(&amp;'a self, req: &amp;mut Demand&lt;'a&gt;) {
        req.provide_ref::&lt;Backtrace&gt;(&amp;self.backtrace)
            .provide_ref::&lt;str&gt;(&amp;self.suggestion);
    }
}

// Perhaps in a different crate or module, a function for handling all errors, not just MyError.
fn report_error(e: &amp;dyn Error) {
    // Generic error handling.
    // ...

    // Backtrace.
    if let Some(bt) = e.get_context_ref::&lt;Backtrace&gt;() {
        emit_backtrace(bt);
    }

    // Help text suggestion.
    // Note, we should really use a newtype here to prevent confusing different string
    // context information (see appendix).
    if let Some(suggestion) = e.get_context_ref::&lt;str&gt;() {
        emit_suggestion(suggestion);
    }
}</code></pre>
<p>An alternative is to do some kind of name-driven access, for example we could add a method <code>fn get(name: String) -&gt; Option&lt;&amp;dyn Any&gt;</code> to <code>Error</code> (or use something more strongly typed than <code>String</code> to name data). The disadvantage of this approach is that the caller must downcast the returned object and that leads to opportunities for bugs, since there is an implicit connection between the name and type of objects. If that connection changes, it will not be caught at compile time, only at runtime (and probably with a panicking unwrap, since programmers will be likely to unwrap the result of downcasting, believing it to be guaranteed by <code>get</code>). Furthermore, this approach is limited by constraints on <code>Any</code>, we cannot return objects by value, return objects which include references (due to the <code>'static</code> bound on <code>Any</code>), objects which are not object safe, or dynamically sized objects (e.g., we could not return a <code>&amp;str</code>).</p>
<p>Beyond <code>Error</code>, one could imagine using the proposed API in any situation where we might add arbitrary data to a generic object. Another concrete example might be the <code>Context</code> object passed to <code>future::poll</code>. See also a full example in the appendix.</p>
<h2 id="guide-level-explanation"><a class="header" href="#guide-level-explanation">Guide-level explanation</a></h2>
<p>In this section I’ll describe how the proposed API is used and defined. Typically there is an intermediate library which has a trait which extends <code>Provider</code> (we will use the <code>Error</code> trait in our examples) and has API which is a facade over <code>any</code>’s API. This proposal is relatively complex in implementation. However, most users will not even be aware of its existence. Using the <code>any</code> extensions in an intermediate library has some complexity, but using the intermediate library is straightforward for end users.</p>
<p>This proposal supports generic, type-driven access to data and a mechanism for intermediate implementers to provide such data. The key parts of the interface are the <code>Provider</code> trait for objects which can provide data, and the <code>request_*</code> functions for requesting data from an object which implements <code>Provider</code>. Note that end users should not call the <code>request_</code> functions directly, they are helper functions for intermediate implementers to use.</p>
<p>For the rest of this section we will explain the earlier example, starting from data access and work our way down the implementation to the changes to <code>any</code>. Note that the fact that <code>Error</code> is in the standard library is mostly immaterial. <code>any</code> is a public module and can be used by any crate. We use <code>Error</code> as an example, we are not proposing changes to <code>Error</code> in this RFC.</p>
<p>A user of <code>Error</code> trait objects can call <code>get_context_ref</code> to access data by type which might be carried by an <code>Error</code> object. The function returns an <code>Option</code> and will return <code>None</code> if the requested type of data is not carried. For example, to access a backtrace (in a world where the <code>Error::backtrace</code> method has been removed): <code>e.get_context_ref::&lt;Backtrace&gt;()</code> (specifying the type using the turbofish syntax may not be necessary if the type can be inferred from the context, though we recommend it).</p>
<p>Lets examine the changes to <code>Error</code> required to make this work:</p>
<pre><code class="language-rust">pub mod error {
    pub trait Error: Debug + Provider {
        ...
        fn provide_context&lt;'a&gt;(&amp;'a self, _req: &amp;mut Demand&lt;'a&gt;) {}
    }

    impl&lt;T: Error&gt; Provider for T {
        fn provide&lt;'a&gt;(&amp;'a self, req: &amp;mut Demand&lt;'a&gt;) {
            self.provide_context(req);
        }
    }

    impl dyn Error + '_ {
        ...
        pub fn get_context_ref&lt;T: ?Sized + 'static&gt;(&amp;self) -&gt; Option&lt;&amp;T&gt; {
            crate::any::request_ref(self)
        }
    }
}</code></pre>
<p><code>get_context_ref</code> is added as a method on <code>Error</code> trait objects (<code>Error</code> is also likely to support similar methods for values and possibly other types, but I will elide those details), it simply calls <code>any::request_ref</code> (we’ll discuss this function below). But where does the context data come from? If a concrete error type supports backtraces, then it must override the <code>provide_context</code> method when implementing <code>Error</code> (by default, the method does nothing, i.e., no data is provided, so <code>get_context_ref</code> will always returns <code>None</code>). <code>provide_context</code> is used in the blanket implementation of <code>Provider</code> for <code>Error</code> types, in other words <code>Provider::provide</code> is delegated to <code>Error::provide_context</code>.</p>
<p>Note that by adding <code>provide_context</code> with a default empty implementation and the blanket <code>impl</code> of <code>Provider</code>, these changes to <code>Error</code> are backwards compatible. However, this pattern is only possible because <code>Provider</code> and <code>Error</code> will be defined in the same crate. For third party users, users will implement <code>Provider::provide</code> directly, in the usual way.</p>
<p>In <code>provide_context</code>, an error type provides access to data via a <code>Demand</code> object, e.g., <code>req.provide_ref::&lt;Backtrace&gt;(&amp;self.backtrace)</code>. The type of the reference passed to <code>provide_ref</code> is important here (and we encourage users to use explicit types with turbofish syntax even though it is not necessary, this might even be possible to enforce using a lint). When a user calls <code>get_context_ref</code>, the requested type must match the type of an argument to <code>provide_ref</code>, e.g., the type of <code>&amp;self.backtrace</code> is <code>&amp;Backtrace</code>, so a call to <code>get_context_ref::&lt;Backtrace&gt;()</code> will return a reference to <code>self.backtrace</code>. An implementer can make multiple calls to <code>provide_ref</code> to provide multiple data with different types.</p>
<p>Note that <code>Demand</code> has methods for providing values as well as references, and for providing more complex types. These will be covered in the next section.</p>
<p>The important additions to <code>any</code> are</p>
<pre><code class="language-rust">pub trait Provider {
    fn provide&lt;'a&gt;(&amp;'a self, req: &amp;mut Demand&lt;'a&gt;);
}

pub fn request_value&lt;'a, T: 'static&gt;(provider: &amp;'a dyn Provider) -&gt; Option&lt;T&gt; { ... }
pub fn request_ref&lt;'a, T: ?Sized + 'static&gt;(provider: &amp;'a dyn Provider) -&gt; Option&lt;&amp;'a T&gt; { ... }

pub struct Demand&lt;'a&gt;(...);

impl&lt;'a&gt; Demand&lt;'a&gt; {
    pub fn provide_value&lt;T: 'static, F: FnOnce() -&gt; T&gt;(&amp;mut self, fulfil: F) -&gt; &amp;mut Self { ... }
    pub fn provide_ref&lt;T: ?Sized + 'static&gt;(&amp;mut self, value: &amp;'a T) -&gt; &amp;mut Self { ... }
}</code></pre>
<h2 id="reference-level-explanation"><a class="header" href="#reference-level-explanation">Reference-level explanation</a></h2>
<p>For details of the implementation, see the <a href="https://github.com/nrc/provide-any">provide-any</a> repo which has a complete (though unpolished) implementation of this proposal, and an implementation of the extensions to <code>Error</code> used in the examples above.</p>
<h3 id="demand"><a class="header" href="#demand">Demand</a></h3>
<pre><code class="language-rust">impl&lt;'a&gt; Demand&lt;'a&gt; {
    /// Provide a value or other type with only static lifetimes.
    pub fn provide_value&lt;T, F&gt;(&amp;mut self, fulfil: F) -&gt; &amp;mut Self
    where
        T: 'static,
        F: FnOnce() -&gt; T,
    { ... }

    /// Provide a reference, note that the referee type must be bounded by `'static`, but may be unsized.
    pub fn provide_ref&lt;T: ?Sized + 'static&gt;(&amp;mut self, value: &amp;'a T) -&gt; &amp;mut Self { ... }
}</code></pre>
<p><code>Demand</code> is an object for provider types to provide data to be accessed. It is required because there must be somewhere for the data (or a reference to it) to exist.</p>
<p><code>provide_value</code> and <code>provide_ref</code> are convenience methods for the common cases of providing a temporary value and providing a reference to a field of <code>self</code>, respectively. <code>provide_value</code> takes a function to avoid unnecessary work when querying for data of a different type; <code>provide_ref</code> does not use a function since creating a reference is typically cheap.</p>
<h2 id="drawbacks"><a class="header" href="#drawbacks">Drawbacks</a></h2>
<p>There is some overlap in use cases with <code>Any</code>. It is sub-optimal for the standard library to include two systems with such similar functionality. However, I believe the new functionality is a complement to <code>any</code>, rather than an alternative: <code>any</code> supports type-hiding where the concrete type is chosen by the library, whereas with <code>Provider</code>, the library user chooses the concrete type.</p>
<p>This proposal is fairly complex, however, this is mitigated by restricting the exposed complexity to intermediate implementers or to users with advanced use cases. For many Rust programmers, they won’t even know the implementation exists, but will reap the benefits via more powerful error handling, etc.</p>
<h2 id="rationale-and-alternatives"><a class="header" href="#rationale-and-alternatives">Rationale and alternatives</a></h2>
<p>There are are few ways to do without the proposed feature: in some situations it might be possible to add concrete accessor methods to traits. A trait could implement generic member access based on a value identifier (i.e., name-driven rather than type driven), such a method would return a <code>dyn Any</code> trait object. Or a user could speculatively downcast a trait object to access its data.</p>
<p>Each of these approaches has significant downsides: adding methods to traits leads to a confusing API and is impractical in many situations (including for <code>Error</code>). Value-driven access only works with types which implement <code>Any</code>, that excludes types with lifetimes and unsized types; furthermore it requires the caller to downcast the result which is error-prone and fragile. Speculative downcasting violates the encapsulation of trait objects and is only possible if all implementers are known (again, not possible with <code>Error</code>).</p>
<p>The proposed API could live in its own crate, rather than in libcore. However, this would not be useful for <code>Error</code> (or other standard library types).</p>
<p>As in earlier drafts of this RFC, the proposed API could be in its own module (<code>provide_any</code>) rather than be part of <code>any</code>, either as a sibling or a child of <code>any</code>.</p>
<p>There are numerous ways to tweak the proposed API. The <code>dyno</code> and <code>object-provider</code> crates provide two such examples.</p>
<p>We could expose type tags (as used in the implementation of these APIs) to the user. However, whether to do so, and if so exactly how type tags should work (even the key abstractions) are open questions (see below for more discussion). Exposing type tags to the user makes for a much more flexible API (any type can be used if the user can write their own tags), but it requires the user to understand a somewhat subtle and complex abstraction. The API as currently presented is simpler.</p>
<h2 id="prior-art"><a class="header" href="#prior-art">Prior art</a></h2>
<p>Operations involving runtime types are intrinsically tied to the specifics of a language, its runtime, and type system. Therefore, there is not much prior art from other languages.</p>
<p>A closely related feature from other languages is reflection. However, reflective field access is usually name-driven rather than type-driven. Due to Rust’s architecture, general reflection is ‘impossible’.</p>
<p>In Rust, there are several approaches to the problem. This proposal is adapted from <a href="https://github.com/mystor/dyno/">dyno</a>; <a href="https://github.com/mystor/object-provider/">object provider</a> is a similar crate from the same author.</p>
<p>Some Rust error libraries provide roughly similar functionality. For example, <a href="https://github.com/dtolnay/anyhow">Anyhow</a> (and <a href="https://github.com/yaahc/eyre">Eyre</a>) allow adding context to errors in <code>Result</code>s, which can be accessed by downcasting the error object to the context object.</p>
<h2 id="unresolved-questions"><a class="header" href="#unresolved-questions">Unresolved questions</a></h2>
<p>Can we improve on the proposed API? Although we have iterated on the design extensively, there might be room for improvement either by general simplification, or making the most general cases using type tags more ergonomic.</p>
<p>As with any relatively abstract library, naming the concepts here is difficult. Are there better names? In particular, ‘demand’ (formerly ‘requisition’) is very generic.</p>
<p>Extending the API of <code>Error</code> is a primary motivation for this RFC, but those extensions are only sketched in the examples and implementation. What exactly should <code>Error</code>’s API look like?</p>
<p>It was suggested by @Plecra in the <a href="https://github.com/rust-lang/rfcs/pull/2895#issuecomment-735713486">comments</a> of RFC 2895, that this mechanism could be used for providing data from a future’s <code>Context</code> object. That is a more demanding application since it is likely to require <code>&amp;mut</code> references, objects with complex lifetimes, and possibly even closures to be returned. That had motivated seeking a general API, rather than only supporting references and values.</p>
<p>The implementation of the proposed API uses type tags. These are similar to the <code>Any</code> trait in that they allow up- and down-casting of types, however, they are fundamentally different in that the abstract trait is not implemented by the concrete type, but rather there is a separate type hierarchy of tags which are a representation of the type. This allows lifetimes to be accurately reflected in the abstract types, which is crucial for the sound implementation of this API. Exactly how these tags should be represented, however, is unresolved. There is one implementation in the <a href="https://github.com/nrc/provide-any">provide-any</a> repo, this is an adaption of <a href="https://github.com/mystor/dyno/">dyno</a>. @Plecra has proposed an <a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=262e0d299bdd4b8e38ac25faaa0b8887">alternative encoding</a>. There are probably others. Perhaps adding language features will allow still more. I expect this part of the implementation can be tweaked over time. The proposed API is designed to keep type tags fully encapsulated so that they can evolve without backwards compatibility risk.</p>
<h2 id="future-possibilities"><a class="header" href="#future-possibilities">Future possibilities</a></h2>
<p>Type tags (discussed above) are part of the implementation of this proposal. In the future, they could be exposed to the user to make a more flexible, general API. Even with this more flexible API, we would still want to keep the existing API for convenience.</p>
<p>The proposal only supports handling value types (or other types with only <code>'static</code> lifetimes) and reference types. We could also support mutable references fairly easily. Note, however, that this requires more methods than one might expect since providing mutable references requires a mutable reference to the provider, but for non-mutable references requiring a mutable provider is overly restrictive. Furthermore, providing multiple mutable references to different types requires extending the API of <code>Demand</code> in a non-trivial way (this is done in <a href="https://github.com/nrc/provide-any">provide-any</a> to demonstrate feasibility, thanks to @Plecra for the implementation). Therefore, I have not included handling of mutable references in this proposal, but we could easily add such support in the future.</p>
<h2 id="appendix-1-using-newtypes"><a class="header" href="#appendix-1-using-newtypes">Appendix 1: using newtypes</a></h2>
<p>One issue with using type-based provision is that an object might reasonably provide many different values with the same type. If the object intends to provide multiple values with the same type, then it must distinguish them. Even if it doesn’t, the user might request a value expecting one thing and get another with the same type, leading to logic errors (e.g., requesting a string from <code>MyError</code> expecting an error code and getting a suggestion message).</p>
<p>To address this, users should use specific newtypes to wrap more generic types. E.g., the <code>MyError</code> author could provide a <code>Suggestion</code> newtype: <code>pub struct Suggestion(pub String)</code>. A user would use <code>get_context::&lt;Suggestion&gt;()</code> (or otherwise specify the type, e.g., <code>let s: Suggestion = e.get_context().unwrap();</code>) and would receive a <code>Suggestion</code> which they would then  unpack to retrieve the string value.</p>
<h2 id="appendix-2-plugin-example"><a class="header" href="#appendix-2-plugin-example">Appendix 2: plugin example</a></h2>
<p>This appendix gives another example of the proposed API in action, this time for an intermediate trait which is not part of the standard library. The example is a systems with a plugin architecture where plugins extend <code>Provider</code> so that plugin authors can access arbitrary data in their plugins without having to downcast the plugins. In the example I show the plugin definition and a single plugin (<code>RulesFilter</code>), I assume these are in different crates. <code>RulesFilter</code> uses the provider API to give access to a statistics summary (produced on demand) and to give access to a borrowed slice of its rules.</p>
<pre><code class="language-rust">// Declared in an upstream crate.
pub trait Plugin: Provider { ... }

impl dyn Plugin {
    pub fn get_plugin_data&lt;T: 'static&gt;(&amp;self) -&gt; Option&lt;T&gt; {
        any::request_value(self)
    }

    pub fn borrow_plugin_data&lt;T: ?Sized + 'static&gt;(&amp;self) -&gt; Option&lt;&amp;T&gt; {
        any::request_ref(self)
    }
}

// Plugin definition for RulesFilter (downstream)
struct RulesFilter {
    rules: Vec&lt;Rule&gt;,
}

impl Plugin for RulesFilter { ... }

struct Statistics(String);

impl Provider for RulesFilter {
    fn provide&lt;'a&gt;(&amp;'a self, demand: &amp;mut Demand&lt;'a&gt;) {
        demand
            .provide_value(|| Statistics(format!(...)))
            .provide_ref::&lt;[Rule]&gt;(&amp;self.rules);
    }
}

fn log_plugin_stats(plugin: &amp;dyn Plugin) {
    if let Some(Statistics(s)) = plugin.get_plugin_data() {
        log(plugin.id(), s);
    }
}

fn log_active_rules(plugin: &amp;mut dyn Plugin) {
    if let Some(rules) = plugin.borrow_plugin_data::&lt;[Rule]&gt;() {
        for r in rules {
            log(plugin.id(), r);
        }
    }
}</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="3191-debugger-visualizer.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="3216-closure-lifetime-binder.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="3191-debugger-visualizer.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="3216-closure-lifetime-binder.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
