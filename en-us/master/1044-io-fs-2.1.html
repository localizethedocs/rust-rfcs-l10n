<!DOCTYPE HTML>
<html lang="en_US" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>1044-io-fs-2.1 - The Rust RFC Book</title>


        <!-- Custom HTML head -->
        <script type="text/javascript" src="ltd-provenance.js"></script>
        <script type="text/javascript" src="ltd-current.js"></script>
        <script type="text/javascript" src="../../ltd-config.js"></script>
        <script type="text/javascript" src="../../ltd-flyout.js"></script>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex-0060737d.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-5025baa3.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">The Rust RFC Book</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/rust-lang/rfcs" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <ul>
<li>Feature Name: <code>fs2</code></li>
<li>Start Date: 2015-04-04</li>
<li>RFC PR: <a href="https://github.com/rust-lang/rfcs/pull/1044">rust-lang/rfcs#1044</a></li>
<li>Rust Issue: <a href="https://github.com/rust-lang/rust/issues/24796">rust-lang/rust#24796</a></li>
</ul>
<h2 id="summary"><a class="header" href="#summary">Summary</a></h2>
<p>Expand the scope of the <code>std::fs</code> module by enhancing existing functionality,
exposing lower-level representations, and adding a few new functions.</p>
<h2 id="motivation"><a class="header" href="#motivation">Motivation</a></h2>
<p>The current <code>std::fs</code> module serves many of the basic needs of interacting with
a filesystem, but is missing a lot of useful functionality. For example, none of
these operations are possible in stable Rust today:</p>
<ul>
<li>Inspecting a file’s modification/access times</li>
<li>Reading low-level information like that contained in <code>libc::stat</code></li>
<li>Inspecting the unix permission bits on a file</li>
<li>Blanket setting the unix permission bits on a file</li>
<li>Leveraging <code>DirEntry</code> for the extra metadata it might contain</li>
<li>Reading the metadata of a symlink (not what it points at)</li>
<li>Resolving all symlink in a path</li>
</ul>
<p>There is some more functionality listed in the <a href="https://github.com/rust-lang/rfcs/issues/939">RFC issue</a>, but this RFC
will not attempt to solve the entirety of that issue at this time. This RFC
strives to expose APIs for much of the functionality listed above that is on the
track to becoming <code>#[stable]</code> soon.</p>
<h3 id="non-goals-of-this-rfc"><a class="header" href="#non-goals-of-this-rfc">Non-goals of this RFC</a></h3>
<p>There are a few areas of the <code>std::fs</code> API surface which are <strong>not</strong> considered
goals for this RFC. It will be left for future RFCs to add new APIs for these
areas:</p>
<ul>
<li>Enhancing <code>copy</code> to copy directories recursively or configuring how copying
happens.</li>
<li>Enhancing or stabilizing <code>walk</code> and its functionality.</li>
<li>Temporary files or directories</li>
</ul>
<h2 id="detailed-design"><a class="header" href="#detailed-design">Detailed design</a></h2>
<p>First, a vision for how lowering APIs in general will be presented, and then a
number of specific APIs will each be proposed. Many of the proposed APIs are
independent from one another and this RFC may not be implemented all-in-one-go
but instead piecemeal over time, allowing the designs to evolve slightly in the
meantime.</p>
<h3 id="lowering-apis"><a class="header" href="#lowering-apis">Lowering APIs</a></h3>
<h4 id="the-vision-for-the-os-module"><a class="header" href="#the-vision-for-the-os-module">The vision for the <code>os</code> module</a></h4>
<p>One of the principles of <a href="https://github.com/rust-lang/rfcs/blob/master/text/0517-io-os-reform.md#vision-for-io">IO reform</a> was to:</p>
<blockquote>
<p>Provide hooks for integrating with low-level and/or platform-specific APIs.</p>
</blockquote>
<p>The original RFC went into some amount of detail for how this would look, in
particular by use of the <code>os</code> module. Part of the goal of this RFC is to flesh
out that vision in more detail.</p>
<p>Ultimately, the organization of <code>os</code> is planned to look something like the
following:</p>
<pre><code>os
  unix          applicable to all cfg(unix) platforms; high- and low-level APIs
    io            extensions to std::io
    fs            extensions to std::fs
    net           extensions to std::net
    env           extensions to std::env
    process       extensions to std::process
    ...
  linux         applicable to linux only
    io, fs, net, env, process, ...
  macos         ...
  windows       ...
</code></pre>
<p>APIs whose behavior is platform-specific are provided only within the <code>std::os</code>
hierarchy, making it easy to audit for usage of such APIs.  Organizing the
platform modules internally in the same way as <code>std</code> makes it easy to find
relevant extensions when working with <code>std</code>.</p>
<p>It is emphatically <em>not</em> the goal of the <code>std::os::*</code> modules to provide
bindings to <em>all</em> system APIs for each platform; this work is left to external
crates. The goals are rather to:</p>
<ol>
<li>
<p>Facilitate interop between abstract types like <code>File</code> that <code>std</code> provides and
the underlying system. This is done via “lowering”: extension traits like
<a href="http://static.rust-lang.org/doc/master/std/os/unix/io/trait.AsRawFd.html"><code>AsRawFd</code></a> allow you to extract low-level, platform-specific
representations out of <code>std</code> types like <code>File</code> and <code>TcpStream</code>.</p>
</li>
<li>
<p>Provide high-level but platform-specific APIs that feel like those in the
rest of <code>std</code>. Just as with the rest of <code>std</code>, the goal here is not to
include all possible functionality, but rather the most commonly-used or
fundamental.</p>
</li>
</ol>
<p>Lowering makes it possible for external crates to provide APIs that work
“seamlessly” with <code>std</code> abstractions. For example, a crate for Linux might
provide an <code>epoll</code> facility that can work directly with <code>std::fs::File</code> and
<code>std::net::TcpStream</code> values, completely hiding the internal use of file
descriptors. Eventually, such a crate could even be merged into <code>std::os::unix</code>,
with minimal disruption – there is little distinction between <code>std</code> and other
crates in this regard.</p>
<p>Concretely, lowering has two ingredients:</p>
<ol>
<li>
<p>Introducing one or more “raw” types that are generally direct aliases for C
types (more on this in the next section).</p>
</li>
<li>
<p>Providing an extension trait that makes it possible to extract a raw type
from a <code>std</code> type. In some cases, it’s possible to go the other way around as
well. The conversion can be by reference or by value, where the latter is
used mainly to avoid the destructor associated with a <code>std</code> type (e.g. to
extract a file descriptor from a <code>File</code> and eliminate the <code>File</code> object,
without closing the file).</p>
</li>
</ol>
<p>While we do not seek to exhaustively bind types or APIs from the underlying
system, it <em>is</em> a goal to provide lowering operations for every high-level type
to a system-level data type, whenever applicable. This RFC proposes several such
lowerings that are currently missing from <code>std::fs</code>.</p>
<h5 id="stdosplatformraw"><a class="header" href="#stdosplatformraw"><code>std::os::platform::raw</code></a></h5>
<p>Each of the primitives in the standard library will expose the ability to be
lowered into its component abstraction, facilitating the need to define these
abstractions and organize them in the platform-specific modules. This RFC
proposes the following guidelines for doing so:</p>
<ul>
<li>Each platform will have a <code>raw</code> module inside of <code>std::os</code> which houses all of
its platform specific definitions.</li>
<li>Only type definitions will be contained in <code>raw</code> modules, no function
bindings, methods, or trait implementations.</li>
<li>Cross-platform types (e.g. those shared on all <code>unix</code> platforms) will be
located in the respective cross-platform module. Types which only differ in
the width of an integer type are considered to be cross-platform.</li>
<li>Platform-specific types will exist only in the <code>raw</code> module for that platform.
A platform-specific type may have different field names, components, or just
not exist on other platforms.</li>
</ul>
<p>Differences in integer widths are not considered to be enough of a platform
difference to define in each separate platform’s module, meaning that it will be
possible to write code that uses <code>os::unix</code> but doesn’t compile on all Unix
platforms. It is believed that most consumers of these types will continue to
store the same type (e.g. not assume it’s an <code>i32</code>) throughout the application
or immediately cast it to a known type.</p>
<p>To reiterate, it is not planned for each <code>raw</code> module to provide <em>exhaustive</em>
bindings to each platform. Only those abstractions which the standard library is
lowering into will be defined in each <code>raw</code> module.</p>
<h4 id="lowering-metadata-all-platforms"><a class="header" href="#lowering-metadata-all-platforms">Lowering <code>Metadata</code> (all platforms)</a></h4>
<p>Currently the <code>Metadata</code> structure exposes very few pieces of information about
a file. Some of this is because the information is not available across all
platforms, but some of it is also because the standard library does not have the
appropriate abstraction to return at this time (e.g. time stamps). The raw
contents of <code>Metadata</code> (a <code>stat</code> on Unix), however, should be accessible via
lowering no matter what.</p>
<p>The following trait hierarchy and new structures will be added to the standard
library.</p>
<pre><code class="language-rust">mod os::windows::fs {
    pub trait MetadataExt {
        fn file_attributes(&amp;self) -&gt; u32; // `dwFileAttributes` field
        fn creation_time(&amp;self) -&gt; u64; // `ftCreationTime` field
        fn last_access_time(&amp;self) -&gt; u64; // `ftLastAccessTime` field
        fn last_write_time(&amp;self) -&gt; u64; // `ftLastWriteTime` field
        fn file_size(&amp;self) -&gt; u64; // `nFileSizeHigh`/`nFileSizeLow` fields
    }
    impl MetadataExt for fs::Metadata { ... }
}

mod os::unix::fs {
    pub trait MetadataExt {
        fn as_raw(&amp;self) -&gt; &amp;Metadata;
    }
    impl MetadataExt for fs::Metadata { ... }

    pub struct Metadata(raw::stat);
    impl Metadata {
        // Accessors for fields available in `raw::stat` for *all* unix platforms
        fn dev(&amp;self) -&gt; raw::dev_t; // st_dev field
        fn ino(&amp;self) -&gt; raw::ino_t; // st_ino field
        fn mode(&amp;self) -&gt; raw::mode_t; // st_mode field
        fn nlink(&amp;self) -&gt; raw::nlink_t; // st_nlink field
        fn uid(&amp;self) -&gt; raw::uid_t; // st_uid field
        fn gid(&amp;self) -&gt; raw::gid_t; // st_gid field
        fn rdev(&amp;self) -&gt; raw::dev_t; // st_rdev field
        fn size(&amp;self) -&gt; raw::off_t; // st_size field
        fn blksize(&amp;self) -&gt; raw::blksize_t; // st_blksize field
        fn blocks(&amp;self) -&gt; raw::blkcnt_t; // st_blocks field
        fn atime(&amp;self) -&gt; (i64, i32); // st_atime field, (sec, nsec)
        fn mtime(&amp;self) -&gt; (i64, i32); // st_mtime field, (sec, nsec)
        fn ctime(&amp;self) -&gt; (i64, i32); // st_ctime field, (sec, nsec)
    }
}

// st_flags, st_gen, st_lspare, st_birthtim, st_qspare
mod os::{linux, macos, freebsd, ...}::fs {
    pub mod raw {
        pub type dev_t = ...;
        pub type ino_t = ...;
        // ...
        pub struct stat {
            // ... same public fields as libc::stat
        }
    }
    pub trait MetadataExt {
        fn as_raw_stat(&amp;self) -&gt; &amp;raw::stat;
    }
    impl MetadataExt for os::unix::fs::RawMetadata { ... }
    impl MetadataExt for fs::Metadata { ... }
}</code></pre>
<p>The goal of this hierarchy is to expose all of the information in the OS-level
metadata in as cross-platform of a method as possible while adhering to the
design principles of the standard library.</p>
<p>The interesting part about working in a “cross platform” manner here is that the
makeup of <code>libc::stat</code> on unix platforms can vary quite a bit between platforms.
For example some platforms have a <code>st_birthtim</code> field while others do not.
To enable as much ergonomic usage as possible, the <code>os::unix</code> module will expose
the <em>intersection</em> of metadata available in <code>libc::stat</code> across all unix
platforms. The information is still exposed in a raw fashion (in terms of the
values returned), but methods are required as the raw structure is not exposed.
The unix platforms then leverage the more fine-grained modules in <code>std::os</code>
(e.g. <code>linux</code> and <code>macos</code>) to return the raw <code>libc::stat</code> structure. This will
allow full access to the information in <code>libc::stat</code> in all platforms with clear
opt-in to when you’re using platform-specific information.</p>
<p>One of the major goals of the <code>os::unix::fs</code> design is to enable as much
functionality as possible when programming against “unix in general” while still
allowing applications to choose to only program against macos, for example.</p>
<h5 id="fate-of-metadataaccessed-modified"><a class="header" href="#fate-of-metadataaccessed-modified">Fate of <code>Metadata::{accessed, modified}</code></a></h5>
<p>At this time there is no suitable type in the standard library to represent the
return type of these two functions. The type would either have to be some form
of time stamp or moment in time, both of which are difficult abstractions to add
lightly.</p>
<p>Consequently, both of these functions will be <strong>deprecated</strong> in favor of
requiring platform-specific code to access the modification/access time of
files. This information is all available via the <code>MetadataExt</code> traits listed
above.</p>
<p>Eventually, once a <code>std</code> type for cross-platform timestamps is available, these
methods will be re-instated as returning that type.</p>
<h4 id="lowering-and-setting-permissions-unix"><a class="header" href="#lowering-and-setting-permissions-unix">Lowering and setting <code>Permissions</code> (Unix)</a></h4>
<blockquote>
<p><strong>Note</strong>: this section only describes behavior on unix.</p>
</blockquote>
<p>Currently there is no stable method of inspecting the permission bits on a file,
and it is unclear whether the current unstable methods of doing so,
<code>PermissionsExt::mode</code>, should be stabilized. The main question around this
piece of functionality is whether to provide a higher level abstraction (e.g.
similar to the <code>bitflags</code> crate) for the permission bits on unix.</p>
<p>This RFC proposes considering the methods for stabilization as-is and not
pursuing a higher level abstraction of the unix permission bits. To facilitate
in their inspection and manipulation, however, the following constants will be
added:</p>
<pre><code class="language-rust">mod os::unix::fs {
    pub const USER_READ: raw::mode_t;
    pub const USER_WRITE: raw::mode_t;
    pub const USER_EXECUTE: raw::mode_t;
    pub const USER_RWX: raw::mode_t;
    pub const OTHER_READ: raw::mode_t;
    pub const OTHER_WRITE: raw::mode_t;
    pub const OTHER_EXECUTE: raw::mode_t;
    pub const OTHER_RWX: raw::mode_t;
    pub const GROUP_READ: raw::mode_t;
    pub const GROUP_WRITE: raw::mode_t;
    pub const GROUP_EXECUTE: raw::mode_t;
    pub const GROUP_RWX: raw::mode_t;
    pub const ALL_READ: raw::mode_t;
    pub const ALL_WRITE: raw::mode_t;
    pub const ALL_EXECUTE: raw::mode_t;
    pub const ALL_RWX: raw::mode_t;
    pub const SETUID: raw::mode_t;
    pub const SETGID: raw::mode_t;
    pub const STICKY_BIT: raw::mode_t;
}</code></pre>
<p>Finally, the <code>set_permissions</code> function of the <code>std::fs</code> module is also proposed
to be marked <code>#[stable]</code> soon as a method of blanket setting permissions for a
file.</p>
<h3 id="constructing-permissions"><a class="header" href="#constructing-permissions">Constructing <code>Permissions</code></a></h3>
<p>Currently there is no method to construct an instance of <code>Permissions</code> on any
platform. This RFC proposes adding the following APIs:</p>
<pre><code class="language-rust">mod os::unix::fs {
    pub trait PermissionsExt {
        fn from_mode(mode: raw::mode_t) -&gt; Self;
    }
    impl PermissionsExt for Permissions { ... }
}</code></pre>
<p>This RFC does not propose yet adding a cross-platform way to construct a
<code>Permissions</code> structure due to the radical differences between how unix and
windows handle permissions.</p>
<h3 id="creating-directories-with-permissions"><a class="header" href="#creating-directories-with-permissions">Creating directories with permissions</a></h3>
<p>Currently the standard library does not expose an API which allows setting the
permission bits on unix or security attributes on Windows. This RFC proposes
adding the following API to <code>std::fs</code>:</p>
<pre><code class="language-rust">pub struct DirBuilder { ... }

impl DirBuilder {
    /// Creates a new set of options with default mode/security settings for all
    /// platforms and also non-recursive.
    pub fn new() -&gt; Self;

    /// Indicate that directories create should be created recursively, creating
    /// all parent directories if they do not exist with the same security and
    /// permissions settings.
    pub fn recursive(&amp;mut self, recursive: bool) -&gt; &amp;mut Self;

    /// Create the specified directory with the options configured in this
    /// builder.
    pub fn create&lt;P: AsRef&lt;Path&gt;&gt;(&amp;self, path: P) -&gt; io::Result&lt;()&gt;;
}

mod os::unix::fs {
    pub trait DirBuilderExt {
        fn mode(&amp;mut self, mode: raw::mode_t) -&gt; &amp;mut Self;
    }
    impl DirBuilderExt for DirBuilder { ... }
}

mod os::windows::fs {
    // once a `SECURITY_ATTRIBUTES` abstraction exists, this will be added
    pub trait DirBuilderExt {
        fn security_attributes(&amp;mut self, ...) -&gt; &amp;mut Self;
    }
    impl DirBuilderExt for DirBuilder { ... }
}</code></pre>
<p>This sort of builder is also extendable to other flavors of functions in the
future, such as <a href="http://en.cppreference.com/w/cpp/experimental/fs/create_directory">C++’s template parameter</a>:</p>
<pre><code class="language-rust">/// Use the specified directory as a "template" for permissions and security
/// settings of the new directories to be created.
///
/// On unix this will issue a `stat` of the specified directory and new
/// directories will be created with the same permission bits. On Windows
/// this will trigger the use of the `CreateDirectoryEx` function.
pub fn template&lt;P: AsRef&lt;Path&gt;&gt;(&amp;mut self, path: P) -&gt; &amp;mut Self;</code></pre>
<p>At this time, however, it is not proposed to add this method to
<code>DirBuilder</code>.</p>
<h3 id="adding-filetype"><a class="header" href="#adding-filetype">Adding <code>FileType</code></a></h3>
<p>Currently there is no enumeration or newtype representing a list of “file types”
on the local filesystem. This is partly done because the need is not so high
right now. Some situations, however, imply that it is more efficient to learn
the file type at once instead of testing for each individual file type itself.</p>
<p>For example some platforms’ <code>DirEntry</code> type can know the <code>FileType</code> without an
extra syscall. If code were to test a <code>DirEntry</code> separately for whether it’s a
file or a directory, it may issue more syscalls necessary than if it instead
learned the type and then tested that if it was a file or directory.</p>
<p>The full set of file types, however, is not always known nor portable across
platforms, so this RFC proposes the following hierarchy:</p>
<pre><code class="language-rust">#[derive(Copy, Clone, PartialEq, Eq, Hash)]
pub struct FileType(..);

impl FileType {
    pub fn is_dir(&amp;self) -&gt; bool;
    pub fn is_file(&amp;self) -&gt; bool;
    pub fn is_symlink(&amp;self) -&gt; bool;
}</code></pre>
<p>Extension traits can be added in the future for testing for other more flavorful
kinds of files on various platforms (such as unix sockets on unix platforms).</p>
<h5 id="dealing-with-is_filedir-and-file_type-methods"><a class="header" href="#dealing-with-is_filedir-and-file_type-methods">Dealing with <code>is_{file,dir}</code> and <code>file_type</code> methods</a></h5>
<p>Currently the <code>fs::Metadata</code> structure exposes stable <code>is_file</code> and <code>is_dir</code>
accessors. The struct will also grow a <code>file_type</code> accessor for this newtype
struct being added. It is proposed that <code>Metadata</code> will retain the
<code>is_{file,dir}</code> convenience methods, but no other “file type testers” will be
added.</p>
<h3 id="enhancing-symlink-support"><a class="header" href="#enhancing-symlink-support">Enhancing symlink support</a></h3>
<p>Currently the <code>std::fs</code> module provides a <code>soft_link</code> and <code>read_link</code> function,
but there is no method of doing other symlink related tasks such as:</p>
<ul>
<li>Testing whether a file is a symlink</li>
<li>Reading the metadata of a symlink, not what it points to</li>
</ul>
<p>The following APIs will be added to <code>std::fs</code>:</p>
<pre><code class="language-rust">/// Returns the metadata of the file pointed to by `p`, and this function,
/// unlike `metadata` will **not** follow symlinks.
pub fn symlink_metadata&lt;P: AsRef&lt;Path&gt;&gt;(p: P) -&gt; io::Result&lt;Metadata&gt;;</code></pre>
<h3 id="binding-realpath"><a class="header" href="#binding-realpath">Binding <code>realpath</code></a></h3>
<p>There’s a <a href="https://github.com/rust-lang/rust/issues/11857">long-standing issue</a> that the unix function <code>realpath</code> is
not bound, and this RFC proposes adding the following API to the <code>fs</code> module:</p>
<pre><code class="language-rust">/// Canonicalizes the given file name to an absolute path with all `..`, `.`,
/// and symlink components resolved.
///
/// On unix this function corresponds to the return value of the `realpath`
/// function, and on Windows this corresponds to the `GetFullPathName` function.
///
/// Note that relative paths given to this function will use the current working
/// directory as a base, and the current working directory is not managed in a
/// thread-local fashion, so this function may need to be synchronized with
/// other calls to `env::change_dir`.
pub fn canonicalize&lt;P: AsRef&lt;Path&gt;&gt;(p: P) -&gt; io::Result&lt;PathBuf&gt;;</code></pre>
<h3 id="tweaking-pathext"><a class="header" href="#tweaking-pathext">Tweaking <code>PathExt</code></a></h3>
<p>Currently the <code>PathExt</code> trait is unstable, yet it is quite convenient! The main
motivation for its <code>#[unstable]</code> tag is that it is unclear how much
functionality should be on <code>PathExt</code> versus the <code>std::fs</code> module itself.
Currently a small subset of functionality is offered, but it is unclear what the
guiding principle for the contents of this trait are.</p>
<p>This RFC proposes a few guiding principles for this trait:</p>
<ul>
<li>
<p>Only read-only operations in <code>std::fs</code> will be exposed on <code>PathExt</code>. All
operations which require modifications to the filesystem will require calling
methods through <code>std::fs</code> itself.</p>
</li>
<li>
<p>Some inspection methods on <code>Metadata</code> will be exposed on <code>PathExt</code>, but only
those where it logically makes sense for <code>Path</code> to be the <code>self</code> receiver. For
example <code>PathExt::len</code> will not exist (size of the file), but
<code>PathExt::is_dir</code> will exist.</p>
</li>
</ul>
<p>Concretely, the <code>PathExt</code> trait will be expanded to:</p>
<pre><code class="language-rust">pub trait PathExt {
    fn exists(&amp;self) -&gt; bool;
    fn is_dir(&amp;self) -&gt; bool;
    fn is_file(&amp;self) -&gt; bool;
    fn metadata(&amp;self) -&gt; io::Result&lt;Metadata&gt;;
    fn symlink_metadata(&amp;self) -&gt; io::Result&lt;Metadata&gt;;
    fn canonicalize(&amp;self) -&gt; io::Result&lt;PathBuf&gt;;
    fn read_link(&amp;self) -&gt; io::Result&lt;PathBuf&gt;;
    fn read_dir(&amp;self) -&gt; io::Result&lt;ReadDir&gt;;
}

impl PathExt for Path { ... }</code></pre>
<h3 id="expanding-direntry"><a class="header" href="#expanding-direntry">Expanding <code>DirEntry</code></a></h3>
<p>Currently the <code>DirEntry</code> API is quite minimalistic, exposing very few of the
underlying attributes. Platforms like Windows actually contain an entire
<code>Metadata</code> inside of a <code>DirEntry</code>, enabling much more efficient walking of
directories in some situations.</p>
<p>The following APIs will be added to <code>DirEntry</code>:</p>
<pre><code class="language-rust">impl DirEntry {
    /// This function will return the filesystem metadata for this directory
    /// entry. This is equivalent to calling `fs::symlink_metadata` on the
    /// path returned.
    ///
    /// On Windows this function will always return `Ok` and will not issue a
    /// system call, but on unix this will always issue a call to `stat` to
    /// return metadata.
    pub fn metadata(&amp;self) -&gt; io::Result&lt;Metadata&gt;;

    /// Return what file type this `DirEntry` contains.
    ///
    /// On some platforms this may not require reading the metadata of the
    /// underlying file from the filesystem, but on other platforms it may be
    /// required to do so.
    pub fn file_type(&amp;self) -&gt; io::Result&lt;FileType&gt;;

    /// Returns the file name for this directory entry.
    pub fn file_name(&amp;self) -&gt; OsString;
}

mod os::unix::fs {
    pub trait DirEntryExt {
        fn ino(&amp;self) -&gt; raw::ino_t; // read the d_ino field
    }
    impl DirEntryExt for fs::DirEntry { ... }
}</code></pre>
<h2 id="drawbacks"><a class="header" href="#drawbacks">Drawbacks</a></h2>
<ul>
<li>
<p>This is quite a bit of surface area being added to the <code>std::fs</code> API, and it
may perhaps be best to scale it back and add it in a more incremental fashion
instead of all at once. Most of it, however, is fairly straightforward, so it
seems prudent to schedule many of these features for the 1.1 release.</p>
</li>
<li>
<p>Exposing raw information such as <code>libc::stat</code> or <code>WIN32_FILE_ATTRIBUTE_DATA</code>
possibly can hamstring altering the implementation in the future. At this
point, however, it seems unlikely that the exposed pieces of information will
be changing much.</p>
</li>
</ul>
<h2 id="alternatives"><a class="header" href="#alternatives">Alternatives</a></h2>
<ul>
<li>
<p>Instead of exposing accessor methods in <code>MetadataExt</code> on Windows, the raw
<code>WIN32_FILE_ATTRIBUTE_DATA</code> could be returned. We may change, however, to
using <code>BY_HANDLE_FILE_INFORMATION</code> one day which would make the return value
from this function more difficult to implement.</p>
</li>
<li>
<p>A <code>std::os::MetadataExt</code> trait could be added to access truly common
information such as modification/access times across all platforms. The return
value would likely be a <code>u64</code> “something” and would be clearly documented as
being a lossy abstraction and also only having a platform-specific meaning.</p>
</li>
<li>
<p>The <code>PathExt</code> trait could perhaps be implemented on <code>DirEntry</code>, but it doesn’t
necessarily seem appropriate for all the methods and using inherent methods
also seems more logical.</p>
</li>
</ul>
<h2 id="unresolved-questions"><a class="header" href="#unresolved-questions">Unresolved questions</a></h2>
<ul>
<li>What is the ultimate role of crates like <code>liblibc</code>, and how do we draw the
line between them and <code>std::os</code> definitions?</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="1040-duration-reform.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="1047-socket-timeouts.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="1040-duration-reform.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="1047-socket-timeouts.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
