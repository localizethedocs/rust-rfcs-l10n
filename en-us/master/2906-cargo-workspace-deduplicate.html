<!DOCTYPE HTML>
<html lang="en_US" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>2906-cargo-workspace-deduplicate - The Rust RFC Book</title>


        <!-- Custom HTML head -->
        <script type="text/javascript" src="ltd-provenance.js"></script>
        <script type="text/javascript" src="ltd-current.js"></script>
        <script type="text/javascript" src="../../ltd-config.js"></script>
        <script type="text/javascript" src="../../ltd-flyout.js"></script>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex-0060737d.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-5025baa3.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">The Rust RFC Book</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/rust-lang/rfcs" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <ul>
<li>Feature Name: <code>workspace-deduplicate</code></li>
<li>Start Date: 2020-04-13</li>
<li>RFC PR: <a href="https://github.com/rust-lang/rfcs/pull/2906">rust-lang/rfcs#2906</a></li>
<li>Rust Issue: <a href="https://github.com/rust-lang/cargo/issues/8415">rust-lang/cargo#8415</a></li>
</ul>
<blockquote>
<p><strong>Note</strong>: This feature was stabilized in Rust 1.64. Several design changes were made in the course of the implementation. Please see the documentation for <a href="https://doc.rust-lang.org/nightly/cargo/reference/workspaces.html#the-package-table"><code>[workspace.package]</code></a> and <a href="https://doc.rust-lang.org/nightly/cargo/reference/workspaces.html#the-dependencies-table"><code>[workspace.dependencies]</code></a> for details on how to use this feature.</p>
</blockquote>
<h2 id="summary"><a class="header" href="#summary">Summary</a></h2>
<p>Deduplicate common dependency and metadata directives amongst a set of workspace
crates in Cargo with extensions to the <code>[workspace]</code> section in <code>Cargo.toml</code>.</p>
<h2 id="motivation"><a class="header" href="#motivation">Motivation</a></h2>
<p>Cargo has supported workspaces for quite some time now but when managing a large
workspace there is often a good deal of redundancy between member crates in a
workspace. Currently this proposal attempts to tackle a few major areas of
duplication. Many of these areas of duplication are managed either manually or
with scripts, and the goal of this proposal is to largely eliminate the need for
scripts and also the need to manually manage so much.</p>
<h3 id="duplication-of-dependencies-sections"><a class="header" href="#duplication-of-dependencies-sections">Duplication of <code>[dependencies]</code> sections</a></h3>
<p>Often when managing a workspace you’ll have a lot of crates that all depend on
the same crate. For example many of your crates may depend on <code>log</code>. Today you
must write down the same <code>log</code> directive in all your manifests:</p>
<pre><code class="language-toml">[dependencies]
log = "0.3.1"
</code></pre>
<p>Depending on how many crates you’re working on, that’s a lot of times to
remember <code>0.3.1</code>! Additionally if you’d like to update this dependency, say if a
<code>1.0.0</code> release is made, you need to edit every single <code>Cargo.toml</code> to make sure
they all stay in sync. This is a lot of duplicated work!</p>
<p>This duplication gets even worse when you start modifying the features of each
crate. For example:</p>
<pre><code class="language-toml">[dependencies]
log = { version = "0.3.1", features = ['release_max_level_warn'] }
</code></pre>
<p>If you wanted to consistently write this across many crates it can get quite
cumbersome quite quickly.</p>
<h3 id="duplication-in-inter-dependent-crates"><a class="header" href="#duplication-in-inter-dependent-crates">Duplication in inter-dependent crates</a></h3>
<p>When managing a workspace you’ll often have a lot workspace members that all
depend on each other. The “blessed” way to do this is actually quite verbose:</p>
<pre><code class="language-toml">[dependencies]
other-workspace-member = { path = "../other-member", version = "0.2.3" }
</code></pre>
<p>Here you need to specify <em>both</em> <code>path</code> and <code>version</code>. Using <code>path</code> means that
you’re depending on exactly that copy on the local filesystem. This also means
that if you depend on any workspace member via a <code>git</code> dependency later on it’ll
correctly pull in the other workspace members from the git repo. (note that some
projects use <code>[patch]</code> to only write down <code>other-workspace-member = "0.2.3"</code> but
this causes issues when crates later use git dependencies)</p>
<p>If you never publish to crates.io, <code>path</code> is all you need. If crates eventually
get published, though, they also need a <code>version</code> directive to know what version
from crates.io you’ll be depending on after the publication.</p>
<p>Naturally, with a highly-interconnected workspace which may be relatively large,
this leads to a lot of duplication very quickly. This is a lot of <code>path</code> and
<code>version</code> directives that you’ve got to manage.</p>
<h3 id="duplication-in-crate-versions"><a class="header" href="#duplication-in-crate-versions">Duplication in crate versions</a></h3>
<p>A frequent pattern in Cargo workspaces which publish to crates.io is to have all
the crate at the same semver version. These crates all move in lockstep during
publication and get bumped at the same time.</p>
<p>While a minor papercut this basically means that anyone and everyone who has a
workspace of a lot of crates makes their own homebrew script for updating
versions and managing updates/publications. It’d be quite convenient if we could
standardize across the Rust ecosystem how to manage this information!</p>
<h3 id="duplication-in-crate-metadata"><a class="header" href="#duplication-in-crate-metadata">Duplication in crate metadata</a></h3>
<p>The last primary area of duplication that this proposal attempts to tackle is in
crate metadata in the <code>[package]</code> section. This includes items such as:</p>
<pre><code class="language-toml">[package]
authors = []
license = "..."
repository = "..."
documentation = "..."
</code></pre>
<p>These metadata directives are often duplicated amongst all crates, especially
author/license/repository information. This is a pretty poor experience if you’e
got to keep writing down the information in so many places!</p>
<h2 id="guide-level-explanation"><a class="header" href="#guide-level-explanation">Guide-level explanation</a></h2>
<p>Cargo’s manifest parsing will be updated with new features to support
deduplicating each of the areas above. While all of these new features are
pretty small in their own right, they all add up to greatly reducing the
overhead of managing a workspace of many crates. The list of new features in
Cargo will look like the following:</p>
<h3 id="workspace-level-dependencies"><a class="header" href="#workspace-level-dependencies">Workspace-level Dependencies</a></h3>
<p>The <code>[workspace]</code> section can now have a <code>dependencies</code> section which works the
same way as the <code>[dependencies]</code> section in <code>Cargo.toml</code>:</p>
<pre><code class="language-toml"># in workspace's Cargo.toml
[workspace.dependencies]
log = "0.3.1"
log2 = { version = "2.0.0", package = "log" }
serde = { git = 'https://github.com/serde-rs/serde' }
wasm-bindgen-cli = { path = "crates/cli" }
</code></pre>
<p>Each workspace member can then reference this section in the workspace with a
new dependency directive:</p>
<pre><code class="language-toml"># in a workspace member's Cargo.toml
[dependencies]
log = { workspace = true }
</code></pre>
<p>This directive indicates that the <code>log</code> dependency should be looked up from
<code>workspace.dependencies</code> in the workspace root. You can reference any name
defined in <code>[workspace.dependencies]</code> too:</p>
<pre><code class="language-toml">[dependencies]
log2 = { workspace = true }
</code></pre>
<h3 id="no-longer-need-both-version-and-path-to-publish-to-cratesio"><a class="header" href="#no-longer-need-both-version-and-path-to-publish-to-cratesio">No longer need both <code>version</code> and <code>path</code> to publish to Crates.io</a></h3>
<p>When you have a <code>path</code> dependency, Cargo’s current behavior on publication looks
like this:</p>
<ul>
<li>If you have a <code>version</code> specifier as well, then the <code>path</code> key is deleted and
the crate is uploaded with the specified <code>version</code> as a dependency
requirement.</li>
<li>If you don’t have a <code>version</code> specifier, then the dependency directive is
deleted and crates.io will not learn about this dependency. This is only
really useful for <code>dev-dependencies</code>.</li>
</ul>
<p>Cargo’s behavior will change in this second case, instead following new logic
for a missing <code>version</code> specifier. For dev-dependencies where the referenced
package is <code>publish = false</code>, then the dependency will be dropped. Otherwise
Cargo will assume that <code>version = "$dependency_version"</code> was specified, meaning
that it requires at least the current version and otherwise any
semver-compatible version.</p>
<p>This behavior should mean that you no longer need to write <code>version = "..."</code>
with <code>path</code> dependencies if you publish to crates.io. Coupled with the
workspace-level dependencies above this means you never have to write the
version of a path dependency anywhere!</p>
<h3 id="package-metadata-can-reference-other-workspace-members"><a class="header" href="#package-metadata-can-reference-other-workspace-members">Package metadata can reference other workspace members</a></h3>
<p>To deduplicate <code>[package]</code> directives in <code>Cargo.toml</code> workspace members, Cargo
will now support declaring that metadata directives should be inherited from the
workspace. For example to version every package the same within a workspace you
can specify:</p>
<pre><code class="language-toml">[package]
name = "foo"
version = { workspace = true }
</code></pre>
<p>This directive tells Cargo that the version of <code>foo</code> is the same as the
<code>workspace.version</code> directive found in the workspace manifest. This means that
in addition to a new <code>[workspace.dependencies]</code> section, package metadata keys
can now also be defined inside of a <code>[workspace]</code> section:</p>
<pre><code class="language-toml">[workspace]
version = "0.25.2"
</code></pre>
<p>Many other package metadata attributes are supported as well</p>
<pre><code class="language-toml">[package]
authors = { workspace = true }
license = { workspace = true }
</code></pre>
<h2 id="reference-level-explanation"><a class="header" href="#reference-level-explanation">Reference-level explanation</a></h2>
<p>Cargo’s <code>[workspace]</code> section will first be extended with a few new attributes.
Like before the <code>[workspace]</code> table can only appear in a workspace root, not in
any other manifests. Additionally the <code>[workspace]</code> table doesn’t have to be
associated with a package, it could be part of a virtual manifest.</p>
<h3 id="updates-to-workspace"><a class="header" href="#updates-to-workspace">Updates to <code>[workspace]</code></a></h3>
<p>The first addition to the <code>[workspace]</code> table is a <code>dependencies</code> sub-table,
like so:</p>
<pre><code class="language-toml">[workspace.dependencies]
foo = "0.1"
</code></pre>
<p>The <code>dependencies</code> sub-table has the same form as the <code>[dependencies]</code> table in
manifests with a few exceptions:</p>
<ul>
<li>Dependencies cannot be declared as <code>optional</code>. The <code>optional</code> key must be
omitted or, if present, must be <code>false</code>.</li>
<li>The <code>workspace</code> key (defined later in this proposal) is not allowed.</li>
</ul>
<p>The <code>[workspace]</code> table will not support other kinds of dependencies like
<code>dev-dependencies</code>, <code>build-dependencies</code>, or <code>target."...".dependencies</code>.  Only
<code>[workspace.dependencies]</code> will be supported.</p>
<p>To review, the <code>[workspace.dependencies]</code> table will be key/value pairs. Each
key is the name of a dependency while the dependency is a dependency directive.
This could be a string meaning a crates.io dependency or a table which further
configures the dependency.</p>
<p>Dependencies declared in <code>[workspace.dependencies]</code> have no meaning as-is. They
do not affect the build nor do they force packages to depend on those
dependencies. This part comes later below.</p>
<p>The <code>[workspace]</code> section will also allow the definition of a number of keys
also defined in <code>[package]</code> today, namely:</p>
<pre><code class="language-toml">[workspace]
version = "1.2.3"
authors = ["Nice Folks"]
description = "..."
documentation = "https://example.github.io/example"
readme = "README.md"
homepage = "https://example.com"
repository = "https://github.com/example/example"
license = "MIT"
license-file = "./LICENSE"
keywords = ["cli"]
categories = ["development-tools"]
publish = false
edition = "2018"

[workspace.badges]
# ...
</code></pre>
<p>Each of these keys have no meaning in a <code>[workspace]</code> table yet, but will have
meaning when they’re assigned to crates internally. That part comes later though
in this design! Note that the format and accepted values for these keys are the
same as the <code>[package]</code> section of <code>Cargo.toml</code>.</p>
<p>For now the <code>metadata</code> key is explicitly left out (due to complications around
merging table values), but it can always be added in the future if necessary.</p>
<h3 id="updates-to-a-package-cargotoml"><a class="header" href="#updates-to-a-package-cargotoml">Updates to a package <code>Cargo.toml</code></a></h3>
<p>The interpretation of a <code>Cargo.toml</code> manifest within Cargo will now require a
<code>Workspace</code> object to be created. This <code>Workspace</code> will be used to elaborate and
expand each member’s <code>Cargo.toml</code> directive. Additionally <code>Cargo.toml</code> will
syntactically accept some more forms.</p>
<h4 id="placeholder-values"><a class="header" href="#placeholder-values">Placeholder Values</a></h4>
<p>Previously package metadata values must be declared explicitly in each
<code>Cargo.toml</code>:</p>
<pre><code class="language-toml">[package]
version = "1.2.3"
</code></pre>
<p>Cargo will now accept a table definition of <code>package.$key</code> which defines the
<code>package.$key.workspace</code> key as a boolean. For example you can specify:</p>
<pre><code class="language-toml">[package]
name = "foo"
license = { workspace = true }
</code></pre>
<p>This directive indicates that the license of <code>foo</code> is the same as
<code>workspace.license</code>. If <code>workspace.license</code> isn’t defined then this generates an
error.</p>
<p>The following keys in <code>[package]</code> can be inherited from <code>[workspace]</code> with the
new <code>workspace = true</code> directive.</p>
<pre><code class="language-toml">[package]
version = { workspace = true }
authors = { workspace = true }
description = { workspace = true }
documentation = { workspace = true }
readme = { workspace = true }
homepage = { workspace = true }
repository = { workspace = true }
license = { workspace = true }
license-file = { workspace = true }
keywords = { workspace = true }
categories = { workspace = true }
publish = { workspace = true }
</code></pre>
<p>Note that directives like <code>license-file</code> are resolved relative to their
definition, so <code>license-file</code> is relative to the <code>[workspace]</code> section that
defined it.</p>
<h4 id="new-dependency-directives"><a class="header" href="#new-dependency-directives">New dependency directives</a></h4>
<p>Dependencies in the <code>[dependencies]</code>, <code>[dev-dependencies]</code>,
<code>[build-dependencies]</code>, and <code>[target."...".dependencies]</code> sections will support
the ability to reference the <code>[workspace.dependencies]</code> definition of
dependencies. This is done with a new <code>workspace</code> key in the dependency
directive. An example of this looks like:</p>
<pre><code class="language-toml">[dependencies]
log = { workspace = true }
</code></pre>
<p>The <code>workspace</code> key cannot be defined with other keys that configure the source
of the dependency. This means you cannot define <code>workspace</code> with keys like
<code>version</code>, <code>registry</code>, <code>registry-index</code>, <code>path</code>, <code>git</code>, <code>branch</code>, <code>tag</code>, <code>rev</code>,
or <code>package</code>. The <code>workspace</code> key can be combined with other keys, however:</p>
<ul>
<li>
<p><code>optional</code> - this introduces an optional dependency as usual, as well as a
feature named after the key (left hand side) of the dependency directive).
Note that the <code>[workspace.dependencies]</code> table is not allowed to specify
<code>optional</code>.</p>
</li>
<li>
<p><code>features</code> - this indicates, as usual, that extra features are being enabled
over the already-enabled features in the directive found in
<code>[workspace.dependencies]</code>. The result set of enabled features is the union of
the features specified inline with the features specified in the directive in
the workspace table.</p>
</li>
</ul>
<p>For now if a <code>workspace = true</code> dependency is specified then also specifying the
<code>default-features</code> value is disallowed. The <code>default-features</code> value for a
directive is inherited from the <code>[workspace.dependencies]</code> declaration, which
defaults to <code>true</code> if nothing else is specified.</p>
<h4 id="path-dependencies-infer-version-directive"><a class="header" href="#path-dependencies-infer-version-directive">Path dependencies infer <code>version</code> directive</a></h4>
<p>As a final change to <code>Cargo.toml</code>, dependencies using the <code>path</code> directive and
not specifying a <code>version</code> directive will have the <code>version</code> directive inferred.</p>
<p>For example if we have:</p>
<pre><code class="language-toml"># foo/Cargo.toml
[dependencies]
bar = { path = "../bar" }
</code></pre>
<p>as well as</p>
<pre><code class="language-toml"># bar/Cargo.toml
[package]
name = "bar"
version = "1.0.1"
</code></pre>
<p>this is equivalent in <code>foo/Cargo.toml</code> to as if this were written:</p>
<pre><code class="language-toml"># foo/Cargo.toml
[dependencies]
bar = { path = "../bar", version = "1.0.1" }
</code></pre>
<p>The <code>version</code> key for <code>path</code> dependencies, if not specified, will be inferred to
the version of the path dependency itself. Note that this is a version
requirement not an actual semver version, and the version requirement will be
interpreted as “at least the current version, and anything semver compatible
with it”.</p>
<p>This logic of inferring, however, will also respect the <code>publish</code> key. For
example if we had this instead:</p>
<pre><code class="language-toml"># bar/Cargo.toml
[package]
name = "bar"
version = "1.0.1"
publish = false
</code></pre>
<p>then Cargo would not alter this dependency directive:</p>
<pre><code class="language-toml"># foo/Cargo.toml
[dependencies]
bar = { path = "../bar" }
</code></pre>
<h3 id="effect-on-cargo-publish"><a class="header" href="#effect-on-cargo-publish">Effect on <code>cargo publish</code></a></h3>
<p>Cargo currently already “elaborates” the manifest during publication. For
example it removes <code>path</code> keys in dependency lists to only have the version
requirement pointing to crates.io. During publication Cargo will also elaborate
any substituted information from the <code>[workspace]</code>, because <code>[workspace]</code> is
also removed during publication!</p>
<p>This means that <code>workspace = true</code> will never be present in <code>Cargo.toml</code> files
published to crates.io, and additionally no information about <code>workspace = true</code>
will make its way to the registry index. Furthermore metadata fields like
<code>package.repository</code> will be filled in and will be present on crates.io’s UI.</p>
<p>Put another way, <code>Cargo.toml</code> files published to crates.io, or metadata found
through crates.io, won’t change from what they are today.</p>
<h3 id="effect-on-cargolock"><a class="header" href="#effect-on-cargolock">Effect on <code>Cargo.lock</code></a></h3>
<p>When creating a <code>Cargo.lock</code> file Cargo will perform crate resolution as-if all
dependencies in <code>[workspace.dependencies]</code> are depended on by some crate, even
if no crate actually references an entry in <code>[workspace.dependencies]</code>. This
means that if a crate uses an entry in <code>[workspace.dependencies]</code> it’s
guaranteed to have an entry in the lock file indicating what its dependencies
should be.</p>
<p>Note that for entries in <code>[workspace.dependencies]</code> which aren’t used by any
crates in the workspace will likely trigger a warning, however, so users can
continue to prune accidentally unused entries.</p>
<h3 id="effect-on-cargo-metadata"><a class="header" href="#effect-on-cargo-metadata">Effect on <code>cargo metadata</code></a></h3>
<p>Executing <code>cargo metadata</code> to learn about a crate graph will implicitly perform
all substitution defined in this proposal. Consumers of <code>cargo metadata</code> will
continue to get the same output they got before this proposal, meaning that
implicit substitutions, if any, will be invisible to users of <code>cargo metadata</code>.</p>
<h3 id="effect-on-cargo-read-manifest"><a class="header" href="#effect-on-cargo-read-manifest">Effect on <code>cargo read-manifest</code></a></h3>
<p>Similar to <code>cargo metadata</code>, the <code>cargo read-manifest</code> command will perform all
necessary substitutions when presenting the output as JSON.</p>
<h3 id="effect-resolution-for-relative-path-dependencies"><a class="header" href="#effect-resolution-for-relative-path-dependencies">Effect resolution for relative <code>path</code> dependencies</a></h3>
<p>Like today, <code>path</code> dependencies will be resolved relative to the file that
defines them. This means that references to dependencies defined in the
workspace means paths are still relative to the workspace root itself.</p>
<p>For example if you write down a <code>[workspace.dependencies]</code> directive with a
relative path:</p>
<pre><code class="language-toml"># Cargo.toml
[workspace.dependencies]
my-crate = { path = "crates/my-crate" }
</code></pre>
<p>And then you reference this in another crate:</p>
<pre><code class="language-toml"># crates/other-crate/Cargo.toml
[dependencies]
my-crate = { workspace = true }
</code></pre>
<p>then the <code>my-crate</code> dependency references the crate located at <code>crates/my-crate</code>
relative to the workspace root, not located at
<code>crates/other-crate/crates/my-crate</code>.</p>
<h2 id="drawbacks"><a class="header" href="#drawbacks">Drawbacks</a></h2>
<p>This proposal significantly complicates the process of interpreting a
<code>Cargo.toml</code>. One of the major purposes of using TOML to specify a crate
manifest was to make it easy for other tools to parse Cargo manifests and work
with them. This not only includes Rust-based tools but also tools in other
languages if necessary. Previously a TOML parser for your language was all you
really needed, but this proposal is adding a layer of indirection on top of TOML
where you have to interpret multiple manifests to figure out what one means. For
example you can no longer quickly and easily be guaranteed to parse the version
of a package, but you might have to go find the workspace root or other crates
to figure that out. Workspace discovery and membership is pretty nontrivial so
non-Cargo based tools will have a difficult time <em>not</em> using Cargo to figure out
a full elaborated form of a manifest 100% of the time.</p>
<p>This proposal also extends <code>Cargo.toml</code> with changes that will break any
existing tools which assume a particular format of <code>Cargo.toml</code>. For example if
a tool expects <code>package.version</code> to be a <code>String</code> that runs a risk of being
broken in the future due to the ability to specify a table there instead.</p>
<p>Additionally this proposal complicates a reader’s understanding of <code>Cargo.toml</code>.
While verbose for maintainers having duplication of information is actually
quite nice for readers of <code>Cargo.toml</code> because you don’t have to chase anything
else down to figure out what a dependency is. If this proposal is implemented
then whenever you see <code>foo = { workspace = true }</code> you’ve got to go consult
something else to figure out what the dependency actually is. This layer of
indirection can cause surprise for readers or otherwise add a speed-bump to
understanding the contents of a manifest.</p>
<h2 id="rationale-and-alternatives"><a class="header" href="#rationale-and-alternatives">Rationale and alternatives</a></h2>
<p>Cargo’s manifests have been a pretty carefully curated part of Cargo’s design to
ensure that they’re consistently readable and concise where possible. For
example many of Cargo’s manifest idioms gently nudge users towards the same
standards across the community by supporting many zero-configuration situations
such as where to put and how to name tests.</p>
<p>This proposal is an extension of these design principles to provide a gentle
nudge to consistently, across the Rust community, manage workspaces,
dependencies, and metadata. A goal here is to increase consistency in how this
is all managed across projects in a way that still preserves Cargo’s existing
flexibility for users.</p>
<p>Note that flexibility is a key part of this proposal where it’s possible to
intermingle shorthands with longer versions. For example if the workspace
declares:</p>
<pre><code class="language-toml">[workspace.dependencies]
log = "0.3"
</code></pre>
<p>But you really want to try out a new version of <code>log</code> in one workspace member,
you can easily do so by changing</p>
<pre><code class="language-toml">[dependencies]
log = { workspace = true }
</code></pre>
<p>to</p>
<pre><code class="language-toml">[dependencies]
log = "0.4"
</code></pre>
<p>Additionally you can always custom-version your packages, you’ve just got the
option to reference another package as well. Overall this proposal should
empower more power users of Cargo to manage workspaces easily without taking
away any of the existing configurations that Cargo already supports.</p>
<h3 id="alternative-syntax"><a class="header" href="#alternative-syntax">Alternative Syntax</a></h3>
<p>This proposal is largely a syntactic proposal for <code>Cargo.toml</code> and changing how
we can specify a few directives. Naturally that lends itself to quite a lot of
possible bikeshedding! Virtually all of the aspects of the proposal that modify
<code>Cargo.toml</code> can be tweaked in various ways such as names used or where they’re
placed. In any case discussion about compelling alternatives is always
encouraged!</p>
<p>Some alternative syntaxes:</p>
<pre><code class="language-toml">[dependencies]
# Instead of `foo = { workspace = true }`
foo = {}
foo = "ws"
foo = "workspace"
foo.workspace = true # technically the same, but idiomatically different
</code></pre>
<h3 id="including-metadata-by-default"><a class="header" href="#including-metadata-by-default">Including metadata by default</a></h3>
<p>This proposal indicates that package metadata is not inherited by default from
the workspace. This may be desired in some scenarios instead of repeating
<code>license = { workspace = true }</code> everywhere, and there’s likely two possible
ways this could happen.</p>
<ul>
<li>
<p>Workspace directives could be implicitly and automatically inherited to
members. In the future, however, Cargo will want to support nested
workspaces, and it’s unclear how these features will interact. In order to
strik a reasonable middle-ground for now a simple solution which should
address many use cases is proposed and we can continue to refine this over
time as necessary.</p>
</li>
<li>
<p>Directives could be flagged to be explicitly inherited to workspace members as
an optional way of specifying this. For now though to keep this proposal
simple this is left out as a possible future extension of Cargo.</p>
</li>
</ul>
<h3 id="inheriting-metadata-from-other-packages"><a class="header" href="#inheriting-metadata-from-other-packages">Inheriting metadata from other packages</a></h3>
<p>One possible extension of this RFC is for metadata to not only be inheritable
from the <code>[workspace]</code> table but also from other packages. For example a
scenario seen in the wild is that some repositories have multiple “cliques” of
crates which are all versioned as a unit. In this scenario one “clique” can have
its version directives deduplicated with this proposal, but not multiple ones.</p>
<p>It’s hoped though that an eventual feature of nested workspaces would solve this
issue in Cargo. That way each “clique” could correspond to one workspace, and
that way we wouldn’t need extra support to inherit directives from anywhere.</p>
<h3 id="motivating-issues"><a class="header" href="#motivating-issues">Motivating issues</a></h3>
<p>Duplication throughout workspaces has been a thorn in Cargo’s since practically
since the inception of workspaces. Naturally there’s quite a few bugs filed on
Cargo’s issue tracker about this which provide some context for why make a
proposal at all as well as how to design this proposal.</p>
<ul>
<li><a href="https://github.com/rust-lang/cargo/issues/3931">#3931</a> - updating the version of a crate in a workspace means lots of edits</li>
<li><a href="https://github.com/rust-lang/cargo/issues/7552">#7552</a> - crates may differ slightly in versions required from crates.io</li>
<li><a href="https://github.com/rust-lang/cargo/issues/7964">#7964</a> - current idioms push users towards usage of <code>[patch]</code> which breaks
git dependencies</li>
<li><a href="https://github.com/rust-lang/cargo/issues/5471">#5471</a> - an issue about shared dependencies in a workspace</li>
<li><a href="https://github.com/rust-lang/cargo/issues/6126">#6126</a> - an issue where <code>[patch]</code> tables are used seemingly to make it easier
to specify dependencies in a workspace, but having everything in
<code>[workspace.dependencies]</code> makes it smaller to specify.</li>
<li><a href="https://github.com/rust-lang/cargo/issues/6828">#6828</a> - an issue about inheriting workspace attributes</li>
</ul>
<h3 id="full-templating-language"><a class="header" href="#full-templating-language">Full templating language</a></h3>
<p>One sort of far-out-there alternative we could go for is to be far more
ambitious and make our own sort of “templating language” on top of TOML. This
would arguably be much more flexible than the limited amount of deduplication
proposed here, but you could imagine things like:</p>
<pre><code class="language-toml">[package]
name = "foo"
version = "1.{workspace.vars.minor}.0"

[dependencies]
bar = "{workspace.dependencies.bar}"
baz = { version = "1", features = "{workspace.vars.baz_features}" }
</code></pre>
<p>or “insert your own idea for how we can go all out” here. In general though I
think there’s a lot to be gained from the simplicity of TOML and prioritizing
other tools reading Cargo manifests, so we may not want to go full-blown
templating language just yet.</p>
<h2 id="unresolved-questions"><a class="header" href="#unresolved-questions">Unresolved questions</a></h2>
<ul>
<li>
<p>One thing we’ll want to resolve for sure is nailing down all the syntactical
decision here, which is expected to evolve through consensus.</p>
</li>
<li>
<p>It’s not clear how complex an implementation of this proposal will be in
Cargo. It could be prohibitively complex, but it’s hoped that it’s a
relatively simple refactoring to implement this in Cargo.</p>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="2904-compiler-major-change-process.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="2909-destructuring-assignment.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="2904-compiler-major-change-process.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="2909-destructuring-assignment.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
