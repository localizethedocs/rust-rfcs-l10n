msgid ""
msgstr ""
"Project-Id-Version: The Rust RFC Book\n"
"POT-Creation-Date: 2025-12-22T09:04:42Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/0495-array-pattern-changes.md:1
msgid "Start Date: 2014-12-03"
msgstr ""

#: src/0495-array-pattern-changes.md:2
msgid ""
"RFC PR: [rust-lang/rfcs#495](https://github.com/rust-lang/rfcs/pull/495)"
msgstr ""

#: src/0495-array-pattern-changes.md:3
msgid ""
"Rust Issue: [rust-lang/rust#23121](https://github.com/rust-lang/rust/"
"issues/23121)"
msgstr ""

#: src/0495-array-pattern-changes.md:5
msgid "Summary"
msgstr ""

#: src/0495-array-pattern-changes.md:7
msgid "Change array/slice patterns in the following ways:"
msgstr ""

#: src/0495-array-pattern-changes.md:9
msgid "Make them only match on arrays (`[T; n]` and `[T]`), not slices;"
msgstr ""

#: src/0495-array-pattern-changes.md:10
msgid ""
"Make subslice matching yield a value of type `[T; n]` or `[T]`, not `&[T]` "
"or `&mut [T]`;"
msgstr ""

#: src/0495-array-pattern-changes.md:12
msgid ""
"Allow multiple mutable references to be made to different parts of the same "
"array or slice in array patterns (resolving rust-lang/rust [issue \\#8636]"
"(https://github.com/rust-lang/rust/issues/8636))."
msgstr ""

#: src/0495-array-pattern-changes.md:16
msgid "Motivation"
msgstr ""

#: src/0495-array-pattern-changes.md:18
msgid ""
"Before DST (and after the removal of `~[T]`), there were only two types "
"based on `[T]`: `&[T]` and `&mut [T]`. With DST, we can have many more types "
"based on `[T]`, `Box<[T]>` in particular, but theoretically any pointer type "
"around a `[T]` could be used. However, array patterns still match on `&[T]`, "
"`&mut [T]`, and `[T; n]` only, meaning that to match on a `Box<[T]>`, one "
"must first convert it to a slice, which disallows moves. This may prove to "
"significantly limit the amount of useful code that can be written using "
"array patterns."
msgstr ""

#: src/0495-array-pattern-changes.md:26
msgid ""
"Another problem with today’s array patterns is in subslice matching, which "
"specifies that the rest of a slice not matched on already in the pattern "
"should be put into a variable:"
msgstr ""

#: src/0495-array-pattern-changes.md:41
msgid ""
"This makes sense, but still has a few problems. In particular, `tail` is a "
"`&[int]`, even though the compiler can always assert that it will have a "
"length of `2`, so there is no way to treat it like a fixed-length array. "
"Also, all other bindings in array patterns are by-value, whereas bindings "
"using subslice matching are by-reference (even though they don’t use `ref`). "
"This can create confusing errors because of the fact that the `..` syntax is "
"the only way of taking a reference to something within a pattern without "
"using the `ref` keyword."
msgstr ""

#: src/0495-array-pattern-changes.md:50
msgid ""
"Finally, the compiler currently complains when one tries to take multiple "
"mutable references to different values within the same array in a slice "
"pattern:"
msgstr ""

#: src/0495-array-pattern-changes.md:61
msgid ""
"This fails to compile, because the compiler thinks that this would allow "
"multiple mutable borrows to the same value (which is not the case)."
msgstr ""

#: src/0495-array-pattern-changes.md:64
msgid "Detailed design"
msgstr ""

#: src/0495-array-pattern-changes.md:66
msgid ""
"Make array patterns match only on arrays (`[T; n]` and `[T]`). For example, "
"the following code:"
msgstr ""

#: src/0495-array-pattern-changes.md:77
msgid "Would have to be changed to this:"
msgstr ""

#: src/0495-array-pattern-changes.md:87
msgid ""
"This change makes slice patterns mirror slice expressions much more closely."
msgstr ""

#: src/0495-array-pattern-changes.md:89
msgid ""
"Make subslice matching in array patterns yield a value of type `[T; n]` (if "
"the array is of fixed size) or `[T]` (if not). This means changing most code "
"that looks like this:"
msgstr ""

#: src/0495-array-pattern-changes.md:101
msgid "To this:"
msgstr ""

#: src/0495-array-pattern-changes.md:111
msgid ""
"It should be noted that if a fixed-size array is matched on using subslice "
"matching, and `ref` is used, the type of the binding will be `&[T; n]`, "
"_not_ `&[T]`."
msgstr ""

#: src/0495-array-pattern-changes.md:115
msgid ""
"Improve the compiler’s analysis of multiple mutable references to the same "
"value within array patterns. This would be done by allowing multiple mutable "
"references to different elements of the same array (including bindings from "
"subslice matching):"
msgstr ""

#: src/0495-array-pattern-changes.md:128
msgid "Drawbacks"
msgstr ""

#: src/0495-array-pattern-changes.md:130
msgid ""
"This will break a non-negligible amount of code, requiring people to add "
"`&`s and `ref`s to their code."
msgstr ""

#: src/0495-array-pattern-changes.md:133
msgid ""
"The modifications to subslice matching will require `ref` or `ref mut` to be "
"used in almost all cases. This could be seen as unnecessary."
msgstr ""

#: src/0495-array-pattern-changes.md:136
msgid "Alternatives"
msgstr ""

#: src/0495-array-pattern-changes.md:138
msgid ""
"Do a subset of this proposal; for example, the modifications to subslice "
"matching in patterns could be removed."
msgstr ""

#: src/0495-array-pattern-changes.md:141
msgid "Unresolved questions"
msgstr ""

#: src/0495-array-pattern-changes.md:143
msgid ""
"What are the precise implications to the borrow checker of the change to "
"multiple mutable borrows in the same array pattern? Since it is a backwards-"
"compatible change, it can be implemented after 1.0 if it turns out to be "
"difficult to implement."
msgstr ""
