<!DOCTYPE HTML>
<html lang="zh_TW" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>0401-coercions - The Rust RFC Book</title>


        <!-- Custom HTML head -->
        <script type="text/javascript" src="ltd-provenance.js"></script>
        <script type="text/javascript" src="ltd-current.js"></script>
        <script type="text/javascript" src="../../ltd-config.js"></script>
        <script type="text/javascript" src="../../ltd-flyout.js"></script>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex-c5bb60c5.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-5025baa3.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">The Rust RFC Book</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/rust-lang/rfcs" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <ul>
<li>Start Date: 2014-10-30</li>
<li>RFC PR #: https://github.com/rust-lang/rfcs/pull/401</li>
<li>Rust Issue #: https://github.com/rust-lang/rust/issues/18469</li>
</ul>
<h2 id="摘要"><a class="header" href="#摘要">摘要</a></h2>
<p>Describe the various kinds of type conversions available in Rust and suggest some tweaks.</p>
<p>Provide a mechanism for smart pointers to be part of the DST coercion system.</p>
<p>Reform coercions from functions to closures.</p>
<p>The <code>transmute</code> intrinsic and other unsafe methods of type conversion are not covered by this RFC.</p>
<h2 id="動機"><a class="header" href="#動機">動機</a></h2>
<p>It is often useful to convert a value from one type to another. This conversion might be implicit or explicit and may or may not involve some runtime action. Such conversions are useful for improving reuse of code, and avoiding unsafe transmutes.</p>
<p>Our current rules around type conversions are not well-described. The different conversion mechanisms interact poorly and the implementation is somewhat ad-hoc.</p>
<h2 id="詳細設計"><a class="header" href="#詳細設計">詳細設計</a></h2>
<p>Rust has several kinds of type conversion: subtyping, coercion, and casting. Subtyping and coercion are implicit, there is no syntax. Casting is explicit, using the <code>as</code> keyword. The syntax for a cast expression is:</p>
<pre><code>e_cast ::= e as U
</code></pre>
<p>Where <code>e</code> is any valid expression and <code>U</code> is any valid type (note that we restrict in type checking the valid types for <code>U</code>).</p>
<p>These conversions (and type equality) form a total order in terms of their strength. For any types <code>T</code> and <code>U</code>, if <code>T == U</code> then <code>T</code> is also a subtype of <code>U</code>. If <code>T</code> is a subtype of <code>U</code>, then <code>T</code> coerces to <code>U</code>, and if <code>T</code> coerces to <code>U</code>, then <code>T</code> can be cast to <code>U</code>.</p>
<p>There is an additional kind of coercion which does not fit into that total order</p>
<ul>
<li>implicit coercions of receiver expressions. (I will use ‘expression coercion’ when I need to distinguish coercions in non-receiver position from coercions of receivers). All expression coercions are valid receiver coercions, but not all receiver coercions are valid casts.</li>
</ul>
<p>Finally, I will discuss function polymorphism, which is something of a coercion edge case.</p>
<h3 id="subtyping"><a class="header" href="#subtyping">Subtyping</a></h3>
<p>Subtyping is implicit and can occur at any stage in type checking or inference. Subtyping in Rust is very restricted and occurs only due to variance with respect to lifetimes and between types with higher ranked lifetimes. If we were to erase lifetimes from types, then the only subtyping would be due to type equality.</p>
<h3 id="coercions"><a class="header" href="#coercions">Coercions</a></h3>
<p>A coercion is implicit and has no syntax. A coercion can only occur at certain coercion sites in a program, these are typically places where the desired type is explicit or can be derived by propagation from explicit types (without type inference). The base cases are:</p>
<ul>
<li>
<p>In <code>let</code> statements where an explicit type is given: in <code>let _: U = e;</code>, <code>e</code> is coerced to have type <code>U</code></p>
</li>
<li>
<p>In statics and consts, similarly to <code>let</code> statements</p>
</li>
<li>
<p>In argument position for function calls. The value being coerced is the actual parameter and it is coerced to the type of the formal parameter. For example, where <code>foo</code> is defined as <code>fn foo(x: U) { ... }</code> and is called with <code>foo(e);</code>, <code>e</code> is coerced to have type <code>U</code></p>
</li>
<li>
<p>Where a field of a struct or variant is instantiated. E.g., where <code>struct Foo { x: U }</code> and the instantiation is <code>Foo { x: e }</code>, <code>e</code> is coerced to have type <code>U</code></p>
</li>
<li>
<p>The result of a function, either the final line of a block if it is not semi- colon terminated or any expression in a <code>return</code> statement. For example, for <code>fn foo() -&gt; U { e }</code>, <code>e</code> is coerced to have type <code>U</code></p>
</li>
</ul>
<p>If the expression in one of these coercion sites is a coercion-propagating expression, then the relevant sub-expressions in that expression are also coercion sites. Propagation recurses from these new coercion sites. Propagating expressions and their relevant sub-expressions are:</p>
<ul>
<li>
<p>Array literals, where the array has type <code>[U, ..n]</code>, each sub-expression in the array literal is a coercion site for coercion to type <code>U</code></p>
</li>
<li>
<p>Array literals with repeating syntax, where the array has type <code>[U, ..n]</code>, the repeated sub-expression is a coercion site for coercion to type <code>U</code></p>
</li>
<li>
<p>Tuples, where a tuple is a coercion site to type <code>(U_0, U_1, ..., U_n)</code>, each sub-expression is a coercion site for the respective type, e.g., the zero-th sub-expression is a coercion site to <code>U_0</code></p>
</li>
<li>
<p>The box expression, if the expression has type <code>Box&lt;U&gt;</code>, the sub-expression is a coercion site to <code>U</code> (I expect this to be generalised when <code>box</code> expressions are)</p>
</li>
<li>
<p>Parenthesised sub-expressions (<code>(e)</code>), if the expression has type <code>U</code>, then the sub-expression is a coercion site to <code>U</code></p>
</li>
<li>
<p>Blocks, if a block has type <code>U</code>, then the last expression in the block (if it is not semicolon-terminated) is a coercion site to <code>U</code>. This includes blocks which are part of control flow statements, such as <code>if</code>/<code>else</code>, if the block has a known type.</p>
</li>
</ul>
<p>Note that we do not perform coercions when matching traits (except for receivers, see below). If there is an impl for some type <code>U</code>, and <code>T</code> coerces to <code>U</code>, that does not constitute an implementation for <code>T</code>. For example, the following will not type check, even though it is OK to coerce <code>t</code> to <code>&amp;T</code> and there is an impl for <code>&amp;T</code>:</p>
<pre><code class="language-rust">struct T;
trait Trait {}

fn foo&lt;X: Trait&gt;(t: X) {}

impl&lt;'a&gt; Trait for &amp;'a T {}


fn main() {
    let t: &amp;mut T = &amp;mut T;
    foo(t); //~ ERROR failed to find an implementation of trait Trait for &amp;mut T
}</code></pre>
<p>In a cast expression, <code>e as U</code>, the compiler will first attempt to coerce <code>e</code> to <code>U</code>, and only if that fails will the conversion rules for casts (see below) be applied.</p>
<p>Coercion is allowed between the following types:</p>
<ul>
<li>
<p><code>T</code> to <code>U</code> if <code>T</code> is a subtype of <code>U</code> (the ‘identity’ case)</p>
</li>
<li>
<p><code>T_1</code> to <code>T_3</code> where <code>T_1</code> coerces to <code>T_2</code> and <code>T_2</code> coerces to <code>T_3</code> (transitivity case)</p>
</li>
<li>
<p><code>&amp;mut T</code> to <code>&amp;T</code></p>
</li>
<li>
<p><code>*mut T</code> to <code>*const T</code></p>
</li>
<li>
<p><code>&amp;T</code> to <code>*const T</code></p>
</li>
<li>
<p><code>&amp;mut T</code> to <code>*mut T</code></p>
</li>
<li>
<p><code>T</code> to <code>fn</code> if <code>T</code> is a closure that does not capture any local variables in its environment.</p>
</li>
<li>
<p><code>T</code> to <code>U</code> if <code>T</code> implements <code>CoerceUnsized&lt;U&gt;</code> (see below) and <code>T = Foo&lt;...&gt;</code> and <code>U = Foo&lt;...&gt;</code> (for any <code>Foo</code>, when we get HKT I expect this could be a constraint on the <code>CoerceUnsized</code> trait, rather than being checked here)</p>
</li>
<li>
<p>From TyCtor(<code>T</code>) to TyCtor(coerce_inner(<code>T</code>)) (these coercions could be provided by implementing <code>CoerceUnsized</code> for all instances of TyCtor) where TyCtor(<code>T</code>) is one of <code>&amp;T</code>, <code>&amp;mut T</code>, <code>*const T</code>, <code>*mut T</code>, or <code>Box&lt;T&gt;</code>.</p>
</li>
</ul>
<p>And where coerce_inner is defined as:</p>
<ul>
<li>
<p>coerce_inner(<code>[T, ..n]</code>) = <code>[T]</code>;</p>
</li>
<li>
<p>coerce_inner(<code>T</code>) = <code>U</code> where <code>T</code> is a concrete type which implements the trait <code>U</code>;</p>
</li>
<li>
<p>coerce_inner(<code>T</code>) = <code>U</code> where <code>T</code> is a sub-trait of <code>U</code>;</p>
</li>
<li>
<p>coerce_inner(<code>Foo&lt;..., T, ...&gt;</code>) = <code>Foo&lt;..., coerce_inner(T), ...&gt;</code> where <code>Foo</code> is a struct and only the last field has type <code>T</code> and <code>T</code> is not part of the type of any other fields;</p>
</li>
<li>
<p>coerce_inner(<code>(..., T)</code>) = <code>(..., coerce_inner(T))</code>.</p>
</li>
</ul>
<p>Note that coercing from sub-trait to a super-trait is a new coercion and is non- trivial. One implementation strategy which avoids re-computation of vtables is given in RFC PR #250.</p>
<p>A note for the future: although there hasn’t been an RFC nor much discussion, it is likely that post-1.0 we will add type ascription to the language (see #354). That will (probably) allow any expression to be annotated with a type (e.g, <code>foo(a, b: T, c)</code> a function call where the second argument has a type annotation).</p>
<p>Type ascription is purely descriptive and does not cast the sub-expression to the required type. However, it seems sensible that type ascription would be a coercion site, and thus type ascription would be a way to make implicit coercions explicit. There is a danger that such coercions would be confused with casts. I hope the rule that casting should change the type and type ascription should not is enough of a discriminant. Perhaps we will need a style guideline to encourage either casts or type ascription to force an implicit coercion. Perhaps type ascription should not be a coercion site. Or perhaps we don’t need type ascription at all if we allow trivial casts.</p>
<h4 id="custom-unsizing-coercions"><a class="header" href="#custom-unsizing-coercions">Custom unsizing coercions</a></h4>
<p>It should be possible to coerce smart pointers (e.g., <code>Rc</code>) in the same way as the built-in pointers. In order to do so, we provide two traits and an intrinsic to allow users to make their smart pointers work with the compiler’s coercions. It might be possible to implement some of the coercions described for built-in pointers using this machinery, and whether that is a good idea or not is an implementation detail.</p>
<pre><code>// Cannot be impl'ed - it really is quite a magical trait, see the cases below.
trait Unsize&lt;Sized? U&gt; for Sized? {}
</code></pre>
<p>The <code>Unsize</code> trait is a marker trait and a lang item. It should not be implemented by users and user implementations will be ignored. The compiler will assume the following implementations, these correspond to the definition of coerce_inner, above; note that these cannot be expressed in real Rust:</p>
<pre><code>impl&lt;T, n: int&gt; Unsize&lt;[T]&gt; for [T, ..n] {}

// Where T is a trait
impl&lt;Sized? T, U: T&gt; Unsize&lt;T&gt; for U {}

// Where T and U are traits
impl&lt;Sized? T, Sized? U: T&gt; Unsize&lt;T&gt; for U {}

// Where T and U are structs ... following the rules for coerce_inner
impl Unsize&lt;T&gt; for U {}

impl Unsize&lt;(..., T)&gt; for (..., U)
    where U: Unsize(T) {}
</code></pre>
<p>The <code>CoerceUnsized</code> trait should be implemented by smart pointers and containers which want to be part of the coercions system.</p>
<pre><code>trait CoerceUnsized&lt;U&gt; {
    fn coerce(self) -&gt; U;
}
</code></pre>
<p>To help implement <code>CoerceUnsized</code>, we provide an intrinsic - <code>fat_pointer_convert</code>. This takes and returns raw pointers. The common case will be to take a thin pointer, unsize the contents, and return a fat pointer. But the exact behaviour depends on the types involved. This will perform any computation associated with a coercion (for example, adjusting or creating vtables). The implementation of fat_pointer_convert will match what the compiler must do in coerce_inner as described above.</p>
<pre><code>intrinsic fn fat_pointer_convert&lt;Sized? T, Sized? U&gt;(t: *const T) -&gt; *const U
    where T : Unsize&lt;U&gt;;
</code></pre>
<p>Here is an example implementation of <code>CoerceUnsized</code> for <code>Rc</code>:</p>
<pre><code>impl&lt;Sized? T, Sized? U&gt; CoerceUnsized&lt;Rc&lt;T&gt;&gt; for Rc&lt;U&gt; {
    where U: Unsize&lt;T&gt;

    fn coerce(self) -&gt; Rc&lt;T&gt; {
        let new_ptr: *const RcBox&lt;T&gt; = fat_pointer_convert(self._ptr);
        Rc { _ptr: new_ptr }
    }
}
</code></pre>
<h3 id="coercions-of-receiver-expressions"><a class="header" href="#coercions-of-receiver-expressions">Coercions of receiver expressions</a></h3>
<p>These coercions occur when matching the type of the receiver of a method call with the self type (i.e., the type of <code>e</code> in <code>e.m(...)</code>) or in field access. These coercions can be thought of as a feature of the <code>.</code> operator, they do not apply when using the UFCS form with the self argument in argument position. Only an expression before the dot is coerced as a receiver. When using the UFCS form of method call, arguments are only coerced according to the expression coercion rules. This matches the rules for dispatch - dynamic dispatch only happens using the <code>.</code> operator, not the UFCS form.</p>
<p>In method calls the target type of the coercion is the concrete type of the impl in which the method is defined, modified by the type of <code>self</code>. Assuming the impl is for <code>T</code>, the target type is given by:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>self</th><th>target type</th></tr>
</thead>
<tbody>
<tr><td><code>self</code></td><td><code>T</code></td></tr>
<tr><td><code>&amp;self</code></td><td><code>&amp;T</code></td></tr>
<tr><td><code>&amp;mut self</code></td><td><code>&amp;mut T</code></td></tr>
<tr><td><code>self: Box&lt;Self&gt;</code></td><td><code>Box&lt;T&gt;</code></td></tr>
</tbody>
</table>
</div>
<p>and likewise with any variations of the self type we might add in the future.</p>
<p>For field access, the target type is <code>&amp;T</code>, <code>&amp;mut T</code> for field assignment, where <code>T</code> is a struct with the named field.</p>
<p>A receiver coercion consists of some number of dereferences (either compiler built-in (of a borrowed reference or <code>Box</code> pointer, not raw pointers) or custom, given by the <code>Deref</code> trait), one or zero applications of <code>coerce_inner</code> or use of the <code>CoerceUnsized</code> trait (as defined above, note that this requires we are at a type which has neither references nor dereferences at the top level), and up to two address-of operations (i.e., <code>T</code> to <code>&amp;T</code>, <code>&amp;mut T</code>, <code>*const T</code>, or <code>*mut T</code>, with a fresh lifetime.). The usual mutability rules for taking a reference apply. (Note that the implementation of the coercion isn’t so simple, it is embedded in the search for candidate methods, but from the point of view of type conversions, that is not relevant).</p>
<p>Alternatively, a receiver coercion may be thought of as a two stage process. First, we dereference and then take the address until the source type has the same shape (i.e., has the same kind and number of indirection) as the target type. Then we try to coerce the adjusted source type to the target type using the usual coercion machinery. I believe, but have not proved, that these two descriptions are equivalent.</p>
<h3 id="casts"><a class="header" href="#casts">Casts</a></h3>
<p>Casting is indicated by the <code>as</code> keyword. A cast <code>e as U</code> is valid if one of the following holds:</p>
<ul>
<li><code>e</code> has type <code>T</code> and <code>T</code> coerces to <code>U</code>; <em>coercion-cast</em></li>
<li><code>e</code> has type <code>*T</code>, <code>U</code> is <code>*U_0</code>, and either <code>U_0: Sized</code> or unsize_kind(<code>T</code>) = unsize_kind(<code>U_0</code>); <em>ptr-ptr-cast</em></li>
<li><code>e</code> has type <code>*T</code> and <code>U</code> is a numeric type, while <code>T: Sized</code>; <em>ptr-addr-cast</em></li>
<li><code>e</code> is an integer and <code>U</code> is <code>*U_0</code>, while <code>U_0: Sized</code>; <em>addr-ptr-cast</em></li>
<li><code>e</code> has type <code>T</code> and <code>T</code> and <code>U</code> are any numeric types; <em>numeric-cast</em></li>
<li><code>e</code> is a C-like enum and <code>U</code> is an integer type; <em>enum-cast</em></li>
<li><code>e</code> has type <code>bool</code> or <code>char</code> and <code>U</code> is an integer; <em>prim-int-cast</em></li>
<li><code>e</code> has type <code>u8</code> and <code>U</code> is <code>char</code>; <em>u8-char-cast</em></li>
<li><code>e</code> has type <code>&amp;[T; n]</code> and <code>U</code> is <code>*const T</code>; <em>array-ptr-cast</em></li>
<li><code>e</code> is a function pointer type and <code>U</code> has type <code>*T</code>, while <code>T: Sized</code>; <em>fptr-ptr-cast</em></li>
<li><code>e</code> is a function pointer type and <code>U</code> is an integer; <em>fptr-addr-cast</em></li>
</ul>
<p>where <code>&amp;.T</code> and <code>*T</code> are references of either mutability, and where unsize_kind(<code>T</code>) is the kind of the unsize info in <code>T</code> - the vtable for a trait definition (e.g. <code>fmt::Display</code> or <code>Iterator</code>, not <code>Iterator&lt;Item=u8&gt;</code>) or a length (or <code>()</code> if <code>T: Sized</code>).</p>
<p>Note that lengths are not adjusted when casting raw slices - <code>T: *const [u16] as *const [u8]</code> creates a slice that only includes half of the original memory.</p>
<p>Casting is not transitive, that is, even if <code>e as U1 as U2</code> is a valid expression, <code>e as U2</code> is not necessarily so (in fact it will only be valid if <code>U1</code> coerces to <code>U2</code>).</p>
<p>A cast may require a runtime conversion.</p>
<p>There will be a lint for trivial casts. A trivial cast is a cast <code>e as T</code> where <code>e</code> has type <code>U</code> and <code>U</code> is a subtype of <code>T</code>. The lint will be warn by default.</p>
<h3 id="function-type-polymorphism"><a class="header" href="#function-type-polymorphism">Function type polymorphism</a></h3>
<p>Currently, functions may be used where a closure is expected by coercing a function to a closure. We will remove this coercion and instead use the following scheme:</p>
<ul>
<li>Every function item has its own fresh type. This type cannot be written by the programmer (i.e., it is expressible but not denotable).</li>
<li>Conceptually, for each fresh function type, there is an automatically generated implementation of the <code>Fn</code>, <code>FnMut</code>, and <code>FnOnce</code> traits.</li>
<li>All function types are implicitly coercible to a <code>fn()</code> type with the corresponding parameter types.</li>
<li>Conceptually, there is an implementation of <code>Fn</code>, <code>FnMut</code>, and <code>FnOnce</code> for every <code>fn()</code> type.</li>
<li><code>Fn</code>, <code>FnMut</code>, or <code>FnOnce</code> trait objects and references to type parameters bounded by these traits may be considered to have the corresponding unboxed closure type. This is a desugaring (alias), rather than a coercion. This is an existing part of the unboxed closures work.</li>
</ul>
<p>These steps should allow for functions to be stored in variables with both closure and function type. It also allows variables with function type to be stored as a variable with closure type. Note that these have different dynamic semantics, as described below. For example,</p>
<pre><code>fn foo() { ... }         // `foo` has a fresh and non-denotable type.

fn main() {
    let x: fn() = foo;   // `foo` is coerced to `fn()`.
    let y: || = x;       // `x` is coerced to `&amp;Fn` (a closure object),
                         // legal due to the `fn()` auto-impls.

    let z: || = foo;     // `foo` is coerced to `&amp;T` where `T` is fresh and
                         // bounded by `Fn`. Legal due to the fresh function
                         // type auto-impls.
}
</code></pre>
<p>The two kinds of auto-generated impls are rather different: the first case (for the fresh and non-denotable function types) is a static call to <code>Fn::Call</code>, which in turn calls the function with the given arguments. The first call would be inlined (in fact, the impls and calls to them may be special-cased by the compiler). In the second case (for <code>fn()</code> types), we must execute a virtual call to find the implementing method and then call the function itself because the function is ‘wrapped’ in a closure object.</p>
<h3 id="changes-required"><a class="header" href="#changes-required">Changes required</a></h3>
<ul>
<li>
<p>Add cast from unsized slices to raw pointers (<code>&amp;[V] to *V</code>);</p>
</li>
<li>
<p>allow coercions as casts and add lint for trivial casts;</p>
</li>
<li>
<p>ensure we support all coercion sites;</p>
</li>
<li>
<p>remove [T, ..n] to &amp;[T]/*[T] coercions;</p>
</li>
<li>
<p>add raw pointer coercions;</p>
</li>
<li>
<p>add sub-trait coercions;</p>
</li>
<li>
<p>add unsized tuple coercions;</p>
</li>
<li>
<p>add all transitive coercions;</p>
</li>
<li>
<p>receiver coercions - add referencing to raw pointers, remove triple referencing for slices;</p>
</li>
<li>
<p>remove function coercions, add function type polymorphism;</p>
</li>
<li>
<p>add DST/custom coercions.</p>
</li>
</ul>
<h2 id="drawbacks"><a class="header" href="#drawbacks">Drawbacks</a></h2>
<p>We are adding and removing some coercions. There is always a trade-off with implicit coercions on making Rust ergonomic vs making it hard to comprehend due to magical conversions. By changing this balance we might be making some things worse.</p>
<h2 id="替代方案"><a class="header" href="#替代方案">替代方案</a></h2>
<p>These rules could be tweaked in any number of ways.</p>
<p>Specifically for the DST custom coercions, the compiler could throw an error if it finds a user-supplied implementation of the <code>Unsize</code> trait, rather than silently ignoring them.</p>
<h2 id="amendments"><a class="header" href="#amendments">Amendments</a></h2>
<ul>
<li>Updated by <a href="https://github.com/rust-lang/rfcs/pull/1558">#1558</a>, which allows coercions from a non-capturing closure to a function pointer.</li>
</ul>
<h1 id="未解決的問題"><a class="header" href="#未解決的問題">未解決的問題</a></h1>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="0390-enum-namespacing.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="0403-cargo-build-command.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="0390-enum-namespacing.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="0403-cargo-build-command.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
