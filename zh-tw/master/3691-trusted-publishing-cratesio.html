<!DOCTYPE HTML>
<html lang="zh_TW" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>3691-trusted-publishing-cratesio - The Rust RFC Book</title>


        <!-- Custom HTML head -->
        <script type="text/javascript" src="ltd-provenance.js"></script>
        <script type="text/javascript" src="ltd-current.js"></script>
        <script type="text/javascript" src="../../ltd-config.js"></script>
        <script type="text/javascript" src="../../ltd-flyout.js"></script>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex-c5bb60c5.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-5025baa3.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">The Rust RFC Book</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/rust-lang/rfcs" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="security-improvements-for-ci-publishing-to-cratesio"><a class="header" href="#security-improvements-for-ci-publishing-to-cratesio">Security Improvements for CI Publishing to crates.io</a></h1>
<ul>
<li>Feature Name: crates-io-trusted-publishing</li>
<li>Start Date: 2024-09-10</li>
<li>RFC PR: <a href="https://github.com/rust-lang/rfcs/pull/3691">rust-lang/rfcs#3691</a></li>
</ul>
<h2 id="摘要"><a class="header" href="#摘要">摘要</a></h2>
<p>This RFC proposes adding support for <a href="https://blog.trailofbits.com/2023/05/23/trusted-publishing-a-new-benchmark-for-packaging-security/">“trusted publishing”</a> to crates.io. Short-lived access tokens are granted via the <a href="https://openid.net/connect/">OpenID Connect (OIDC) protocol</a> to authenticate and authorize actions with the crates.io APIs.</p>
<p>The term “trusted publishing” here refers to the publishing of crates from a trusted CI/CD system, for example GitHub Actions (GHA), without the use of a manually configured API token. Instead, an access token typically valid for less than an hour is created via OIDC flows and used to authenticate to crates.io.</p>
<blockquote>
<p>[!IMPORTANT] We will first implement trusted publishing for GitHub Actions as it will encompass the largest user base.</p>
<p>After GitHub Actions, we will have a foundation and will be able to add support for other CI/CD trusted publishers including GitLab and <a href="https://circleci.com/docs/openid-connect-tokens/">CircleCI</a>.</p>
</blockquote>
<h2 id="動機"><a class="header" href="#動機">動機</a></h2>
<p>Support for trusted publishing is used to strengthen the security posture around the supply chain of publishing Rust crates by <em>reducing the risk of credential leaks and streamlining release workflows</em><sup class="footnote-reference" id="fr-1-1"><a href="#footnote-1">1</a></sup>. Implementation of this would follow in <a href="https://blog.pypi.org/posts/2023-04-20-introducing-trusted-publishers/">PyPI’s footsteps</a> and align with <a href="https://repos.openssf.org/principles-for-package-repository-security#authorization">OpenSSF’s Principles for Package Repository Security</a>.</p>
<p>Currently, crates.io only supports user-created API tokens used for either manual (i.e. running <code>cargo publish</code> from the developer machine) or automated publishing (i.e. via a CI/CD system).</p>
<p>These tokens have some security flaws:</p>
<ol>
<li>They can have no expiration (as of Sept 12 2024, they default to 90 days).</li>
<li>They can be used from any source without restriction.
<ul>
<li>For example, the same token can be used from a GitHub Actions workflow or from a personal workstation.</li>
</ul>
</li>
<li>When using the tokens in automated workflows, they must be created in advance and copied by a human – increasing the risk of accidental exposure.</li>
<li>Manually-configured API tokens need to be manually revoked if compromised.
<ul>
<li>The lag time between exposure and revocation provides more opportunity for abuse.</li>
<li>This introduces more manual, error prone steps during incident response.</li>
<li>GitHub’s Secret Scanning does partially mitigate token exposures with <a href="https://github.blog/changelog/2023-01-19-the-crate-io-registry-is-now-a-github-secret-scanning-integrator/">automatic detection and reporting to crates.io</a>, but it’s not a complete mitigation.</li>
</ul>
</li>
</ol>
<p>Our goal with trusted publishing is to mitigate and/or eliminate these risks.</p>
<p>In contrast to using a traditional API token from crates.io, <a href="https://docs.github.com/en/actions/deployment/security-hardening-your-deployments/about-security-hardening-with-openid-connect">OIDC</a> and GitHub Actions will allow crate authors to:</p>
<ol>
<li>Avoid any manual creation of an API token.
<ul>
<li>OIDC flows create an access token with a limited valid lifetime. For example, the access token may only be valid for 15 minutes after its creation.</li>
</ul>
</li>
<li>Using OIDC’s support for assertions and claims, access can be restricted to authorized sources
<ul>
<li>Claims can be associated to a specific GitHub organization, repository, workflow, and environment.</li>
</ul>
</li>
<li>Instead of creating an API token, <a href="#trusted-publisher-configuration-cratesio">a trusted publisher configuration</a> is used to authorize GitHub Action workflows from a particular organization, repository, workflow, and environment.
<ul>
<li>No credential is ever created or copied</li>
</ul>
</li>
</ol>
<h2 id="guide-level-explanation"><a class="header" href="#guide-level-explanation">Guide-level explanation</a></h2>
<h3 id="terminology"><a class="header" href="#terminology">Terminology</a></h3>
<ul>
<li><strong>OpenID Connect</strong>: <a href="https://openid.net/developers/how-connect-works/">OpenID Connect</a> (or “OIDC”) is a federated authentication protocol built on top of OAuth 2.0. OIDC allows unrelated third parties to make and verify cryptographically signed claims about identities.</li>
<li><strong>OpenID Connect provider</strong>: An OpenID Connect Provider (OIDC Provider or OIDC IdP) is a third-party service (such as GitHub Actions) that creates ID tokens attesting to identities within its purview. For example, GitHub Actions is the OIDC Provider for ID tokens corresponding to GitHub Actions workflows. An OIDC Provider both creates ID tokens and presents the public keys needed to verify them.</li>
<li><strong>Relying Party (RP)</strong>: This is the resource that depends on the OIDC IdP to authenticate users or machines. For example, crates.io would be the <em>relying party</em> that depends on the GitHub Actions OIDC Provider to authenticate incoming <em>machines</em> (i.e. a GHA workflow run).</li>
<li><strong>Trusted Publisher</strong>: A Trusted Publisher is a <em>specific</em> identity trusted to publish for a project on the package index. For example, if <code>github.com/example/repo/.github/workflows/release.yml</code> was registered to publish for <code>https://crates.io/crates/example</code>, we would say that the former is the latter’s Trusted Publisher.</li>
<li><strong>Identity token</strong>: Typically referred to as an <em>ID token</em>. An ID token is a cryptographically signed representation of an identity (machine or human). In the context of OIDC and trusted publishing ID tokens are structured as JSON Web Tokens that represent the identity of a CI/CD workflow, such as <code>github.com/example/repo/.github/workflows/release.yml</code>.</li>
<li><strong>Access Token</strong>: In the context of OIDC, after an ID token is verified it can be exchanged for an access token. The access token is used as if it was an API token and actually permits access to perform API actions on crates.io. This exchange process is detailed below.</li>
<li><strong>JSON Web Key Sets (JWKS)</strong>: The public keys provided by the OIDC provider that the <em>relying party/resource servers</em> use to verify the validity of a cryptographically signed ID token. Often found at the <code>/.well-known/jwks</code> URI path on the OIDC provider or in the <code>jwks_url</code> key of the <code>/.well-known/openid-configuration</code>.</li>
<li><strong>Authentication (AuthN)</strong>: Refers to the process of verifying someone or something is <em>who</em> they say they are. This identity verification process can happen in many different ways, including but not limited to, a username/password combination, a shared secret, or even a biometric.</li>
<li><strong>Authorization (AuthZ)</strong>: Refers to <em>what</em> an authenticated user/machine can do. For example, they are allowed to <em>publish</em> new crate versions on crates.io, but are not allowed to <em>yank</em> existing crate versions.</li>
</ul>
<details>
    <summary>(Optional Read): Overview of OpenID Connect (OIDC)</summary>
<h3 id="overview-of-openid-connect-oidc"><a class="header" href="#overview-of-openid-connect-oidc">Overview of OpenID Connect (OIDC)</a></h3>
<p>We’ll do our best here to give you a primer on OIDC and enough contextual information to assist in a solid understanding of this RFC.</p>
<p>If you’d like more detail about OIDC here are some additional resources:</p>
<ul>
<li><a href="https://openid.net/developers/how-connect-works/">How OpenID Connect Works</a></li>
<li><a href="https://openid.net/specs/openid-authentication-2_0.html">OpenID Authentication 2.0 Specification</a></li>
<li>OAuth 2.0 RFCs <a href="https://www.ietf.org/rfc/rfc6749.txt">6749</a> and <a href="https://www.ietf.org/rfc/rfc6750.txt">6750</a>
<ul>
<li><em>OpenID is built on top of OAuth 2.0</em></li>
</ul>
</li>
<li><a href="https://docs.github.com/en/actions/deployment/security-hardening-your-deployments/about-security-hardening-with-openid-connect">Using GitHub Action’s OIDC Implementation</a></li>
</ul>
<p>A typical machine-to-machine OIDC flow will follow these steps:</p>
<ol>
<li>The client machine will authenticate itself to the OIDC IdP and request an ID token.</li>
<li>The OIDC IdP, after authenticating the client, will issue a cryptographically signed ID token to be used to prove the client’s identity.</li>
<li>The client will send the ID token to the <em>resource server</em> (aka. <em>relying party</em>) to authenticate and request an <em>access token</em>.</li>
<li>The <em>resource server</em> configured to outsource its authentication to the OIDC IdP will verify the cryptographic signature of the ID token using the IdP’s public keys provided in its JSON Web Key Sets (JWKS).</li>
<li>Once verified, the resource server will create and respond with an <em>access token</em> that can be used by the client.</li>
<li>The client uses the access token to access the resource server’s APIs.</li>
</ol>
<pre><code class="language-mermaid">sequenceDiagram
    participant C as Client
    participant O as OIDC Provider
    participant R as Resource Server

    C-&gt;&gt;+O: 1. Authenticate and request ID token
    O--&gt;&gt;-C: 2. Return signed ID token
    C-&gt;&gt;+R: 3. Send ID token &amp; request access token
    R--&gt;&gt;R: 4. Verify validity of ID token using the OIDC Provider's public keys
    R--&gt;&gt;-C: 5. Return temporary access token
    C-&gt;&gt;R: 6. Use access token to authenticate to APIs
</code></pre>
<h3 id="github-actions-oidc-and-cratesio"><a class="header" href="#github-actions-oidc-and-cratesio">GitHub Actions OIDC and crates.io</a></h3>
<p>When publishing a new crate version to crates.io using GitHub Actions using OIDC authentication the participants include:</p>
<ul>
<li>The <em>client</em> is a particular run of a GitHub Action workflow.</li>
<li>The <em>OIDC provider</em> is GitHub’s own provider dedicated to GitHub Actions.
<ul>
<li>Their OpenID configuration can be found at https://token.actions.githubusercontent.com/.well-known/openid-configuration.</li>
</ul>
</li>
<li>The <em>resource server/relying party</em> is crates.io.</li>
</ul>
<blockquote>
<p>[!NOTE] Crates.io would be configured by the crates.io Team to trust GitHub’s OIDC provider using their configuration declared at <a href="https://token.actions.githubusercontent.com/.well-known/openid-configuration"><code>.well-known/openid-configuration</code></a>.</p>
<p>Practically, this means the crates.io server will periodically fetch the public keys needed to verify the validity of the cryptographically signed ID tokens.</p>
</blockquote>
<p>A typical flow (after setting up a trusted publisher configuration) would follow these steps to publish a crate version on crates.io:</p>
<pre><code class="language-mermaid">sequenceDiagram
    participant D as Developer
    participant GHA as GitHub Actions
    participant OIDC as GH OIDC Provider
    participant C as crates.io
    
    D-&gt;&gt;GHA: 1. Trigger release workflow
    GHA-&gt;&gt;+OIDC: 2. Authenticate &amp; request signed ID token
    OIDC--&gt;&gt;-GHA: 3. Return signed ID token
    GHA-&gt;&gt;+C: 4. Send ID token &amp; request access token
    C--&gt;&gt;C: 5. Verify validity of ID token using GHA OIDC's public keys
    C--&gt;&gt;-GHA: 6. Return temporary access token
    rect rgb(253, 253, 150)
    note right of GHA: cargo publish
    GHA--&gt;&gt;GHA: 7. Build artifact
    GHA-&gt;&gt;+C: 8. Publish artifact with access token
    C--&gt;&gt;-GHA: Publish success
    end
    GHA-&gt;&gt;+C: 9. Request revocation of access token
    C--&gt;&gt;-GHA: Confirm revocation of access token
</code></pre>
<ol>
<li>A developer, possibly after merging a pull request to their default branch, triggers a GitHub Actions release workflow.
<ul>
<li>The trigger of this workflow could be either manual or automatic depending on what’s supported in the CI/CD system. Triggers that can be used to start a GitHub Action workflow can be found in <a href="https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows">their documentation</a>.</li>
</ul>
</li>
<li>The GitHub Actions workflow requests an <em>ID token</em> from the GitHub Action OIDC Provider.
<ul>
<li>For the workflow to be authorized to do this, <a href="https://docs.github.com/en/actions/deployment/security-hardening-your-deployments/about-security-hardening-with-openid-connect#adding-permissions-settings">it needs <code>id-token: write</code> permissions declared in the workflow YAML</a>.</li>
</ul>
</li>
<li>After authenticating the workflow’s request for an ID token, the GitHub Actions OIDC provider returns a cryptographically signed ID token (signed by its private key) .</li>
<li>The release workflow, sends the signed ID token to crates.io to exchange for an access token.
<ul>
<li>The ID token is not used to authorize any action on crates.io, it’s only used to authenticate.</li>
</ul>
</li>
<li>Crates.io, using the public keys of the GitHub Action OIDC Provider, validates the signature of the provided ID token that has been signed.</li>
<li>Once validated, crates.io generates a temporary access token and returns it to the Github Actions release workflow.</li>
<li>The release workflow builds the artifact to be published (i.e. <a href="https://doc.rust-lang.org/cargo/commands/cargo-package.html">the <code>.crate</code> file</a>)</li>
<li>The release workflow, using the access token retrieved from step 6, authenticates to crates.io and publishes the version of the crate.</li>
<li>As a good steward, once the crate has successfully been published, the workflow job will request the revocation of the access token from crates.io
<ul>
<li>An access token’s lifetime might outlive the actual time needed to perform the action. It’s good practice to revoke it once done to further limit any risks of accidental exposure.</li>
</ul>
</li>
</ol>
<blockquote>
<p>[!NOTE] Steps 7 and 8 are abstracted in the <code>cargo publish</code> command. The access token would be passed via the <code>CARGO_REGISTRY_TOKEN</code> environment variable.</p>
</blockquote>
</details>
<h3 id="trusted-publisher-configuration-on-cratesio"><a class="header" href="#trusted-publisher-configuration-on-cratesio">Trusted Publisher Configuration on crates.io</a></h3>
<p>Prior to publishing a crate through a GitHub Actions workflow, the crate author will need to create a <em>Trusted Publisher Configuration</em> via the crates.io web UI. This is a one-time configuration <strong>required per crate</strong>.</p>
<blockquote>
<p>[!Note] A <em>Trusted Publisher Configuration</em> can only be created after an initial manual publishing of a crate.</p>
<p>See <a href="#future-possibilities">Future Possibilities</a> for future plans to alleviate this pain.</p>
</blockquote>
<p>Without a corresponding <em>Trusted Publisher Configuration</em> any attempts from a GitHub Action workflow to exchange an ID token for an access token from crates.io will be unauthorized and fail.</p>
<p>A <em>Trusted Publisher Configuration</em> will vary on requirements depending on the trusted publisher being used (e.g. GitHub Actions, GitLab Pipelines, and so on). CI/CD providers will vary in the claims they make within their ID token.</p>
<p>For GitHub Actions, the crate author will need to provide:</p>
<ol>
<li>(required) The owning GitHub username or organization</li>
<li>(required) The repository name</li>
<li>(required) The workflow file name (must be located in <code>.github/workflows/</code>)</li>
<li>(optional) The <a href="https://docs.github.com/en/actions/deployment/targeting-different-environments/using-environments-for-deployment">GitHub Actions environment</a> name</li>
</ol>
<blockquote>
<p>[!Note] Supply chain compromises are still possible. As such, we are requiring the workflow file name to be defined in order to limit the attack surface. An attacker would need to compromise an action used specifically within the defined workflow file.</p>
<p>It’s recommended to thoroughly review any actions used in your release worfklow.</p>
</blockquote>
<h3 id="example-github-actions-workflow"><a class="header" href="#example-github-actions-workflow">Example GitHub Actions Workflow</a></h3>
<p>With a <em>Trusted Publisher Configuration</em> in place, a example GitHub Actions workflow may look like this:</p>
<pre><code class="language-yaml">name: Publish Crate

# Some may opt to use a trigger based on a push with a tag instead
on:
  release:
    types: [published]

jobs:
  build:
    runs-on: ubuntu-latest
    
    # here we use a GitHub Actions _Environment_ that allows for more 
    # control and steps to ensure security of the publishing 
    # process
    # 
    # See https://docs.github.com/en/actions/deployment/targeting-different-environments/using-environments-for-deployment
    environment: release

    permissions:
      id-token: write  # required in order to get a signed ID token
      contents: read

    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    # The step below is not strictly required as `cargo publish`
    # will perform a build as well.
    - name: Install dependencies
      run: cargo build --release

    # This action does not exist currently.
    - name: Authenticate with crates.io
      id: auth
      uses: rust-lang/crates-io-auth-action@v1

    - name: Publish to crates.io
      run: cargo publish
      env:
        CARGO_REGISTRY_TOKEN: ${{ steps.auth.outputs.token }}

</code></pre>
<h2 id="reference-level-explanation"><a class="header" href="#reference-level-explanation">Reference-level explanation</a></h2>
<h3 id="required-configuration-parameters"><a class="header" href="#required-configuration-parameters">Required Configuration Parameters</a></h3>
<p>As stated in the <a href="#trusted-publisher-configuration-cratesio">Trusted Publisher Configuration on crates.io</a> section, a configuration will need to provide:</p>
<ol>
<li>(required) The owning GitHub username or organization</li>
<li>(required) The repository name</li>
<li>(required) The workflow file name (must be located in <code>.github/workflows/</code>)</li>
<li>(optional) The <a href="https://docs.github.com/en/actions/deployment/targeting-different-environments/using-environments-for-deployment">GitHub Actions environment</a> name</li>
</ol>
<p>The crate owner will need to provide which crate the particular Trusted Publisher Configuration is allowed to publish.</p>
<p>The Trusted Publisher Configuration might look like the below, represented in JSON format:</p>
<pre><code class="language-json">{
    "name": "trusted-publisher-config-for-sampleproject",
    "required-claims": {
        "owner": "octo-org",
        "repo": "sampleproject",
        "workflow": "release.yml",
        "environment": "release"
    },
    "crate": "my-sample"
}
</code></pre>
<p>A Trusted Publisher Configuration will be <em>owned</em> by the associated crate. Any owners of the crate can create, delete, or edit these configurations.</p>
<h2 id="drawbacks"><a class="header" href="#drawbacks">Drawbacks</a></h2>
<h3 id="why-should-we-not-do-this"><a class="header" href="#why-should-we-not-do-this">Why should we not do this?</a></h3>
<blockquote>
<ul>
<li><em>There is some initial complexity in setting up trusted relationship between the CI/CD provider and crates.io.</em></li>
<li><em>There is a learning curve to understanding the OIDC authentication flow and its principles that could slow adoption.</em></li>
</ul>
</blockquote>
<p>While these are potential drawbacks, we believe the benefits outweigh them. In reality, OIDC authentication between CI/CD systems and package repositories is generally adopted quickly. PyPI’s release of trusted publishing support has seen over 13,000 projects adopt it since April 2023<sup class="footnote-reference" id="fr-2-1"><a href="#footnote-2">2</a></sup>.</p>
<blockquote>
<ul>
<li><em>The external dependency on GitHub’s OIDC provider could impact authentication processes from GitHub Actions to crates.io and introduces a potential point of failure in publishing processes.</em></li>
</ul>
</blockquote>
<p>This is unavoidable, but GitHub Actions generally has good uptime. Their most recent incident in May 2024 resulted in degraded performance of workflow runs, but not an entire outage<sup class="footnote-reference" id="fr-3-1"><a href="#footnote-3">3</a></sup>. Their most significant recent impact in April 2024 potentially resulted in a total outage of 77 minutes for some GitHub Actions users<sup class="footnote-reference" id="fr-4-1"><a href="#footnote-4">4</a></sup>.</p>
<blockquote>
<ul>
<li><em>The security model changes and requires careful consideration in configuring the GitHub Action workflow and repository permissions.</em></li>
</ul>
</blockquote>
<p><a href="https://docs.pypi.org/trusted-publishers/security-model/">PyPI does a good job of documenting these concerns.</a> In our GitHub Action performing the OIDC authentication we will use sane and secure defaults. We will also provide documentation on recommended secure configurations of GithHub Action workflows.</p>
<h2 id="rationale-and-alternatives"><a class="header" href="#rationale-and-alternatives">Rationale and alternatives</a></h2>
<h3 id="why-is-this-design-the-best-in-the-space-of-possible-designs"><a class="header" href="#why-is-this-design-the-best-in-the-space-of-possible-designs">Why is this design the best in the space of possible designs?</a></h3>
<p>This model of authentication to package repositories has been implemented in other communities (see <a href="#prior-art">prior art</a>). As this model of authentication becomes more ubiquitous adoption will become easier among the developer communities.</p>
<p>The OAuth 2.0 framework combined with the Open ID Connect protocol is widely used and well documented.</p>
<p>We can benefit from the cumulative security expertise intrinsically embedded into these solutions.</p>
<h3 id="what-other-designs-have-been-considered-and-what-is-the-rationale-for-not-choosing-them"><a class="header" href="#what-other-designs-have-been-considered-and-what-is-the-rationale-for-not-choosing-them">What other designs have been considered and what is the rationale for not choosing them?</a></h3>
<p>Some services that use OIDC to authenticate use the <em>ID token</em> itself to authorize actions.</p>
<ol>
<li>ID tokens will differ in their supported claims from publishing provider to publishing provider.
<ul>
<li>This would complicate the authorization code on crates.io for actual API actions (e.g. publishing a crate through our existing APIs) as it would require logic for each publishing provider.</li>
</ul>
</li>
<li>Identity Providers are in control of the ID token and its contents. Unexpected changes to these contents could lead to authentication issues to crates.io.
<ul>
<li>Exchanging the ID token for a crates.io token ensures we have consistency in the authorization logic of crates.io APIs.</li>
</ul>
</li>
<li>ID tokens would not benefit as much from Secret Scanning or revocation. They are JWTs with a varying format not as well-suited as the crates.io API token.
<ul>
<li>By exchanging the ID token for a crates.io-specific access token, when the access token is leaked it can be quickly detected and revoked by the <a href="https://github.blog/changelog/2023-01-19-the-crate-io-registry-is-now-a-github-secret-scanning-integrator/">existing Secret Scanning integrations</a>.</li>
</ul>
</li>
</ol>
<p>The OpenSSF Security Software Repositories Working Group <a href="https://repos.openssf.org/trusted-publishers-for-all-package-repositories#oidc-id-tokens-and-repository-controlled-tokens">provides more detailed justification</a> to use the token exchange model were a valid ID token is exchanged for a package repository specific access token.</p>
<h3 id="what-is-the-impact-of-not-doing-this"><a class="header" href="#what-is-the-impact-of-not-doing-this">What is the impact of not doing this?</a></h3>
<p>Foregoing the OIDC integration with trusted publishing providers would result in the status-quo. Authentication to crates.io from CI/CD systems would be facilitated via the current API token implementation.</p>
<p>Crate authors who are more security-sensitive could using the expiring option on API tokens to further reduce potential impact of a leaked API token. However, these API tokens would need to be regularly regenerated in order to avoid interruption in release processes.</p>
<p>These same API tokens are likely stored long term in a secrets manager like GitHub Actions Secrets or AWS Secrets Manager where a misconfiguration could lead to exposure of the secret.</p>
<blockquote>
<p>[!NOTE] Other security challenges that would persist by not utilizing Trusted Publishing are detailed in the <a href="#motivation">Motivation</a> section of this document.</p>
</blockquote>
<h2 id="prior-art"><a class="header" href="#prior-art">Prior art</a></h2>
<p>Other package repositories have implemented similar support:</p>
<ul>
<li><a href="https://docs.pypi.org/trusted-publishers/">PyPI’s Trusted Publishing</a></li>
<li><a href="https://guides.rubygems.org/trusted-publishing/">RubyGem’s Trusted Publishing</a></li>
<li><a href="https://dart.dev/tools/pub/automated-publishing">Dart’s Automated Publishing</a></li>
<li><a href="https://repos.openssf.org/trusted-publishers-for-all-package-repositories">OSSF’s Trusted Publishers For All Package Repositories Blog Post</a></li>
</ul>
<h2 id="未解決的問題"><a class="header" href="#未解決的問題">未解決的問題</a></h2>
<ul>
<li><del>Should crate owners be able to configure the allowed token scopes for a Trusted Publisher configuration?</del>
<ul>
<li><del>We could default to <code>publish-new</code> and <code>publish-update</code>, but maybe it’s best to allow this to be configurable?</del></li>
<li><em>Initially, all Trusted Publisher Configurations will default to <code>publish-update</code> with no option to change this. After some of the implementations in <a href="#future-possibilities">Future Possibilities</a> are completed, this can be expanded to allow configuration of additional scopes.</em></li>
</ul>
</li>
<li><del>How long should an access token derived from the ID token exchange be valid for?</del>
<ul>
<li>_We will provide a long enough lifetime initially for access tokens. We may also allow this to be configured in the Trusted Publisher Configuration. Regardless of the lifetime, the action that performs the token exchange will issue a request to revoke the token at the end of the workflow.</li>
</ul>
</li>
</ul>
<h3 id="out-of-scope"><a class="header" href="#out-of-scope">Out of Scope</a></h3>
<ul>
<li>Provenance verification of published crates (e.g. sigstore or other signing mechanisms).</li>
<li>Discussion/debate of CI/CD providers to support next and their expected timelines.</li>
<li>Support in the GitHub Action used to perform the OIDC authentication with other Rust package registries.</li>
<li>Direct suppport and implementation of the token exchange flow within <code>cargo</code>.</li>
</ul>
<h3 id="items-to-resolve-before-general-availability"><a class="header" href="#items-to-resolve-before-general-availability">Items to Resolve Before General Availability</a></h3>
<ul>
<li>Before crates.io officially supports the OIDC authentication flow from GitHub Actions, we will have an official GitHub Action to facilitate the OIDC token exchange.</li>
<li>Crates.io lacks accessible usage documentation. We will need to document the setup of a Trusted Publisher with screenshots and provide example GitHub Action workflows.
<ul>
<li>Maybe a good spot for this would be in <a href="https://doc.rust-lang.org/cargo/index.html">The Cargo Book</a>?</li>
</ul>
</li>
</ul>
<h2 id="future-possibilities"><a class="header" href="#future-possibilities">Future possibilities</a></h2>
<ul>
<li>Support creating <em>Trusted Publisher Configurations</em> in a <code>PENDING</code> state, prior to the initial publishing of a crate.</li>
<li>Support for defining the maximum allowed scopes (e.g. <code>publish-update</code>, <code>publish-new</code>, <code>yank</code>, etc.) allowed for the Trusted Publisher Configuration.</li>
<li>Support for a <code>DEACTIVATED</code> state on the Trusted Publisher Configuration to allow toggling on/off the ability to publish crates from the corresponding trusted publisher.</li>
<li>Support providing a list of crate names in the crates.io UI to simplify configuration for monorepos that publish multiple crates.</li>
<li>Support for additional trusted publishers (i.e. GitLab, CircleCI).</li>
<li>Support for custom assertions on OIDC ID token claims.
<ul>
<li><a href="https://docs.github.com/en/actions/deployment/security-hardening-your-deployments/about-security-hardening-with-openid-connect#understanding-the-oidc-token">Additional claims supported by GitHub Actions OIDC ID tokens</a></li>
</ul>
</li>
<li>Implement support for the authentication and token exchange within <code>cargo</code> to minimize the necessary lifetime of the token.
<ul>
<li>Once implemented, the default lifetime of the token can be reduced significantly as it will not be dependent on the build time of the crate.</li>
</ul>
</li>
<li>Support for setting up Trusted Publisher Configurations via a machine-accessible API.</li>
</ul>
<hr>
<ol class="footnote-definition">
<li id="footnote-1">
<p>https://blog.trailofbits.com/2023/05/23/trusted-publishing-a-new-benchmark-for-packaging-security/ <a href="#fr-1-1">↩</a></p>
</li>
<li id="footnote-2">
<p>https://repos.openssf.org/trusted-publishers-for-all-package-repositories#why-trusted-publishers <a href="#fr-2-1">↩</a></p>
</li>
<li id="footnote-3">
<p>https://github.blog/news-insights/company-news/github-availability-report-may-2024/ <a href="#fr-3-1">↩</a></p>
</li>
<li id="footnote-4">
<p>https://github.blog/news-insights/company-news/github-availability-report-april-2024/ <a href="#fr-4-1">↩</a></p>
</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="3681-default-field-values.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="3692-feature-unification.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="3681-default-field-values.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="3692-feature-unification.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
