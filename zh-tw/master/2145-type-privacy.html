<!DOCTYPE HTML>
<html lang="zh_TW" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>2145-type-privacy - The Rust RFC Book</title>


        <!-- Custom HTML head -->
        <script type="text/javascript" src="ltd-provenance.js"></script>
        <script type="text/javascript" src="ltd-current.js"></script>
        <script type="text/javascript" src="../../ltd-config.js"></script>
        <script type="text/javascript" src="../../ltd-flyout.js"></script>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex-c5bb60c5.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-5025baa3.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">The Rust RFC Book</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/rust-lang/rfcs" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <ul>
<li>Feature Name: N/A</li>
<li>Start Date: 2017-09-09</li>
<li>RFC PR: <a href="https://github.com/rust-lang/rfcs/pull/2145">rust-lang/rfcs#2145</a></li>
<li>Rust Issue: <a href="https://github.com/rust-lang/rust/issues/48054">rust-lang/rust#48054</a></li>
</ul>
<h2 id="摘要"><a class="header" href="#摘要">摘要</a></h2>
<p>Type privacy rules are documented.<br>Private-in-public errors are relaxed and turned into lints.</p>
<h2 id="動機"><a class="header" href="#動機">動機</a></h2>
<p>Type privacy is implemented, but its rules still need to be documentated and explained.</p>
<p>Private-in-public checker is the previous incarnation of type privacy that still exists in the compiler.<br>Experience shows that private-in-public errors are often considered non-intuitive, despite the rules being simple and sufficiently clear when explained.<br>People often expect private-in-public checker to check something it is not supposed to check and otherwise, allow code that isn’t supposed to be allowed. This creates a source of confusion.</p>
<p>With type privacy implemented, private-in-public errors are no longer strictly necessary, so they can be removed from the language, thus removing the source of confusion.<br>However diagnosing “private-in-public” situations early can still help programmers to prevent most of client-side type privacy errors, so “private-in-public” diagnostics can be turned into lints instead of being completely removed.<br>Lints, unlike errors, can use heuristics, so “private-in-public” diagnostics can match programmer’s intuition closer now by using reachability-based heuristics instead of just local <code>pub</code> annotations.</p>
<h2 id="guide-level-explanation"><a class="header" href="#guide-level-explanation">Guide-level explanation</a></h2>
<h3 id="type-privacy"><a class="header" href="#type-privacy">Type privacy</a></h3>
<p>Type privacy ensures that a type private to some module cannot be used outside of this module (unless anonymized) without a privacy error.<br>This is similar to more familiar name privacy ensuring that private items or fields can’t be <em>named</em> outside of their module without a privacy error.</p>
<p>“Using” a type means either explicitly naming it (maybe through <code>type</code> aliases), or obtaining a value of that type.</p>
<pre><code class="language-rust">mod m {
    struct Priv; // This is a type private to module `m`

    // OK, public alias to the private type
    pub type Alias = Priv;
    pub type AliasOpt = Option&lt;Priv&gt;;

    // OK, public function returning a value of the private type
    pub fn get_value() -&gt; Priv { ... }
}

// ERROR, can't name private type `m::Priv` outside of its module
type X = m::Alias;

// A type is considered private even if its primary component (type constructor)
// is public, but it has private generic arguments.
// ERROR, can't name private type `Option&lt;m::Priv&gt;` outside of its module
type X = m::AliasOpt;

fn main() {
    // ERROR, can't have a value of private type `m::Priv` outside of its module
    let x = m::get_value();
}</code></pre>
<p>Type privacy ensures that a private type is an implementation detail of its module and you can always change it in any way (e.g. add or remove methods, add or remove trait implementations) without requiring any changes in other modules.</p>
<p>Let’s imagine for a minute that type privacy doesn’t work and you can name a private type <code>Priv</code> through an alias or obtain its values outside of its module.<br>Then let’s assume that this type implements some trait <code>Trait</code> at the moment. Now foreign code can freely define functions like</p>
<pre><code class="language-rust">fn require_trait_value&lt;T: Trait&gt;(arg: T) { ... }
fn require_trait_type&lt;T: Trait&gt;() { ... }</code></pre>
<p>and pass <code>Priv</code> to them</p>
<pre><code class="language-rust">require_trait_value(value_of_priv);
require_trait_type::&lt;AliasOfPriv&gt;();</code></pre>
<p>, so it becomes a <em>requirement</em> for <code>Priv</code> to implement <code>Trait</code> and we can’t remove it anymore.<br>Type privacy helps to avoid such unintended requirements.</p>
<p>The sentence introducing type privacy contains a clarification - “unless anonymized”.<br>It means that private types can be leaked into other modules through trait objects (dynamically anonymized), or <code>impl Trait</code> (statically anonymized), or usual generics (statically anonymized as well).</p>
<pre><code class="language-rust">struct Priv;

// By defining functions like these you explicitly give a promise that they will
// always return something implementing `Trait`, maybe `Priv`, maybe some other
// type (this is an implementation detail).
impl Trait for Priv {}
pub fn leak_anonymized1() -&gt; Box&lt;Trait&gt; { Box::new(Priv) }
pub fn leak_anonymized2() -&gt; impl Trait { Priv }

// Here some code outside of our module (in `liballoc`) works with objects of
// our private type, but knows only that they are `Clone`, the specific
// container element's type is anonymized for code in `liballoc`.
impl Clone for Priv {}
let my_vec: Vec&lt;Priv&gt; = vec![Priv, Priv, Priv];
let my_vec2 = my_vec.clone();</code></pre>
<p>The rules for type privacy work for traits as well, e.g. you won’t be able to do this when trait aliases are implemented</p>
<pre><code class="language-rust">mod m {
    trait PrivTr {}
    pub trait Alias = PrivTr;
}

// ERROR, can't name private trait `m::PrivTr` outside of its module
fn f&lt;T: m::Alias&gt;() { ... }</code></pre>
<p>(Trait objects are considered types, so they are covered by previous paragraphs.)</p>
<h3 id="private-in-public-lints"><a class="header" href="#private-in-public-lints">Private-in-public lints</a></h3>
<p>Previously type privacy was ensured by so called private-in-public errors, that worked preventively.</p>
<pre><code class="language-rust">mod m {
    struct Priv;

    // ERROR, private type `Priv` in public interface.
    pub fn leak() -&gt; Priv { ... }
}

// Can't obtain a value of `Priv` because for `leak` the function definition
// itself is illegal.
let x = m::leak();</code></pre>
<p>The logic behind private-in-public rules is very simple, if some type has visibility <code>vis_type</code> then it cannot be used in interfaces of items with visibilities <code>vis_interface</code> where <code>vis_interface &gt; vis_type</code>.<br>In particular, this code is illegal</p>
<pre><code class="language-rust">mod outer {
    struct S;

    mod inner {
        pub fn f() -&gt; S { ... }
    }
}</code></pre>
<p>for a simple reason - <code>vis(f) = pub, vis(S) = pub(in outer), pub &gt; pub(in outer)</code>. Many people found this confusing because they expected private-in-public rules to be based on crate-global reachability and not on local <code>pub</code> annotations.<br>(Both <code>S</code> and <code>f</code> are reachable only from <code>outer</code> despite <code>f</code> being <code>pub</code>.)</p>
<p>In addition, private-in-public rules were found to be <a href="https://github.com/rust-lang/rust/issues/30476">insufficient</a> for ensuring type privacy due to type inference being quite smart.<br>As a result, type privacy checking was implemented directly - when we see value <code>m::leak()</code> we just check if its type private or not, so private-in-public rules became not-strictly-necessary for the compiler.</p>
<p>However, private-in-public diagnostics are still pretty useful for humans!<br>For example, if a function is defined like this</p>
<pre><code>mod m {
    struct Priv;
    pub fn f() -&gt; Priv { ... }
}
</code></pre>
<p>it’s <em>guaranteed</em> to be unusable outside of <code>m</code> because every its use will cause a type privacy error.<br>That’s probably not what the author of <code>f</code> wanted. Either <code>Priv</code> is supposed to be public, or <code>f</code> is supposed to be private. It would be nice to diagnose cases like this, but to avoid “false positives” like the previous example with <code>outer</code>/<code>inner</code>.<br>Meet reachability-based private-in-public <em>lints</em>!</p>
<h4 id="lint-1-private-types-in-primary-interface-of-effectively-public-items"><a class="header" href="#lint-1-private-types-in-primary-interface-of-effectively-public-items">Lint #1: Private types in primary interface of effectively public items</a></h4>
<p>Effective visibility of an item is how far it’s actually reexported or leaked through other means, like return types.<br>Effective visibility can never be larger than nominal visibility (i.e. what <code>pub</code> annotation says), but it can be smaller.</p>
<p>For example, in the <code>outer</code>/<code>inner</code> example nominal visibility of <code>f</code> is <code>pub</code>, but its effective visibility is <code>pub(in outer)</code>, because it’s neither reexported from <code>outer</code>, nor can be named directly from outside of it.<br><code>effective_vis(f) &lt;= vis(Priv)</code> means that the private-in-public lint #1 is <em>not</em> reported for <code>f</code>.</p>
<p>“Primary interface” in the lint name means everything in the interface except for trait bounds and <code>where</code> clauses, those are considered secondary interface.</p>
<pre><code class="language-rust">trait PrivTr {}
pub fn bad()
    -&gt; Box&lt;PrivTr&gt; // WARN, private type in primary interface
{ ... }
pub fn better&lt;T&gt;(arg: T)
    where T: PrivTr // OK, private trait in secondary interface
{ ... }</code></pre>
<p>This lint replaces part of private-in-public errors. Having something private in primary interface guarantees that the item will be unusable from outer modules due to type privacy (primary interface is considered part of the type when type privacy is checked), so it’s very desirable to warn about this situation in advance and this lint needs to be at least warn-by-default.</p>
<p>Provisional name for the lint - <code>private_interfaces</code>.</p>
<h4 id="lint-2-private-traitstypes-in-secondary-interface-of-effectively-public-items"><a class="header" href="#lint-2-private-traitstypes-in-secondary-interface-of-effectively-public-items">Lint #2: Private traits/types in secondary interface of effectively public items</a></h4>
<p>This lint is reported if private types or traits are found in trait bounds or <code>where</code> clauses of an effectively public item.</p>
<pre><code class="language-rust">trait PrivTr {}
pub fn overloaded&lt;T&gt;(arg: T)
    where T: PrivTr // WARN, private trait in secondary interface
{ ... }</code></pre>
<p>Function <code>overloaded</code> has public type, can’t leak values of any other private types and can be freely used outside of its module without causing type privacy errors. There are reasonable use cases for such functions, for example emulation of sealed traits.<br>The only suspicious part about it is documentation - what arguments can it take exactly? The set of possible argument types is closed and determined by implementations of the private trait <code>PrivTr</code>, so it’s kinda mystery unless it’s well documented by the author of <code>overloaded</code>.<br>There are stability implications as well - set of possible <code>T</code>s is still an interface of <code>overload</code>, so impls of <code>PrivTr</code> cannot be removed backward-compatibly.<br>This lint replaces part of private-in-public errors and can be reported as warn-by-default or allow-by-default.</p>
<p>Provisional name for the lint - <code>private_bounds</code>.</p>
<h4 id="lint-3-voldemort-types-its-reachable-but-i-cant-name-it"><a class="header" href="#lint-3-voldemort-types-its-reachable-but-i-cant-name-it">Lint #3: “Voldemort types” (it’s reachable, but I can’t name it)</a></h4>
<p>Consider this code</p>
<pre><code class="language-rust">mod m {
    // `S` has public nominal and effective visibility,
    // but it can't be *named* outside of `m::super`.
    pub struct S;
}

// OK, can return public type `m::S` and
// can use the returned value in outer modules.
// BUT, we can't name the returned type, unless we have `typeof`,
// and we don't have it yet.
pub fn get_voldemort() -&gt; m::S { ... }</code></pre>
<p>The “Voldemort type” (or, more often, “Voldemort trait”) pattern has legitimate uses, but often it’s just an oversight and <code>S</code> is supposed to be reexported and nameable from outer modules.<br>The lint is supposed to report items for which effective visibility is larger than the area in which they can be named.<br>This lint is new and doesn’t replace private-in-public errors, but it provides checking that many people <em>expected</em> from private-in-public.<br>The lint should be allow-by-default or it can be placed into Clippy as an alternative.</p>
<p>Provisional name for the lint - <code>unnameable_types</code>.</p>
<h4 id="lint-4-private_in_public"><a class="header" href="#lint-4-private_in_public">Lint #4: <code>private_in_public</code></a></h4>
<p>Some private-in-public errors are currently reported as a lint <code>private_in_public</code> for compatibility reasons.<br>This compatibility lint will be removed and its uses will be reported as warnings by <code>renamed_and_removed_lints</code>.</p>
<h2 id="reference-level-explanation"><a class="header" href="#reference-level-explanation">Reference-level explanation</a></h2>
<h3 id="type-privacy-1"><a class="header" href="#type-privacy-1">Type privacy</a></h3>
<h4 id="how-to-determine-visibility-of-a-type"><a class="header" href="#how-to-determine-visibility-of-a-type">How to determine visibility of a type?</a></h4>
<ul>
<li>Built-in types are considered <code>pub</code> (integer and floating point types, <code>bool</code>, <code>char</code>, <code>str</code>, <code>!</code>).</li>
<li>Type parameters (including <code>Self</code> in traits) are considered <code>pub</code> as well.</li>
<li>Arrays and slices inherit visibility from their element types.<br><code>vis([T; N]) = vis([T]) = vis(T)</code>.</li>
<li>References and pointers inherit visibility from their pointee types.<br><code>vis(&amp;MUTABILITY T) = vis(*MUTABILITY T) = vis(T)</code>.</li>
<li>Tuple types are as visible as their least visible component.<br><code>vis((A, B)) = min(vis(A), vis(B))</code>.</li>
<li>Struct, union and enum types are as visible as their least visible type argument or type constructor.<br><code>vis(Struct&lt;A, B&gt;) = min(vis(Struct), vis(A), vis(B))</code>.</li>
<li>Closures and generators have same visibilities as equivalent structs defined in the same module.<br><code>vis(CLOSURE&lt;A, B&gt;) = min(vis(CURRENT_MOD), vis(A), vis(B))</code>.</li>
<li>Traits or trait types are as visible as their least visible type argument or trait constructor.<br><code>vis(Tr&lt;A, B&gt;) = min(vis(Tr), vis(A), vis(B))</code>.</li>
<li>Trait objects and <code>impl Trait</code> types are as visible as their least visible component.<br><code>vis(TrA + TrB) = vis(impl TrA + TrB) = min(vis(TrA), vis(TrB))</code>.</li>
<li>Non-normalizable associated types are as visible as their least visible component.<br><code>vis(&lt;Type as Trait&gt;::AssocType) = min(vis(Type), vis(Trait))</code>.</li>
<li>Function pointer types are as visible as least visible types in their signatures.<br><code>vis(fn(A, B) -&gt; R) = min(vis(A), vis(B), vis(R))</code>.</li>
<li>Function item types are as visible as their least visible component as well, but the definition of a “component” is a bit more complex.
<ul>
<li>For free functions and foreign functions components include signature, type parameters and the function item’s nominal visibility.<br><code>vis(fn(A, B) -&gt; R { foo&lt;C&gt; }) = min(vis(fn(A, B) -&gt; R), vis(C), vis(foo))</code></li>
<li>For struct and enum variant constructors components include signature, type parameters and the constructor item’s nominal visibility.<br><code>vis(fn(A, B) -&gt; S&lt;C&gt; { S_CTOR&lt;C&gt; }) = min(vis(fn(A, B) -&gt; S&lt;C&gt;), vis(S_CTOR))</code>.<br><code>vis(fn(A, B) -&gt; E&lt;C&gt; { E::V_CTOR&lt;C&gt; }) = min(vis(fn(A, B) -&gt; E&lt;C&gt;), vis(E::V_CTOR))</code>.<br><code>vis(S_CTOR) = min(vis(S), vis(field_1), ..., vis(field_N))</code>.<br><code>vis(E::V_CTOR) = vis(E)</code>.</li>
<li>For inherent methods components include signature, impl type, type parameters and the method’s nominal visibility.<br><code>vis(fn(A, B) -&gt; R { &lt;Type&gt;::foo&lt;C&gt; })) = min(vis(fn(A, B) -&gt; R), vis(C), vis(Type), vis(foo))</code>.</li>
<li>For trait methods components include signature, trait, type parameters (including impl type <code>Self</code>) and the method item’s nominal visibility (inherited from the trait, included automatically).<br><code>vis(fn(A, B) -&gt; R { &lt;Type as Trait&gt;::foo&lt;C&gt; })) = min(vis(fn(A, B) -&gt; R), vis(C), vis(Type), vis(Trait))</code>.</li>
</ul>
</li>
<li>“Infer me” types <code>_</code> are replaced with their inferred types before checking.</li>
</ul>
<h4 id="the-type-privacy-rule"><a class="header" href="#the-type-privacy-rule">The type privacy rule</a></h4>
<p>A type or a trait private to module <code>m</code> (<code>vis(in m)</code>) cannot be used outside of that module (<code>vis(outside) &gt; vis(in m)</code>).<br>Uses include naming this type or trait (possibly through aliases) or obtaining values (expressions or patterns) of this type.</p>
<p>The rule is enforced non-hygienically.<br>So it’s possible for a macro 2.0 to name some private type without causing name privacy errors, but it will still be reported as a type privacy violation.<br>This can be partially relaxed in the future, but such relaxations are out of scope for this RFC.</p>
<h4 id="additional-restrictions-for-associated-items"><a class="header" href="#additional-restrictions-for-associated-items">Additional restrictions for associated items</a></h4>
<p>For technical reasons it’s not always desirable or possible to fully normalize associated types before checking them for privacy.<br>So, if we see <code>&lt;Type as Trait&gt;::AssocType</code> we can guaranteedly check only <code>Type</code> and <code>Trait</code>, but not the resulting type.<br>So we must be sure it’s no more private than what we can check.</p>
<p>As a result, private-in-public violations for associated type definitions are still eagerly reported as errors, using the old rules based on local <code>pub</code> annotations and not reachability.</p>
<pre><code class="language-rust">struct Priv;
pub struct Type;
pub trait Trait {}

impl Trait for Type {
    type AssocType = Priv; // ERROR, vis(Priv) &lt; min(vis(Trait), vis(Type))
}</code></pre>
<p>When associated function is defined in a private impl (i.e. the impl type or trait is private) it’s guaranteed that the function can’t be used outside of the impl’s area of visibility.<br>Type privacy ensures this because associated functions have their own unique types attached to them.</p>
<p>Associated constants and associated types from private impls don’t have attached unique types, so they sometimes can be used from outer modules due to sufficiently smart type inference.</p>
<pre><code class="language-rust">mod m {
    struct Priv;
    pub struct Pub&lt;T&gt;(T);
    pub trait Trait { type A; }

    // This is a private impl because `Pub&lt;Priv&gt;` is a private type
    impl Pub&lt;Priv&gt; {
        const C: u8 = 0;
    }

    // This is a private impl because `Pub&lt;Priv&gt;` is a private type
    impl Trait for Pub&lt;Priv&gt; { type A = u8; }
}
use m::*;

// But we still can use `C` outside of `m`?
let x = Pub::C; // With type inference this means `&lt;Pub&lt;Priv&gt;&gt;::C`</code></pre>
<p>It would be good to provide the same guarantees for associated constants and types as for associated functions.<br>As a result, type privacy additionally prohibits use of any associated items from private impls.</p>
<pre><code class="language-rust">// ERROR, `C` is from a private impl with type `Pub&lt;Priv&gt;`
let x = Pub::C;
// ERROR, `A` is from a private impl with type `Pub&lt;Priv&gt;`,
// even if the whole type of `x` is public `u8`.
let x: &lt;Pub&lt;_&gt; as Trait&gt;::A;</code></pre>
<p>In principle, this restriction can be considered a part of the primary type privacy rule - “can’t name a private type” - if all <code>_</code>s (types to infer, explicit or implicit) are replaced by their inferred types before checking, so <code>Pub</code> and <code>Pub&lt;_&gt;</code> in the examples above become <code>Pub&lt;Priv&gt;</code>.</p>
<h4 id="lints"><a class="header" href="#lints">Lints</a></h4>
<p>Effective visibility of an item is determined by a module into which it can be leaked through</p>
<ul>
<li>chain of public parent modules (they make it directly nameable)</li>
<li>chains of reexports or type aliases (they make it nameable through aliases)</li>
<li>functions, constants, fields “returning” the value of this item, if the item is a type</li>
<li>maybe something else if deemed necessary, but probably not macros 2.0.</li>
</ul>
<p>(Here we consider the “whole universe” a module too for uniformity.)<br>If effective visibility of an item is larger than its nominal visibility (<code>pub</code> annotation), then it’s capped by the nominal visibility.</p>
<p>Primary interface of an item is all its interface (types of returned values, types of fields, types of fn parameters) except for bounds on generic parameters and <code>where</code> clauses.</p>
<p>Secondary interface of an item consists of bounds on generic parameters and <code>where</code> clauses, including supertraits for trait items.</p>
<p>Lint <code>private_interfaces</code> is reported when a type with visibility <code>x</code> is used in primary interface of an item with effective visibility <code>y</code> and <code>x &lt; y</code>.<br>This lint is warn-by-default.</p>
<p>Lint <code>private_bounds</code> is reported when a type or trait with visibility <code>x</code> is used in secondary interface of an item with effective visibility <code>y</code> and <code>x &lt; y</code>.<br>This lint is warn-by-default.</p>
<p>Lint <code>unnameable_types</code> is reported when effective visibility of a type is larger than module in which it can be named, either directly, or through reexports, or through trivial type aliases (<code>type X = Y;</code>, no generics on both sides).<br>This lint is allow-by-default.</p>
<p>Compatibility lint <code>private_in_public</code> is never reported and removed.</p>
<h2 id="drawbacks"><a class="header" href="#drawbacks">Drawbacks</a></h2>
<p>With</p>
<pre><code class="language-rust">pub fn f&lt;T&gt;(arg: T)
    where T: PrivateTrait
{ ... }</code></pre>
<p>being legal (even if it’s warned against by default) the set of <code>PrivateTrait</code>’s implementations becomes a part of <code>f</code>’s interface. <code>PrivateTrait</code> can still be freely renamed or even split into several traits though.<br><code>rustdoc</code> may be not fully prepared to document items with private traits in bounds, manually written documentation explaining how to use the interface may be required.</p>
<h2 id="rationale-and-alternatives"><a class="header" href="#rationale-and-alternatives">Rationale and Alternatives</a></h2>
<p>Names for the lints are subject to bikeshedding.</p>
<p><code>private_interfaces</code> and <code>private_bounds</code> can be merged into one lint. The rationale for keeping them separate is different probabilities of errors in case of lint violations.<br>The first lint indicates an almost guaranteed error on client side, the second one is more in the “missing documentation” category.</p>
<h2 id="未解決的問題"><a class="header" href="#未解決的問題">未解決的問題</a></h2>
<p>It’s not fully clear if the restriction for associated type definitions required for type privacy soundness, or it’s just a workaround for a technical difficulty.</p>
<p>Interactions between macros 2.0 and the notions of reachability / effective visibility used for the lints are unclear.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="2141-alternative-registries.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="2151-raw-identifiers.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="2141-alternative-registries.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="2151-raw-identifiers.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
