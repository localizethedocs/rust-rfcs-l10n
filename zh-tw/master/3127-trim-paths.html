<!DOCTYPE HTML>
<html lang="zh_TW" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>3127-trim-paths - The Rust RFC Book</title>


        <!-- Custom HTML head -->
        <script type="text/javascript" src="ltd-provenance.js"></script>
        <script type="text/javascript" src="ltd-current.js"></script>
        <script type="text/javascript" src="../../ltd-config.js"></script>
        <script type="text/javascript" src="../../ltd-flyout.js"></script>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex-c5bb60c5.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-5025baa3.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">The Rust RFC Book</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/rust-lang/rfcs" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <ul>
<li>Feature Name: trim-paths</li>
<li>Start Date: 2021-05-24</li>
<li>RFC PR: <a href="https://github.com/rust-lang/rfcs/pull/3127">rust-lang/rfcs#3127</a></li>
<li>Rust Issue: <a href="https://github.com/rust-lang/rust/issues/111540">rust-lang/rust#111540</a></li>
</ul>
<h2 id="摘要"><a class="header" href="#摘要">摘要</a></h2>
<p>Cargo should have a <a href="https://doc.rust-lang.org/cargo/reference/profiles.html#profile-settings">profile setting</a> named <code>trim-paths</code> to sanitise absolute paths introduced during compilation that may be embedded in the compiled binary executable or library.</p>
<p><code>cargo build</code> with the default <code>release</code> profile should not produce any host filesystem dependent paths into binary executable or library. But it will retain the paths inside separate debug symbols file, if one exists, to help debuggers and profilers locate the source files.</p>
<p>To facilitate this, a new flag named <code>--remap-path-scope</code> should be added to <code>rustc</code> controlling the behaviour of <code>--remap-path-prefix</code>, allowing us to fine tune the scope of remapping, specifying paths under which context (in macro expansion, in debuginfo or in diagnostics) should or shouldn’t be remapped.</p>
<h2 id="動機"><a class="header" href="#動機">動機</a></h2>
<h3 id="sanitising-local-paths-that-are-currently-embedded"><a class="header" href="#sanitising-local-paths-that-are-currently-embedded">Sanitising local paths that are currently embedded</a></h3>
<p>Currently, executables and libraries built by Rust and Cargo have a lot of embedded absolute paths. They most frequently appear in debug information and panic messages (pointing to the panic location source file). As an example, consider the following package:</p>
<p><code>Cargo.toml</code>:</p>
<pre><code class="language-toml">[package]
name = "rfc"
version = "0.1.0"
edition = "2018"

[dependencies]
rand = "0.8.0"
</code></pre>
<p><code>src/main.rs</code></p>
<pre><code class="language-rust">use rand::prelude::*;
    
fn main() {
    let r: f64 = rand::thread_rng().gen();
    println!("{}", r);
}</code></pre>
<p>Then run</p>
<pre><code class="language-bash">$ cargo build --release
$ strings target/release/rfc | grep $HOME
</code></pre>
<p>We will see some absolute paths pointing to dependency crates downloaded by Cargo, containing our username:</p>
<pre><code>could not initialize thread_rng: /home/username/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.8.3/src/rngs/thread.rs
/home/username/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_chacha-0.3.0/src/guts.rsdescription() is deprecated; use Display
/home/username/.cargo/registry/src/github.com-1ecc6299db9ec823/getrandom-0.2.2/src/util_libc.rs
</code></pre>
<p>This is undesirable for the following reasons:</p>
<ol>
<li><strong>Privacy</strong>. <code>release</code> binaries may be distributed, and anyone could then see the builder’s local OS account username. Additionally, some CI (such as <a href="https://docs.gitlab.com/runner/best_practice/#build-directory">GitLab CI</a>) checks out the repo under a path where non-public information is included. Without sanitising the path by default, this may be inadvertently leaked.</li>
<li><strong>Build reproducibility</strong>. We would like to make it easier to reproduce binary equivalent builds. While it is not required to maintain reproducibility across different environments, removing environment-sensitive information from the build will increase the tolerance on the inevitable environment differences. This helps with build verification, as well as producing deterministic builds when using a distributed build system.</li>
</ol>
<h3 id="handling-sysroot-paths"><a class="header" href="#handling-sysroot-paths">Handling sysroot paths</a></h3>
<p>At the moment, paths to the source files of standard and core libraries, even when they are present, always begin with a virtual prefix in the form of <code>/rustc/[SHA1 hash]/library</code>. This is not an issue when the source files are not present (i.e. when <code>rust-src</code> component is not installed), but when a user installs <code>rust-src</code> they may want the path to their local copy of source files to be visible. Sometimes this is simply impossible as the path originated from the pre-compiled std and core and outside of rustc’s control, but the local path should be used where possible. Hence the default behaviour when <code>rust-src</code> is installed should be to use the local path. These local paths should be then affected by path remappings in the usual way.</p>
<h3 id="preserving-debuginfo-to-help-debuggers"><a class="header" href="#preserving-debuginfo-to-help-debuggers">Preserving debuginfo to help debuggers</a></h3>
<p>At the moment, <code>--remap-path-prefix</code> will cause paths to source files in debuginfo to be remapped. On platforms where the debuginfo resides in a separate file from the distributable binary, this may be unnecessary and it prevents debuggers from being able to find the source. Hence <code>rustc</code> should support finer grained control over paths in which contexts should be remapped.</p>
<h2 id="guide-level-explanation"><a class="header" href="#guide-level-explanation">Guide-level explanation</a></h2>
<h3 id="the-rustc-book-command-line-arguments"><a class="header" href="#the-rustc-book-command-line-arguments">The rustc book: Command-line arguments</a></h3>
<h4 id="--remap-path-scope-configure-the-scope-of-path-remapping"><a class="header" href="#--remap-path-scope-configure-the-scope-of-path-remapping"><code>--remap-path-scope</code>: configure the scope of path remapping</a></h4>
<p>When the <code>--remap-path-prefix</code> option is passed to rustc, source path prefixes in all output will be affected by default. The <code>--remap-path-scope</code> argument can be used in conjunction with <code>--remap-path-prefix</code> to determine paths in which output context should be affected. This flag accepts a comma-separated list of values and may be specified multiple times, in which case the scopes are aggregated together. The valid scopes are:</p>
<ul>
<li><code>macro</code> - apply remappings to the expansion of <code>std::file!()</code> macro. This is where paths in embedded panic messages come from</li>
<li><code>diagnostics</code> - apply remappings to printed compiler diagnostics</li>
<li><code>unsplit-debuginfo</code> - apply remappings to debug information only when they are written to compiled executables or libraries, but not when they are in split debuginfo files</li>
<li><code>split-debuginfo</code> - apply remappings to debug information only when they are written to split debug information files, but not in compiled executables or libraries</li>
<li><code>split-debuginfo-path</code> - apply remappings to the paths pointing to split debug information files. Does nothing when these files are not generated.</li>
<li><code>object</code> - an alias for <code>macro,unsplit-debuginfo,split-debuginfo-path</code>. This ensures all paths in compiled executables or libraries are remapped, but not elsewhere.</li>
<li><code>all</code> and <code>true</code> - an alias for all of the above, also equivalent to supplying only <code>--remap-path-prefix</code> without <code>--remap-path-scope</code>.</li>
</ul>
<p>Debug information are written to split files when the separate codegen option <code>-C split-debuginfo=packed</code> or <code>unpacked</code> (whether by default or explicitly set).</p>
<p>Note: this RFC is not a commitment to stabilizing all of these options; stabilization will evaluate each option and see if that option carries enough value to stabilize.</p>
<h3 id="cargo"><a class="header" href="#cargo">Cargo</a></h3>
<p><code>trim-paths</code> is a profile setting which enables and controls the sanitisation of file paths in build outputs. It is a simplified version of rustc’s <code>--remap-path-scope</code>. It takes a comma separated list of the following values:</p>
<ul>
<li><code>none</code> and <code>false</code> - disable path sanitisation</li>
<li><code>macro</code> - sanitise paths in the expansion of <code>std::file!()</code> macro. This is where paths in embedded panic messages come from</li>
<li><code>diagnostics</code> - sanitise paths in printed compiler diagnostics</li>
<li><code>object</code> - sanitise paths in compiled executables or libraries</li>
<li><code>all</code> and <code>true</code> - sanitise paths in all possible locations</li>
</ul>
<p>Note: this RFC is not a commitment to stabilizing all of these options; stabilization will evaluate each option and see if that option carries enough value to stabilize.</p>
<p>It is defaulted to <code>none</code> for debug profiles, and <code>object</code> for release profiles. You can manually override it by specifying this option in <code>Cargo.toml</code>:</p>
<pre><code class="language-toml">[profile.dev]
trim-paths = "all"

[profile.release]
trim-paths = "none"
</code></pre>
<p>The default release profile setting (<code>object</code>) sanitises only the paths in emitted executable or library files. It always affects paths from macros such as panic messages, and in debug information only if they will be embedded together with the binary (the default on platforms with ELF binaries, such as Linux and windows-gnu), but will not touch them if they are in separate files (the default on Windows MSVC and macOS). But the paths to these separate files are sanitised.</p>
<p>If <code>trim-paths</code> is not <code>none</code> or <code>false</code>, then the following paths are sanitised if they appear in a selected scope:</p>
<ol>
<li>Path to the source files of the standard and core library (sysroot) will begin with <code>/rustc/[rustc commit hash]</code>. E.g. <code>/home/username/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/result.rs</code> -&gt; <code>/rustc/fe72845f7bb6a77b9e671e6a4f32fe714962cec4/library/core/src/result.rs</code></li>
<li>Path to the current package will be stripped. E.g. <code>/home/username/crate/src/lib.rs</code> -&gt; <code>src/lib.rs</code>.</li>
<li>Path to dependency packages will be replaced with <code>[package name]-[version]</code>. E.g. <code>/home/username/deps/foo/src/lib.rs</code> -&gt; <code>foo-0.1.0/src/lib.rs</code></li>
</ol>
<p>When a path to the source files of the standard and core library is <em>not</em> in scope for sanitisation, the emitted path will depend on if <code>rust-src</code> component is present. If it is, then some paths will point to the copy of the source files on your file system; if it isn’t, then they will show up as <code>/rustc/[rustc commit hash]/library/...</code> (just like when it is selected for sanitisation). Paths to all other source files will not be affected.</p>
<p>This will not affect any hard-coded paths in the source code, such as in strings.</p>
<h4 id="environment-variables-cargo-sets-for-build-scripts"><a class="header" href="#environment-variables-cargo-sets-for-build-scripts">Environment variables Cargo sets for build scripts</a></h4>
<ul>
<li><code>CARGO_TRIM_PATHS</code> - The value of <code>trim-paths</code> profile option. If the build script introduces absolute paths to built artefacts (such as by invoking a compiler), the user may request them to be sanitised in different types of artefacts. Common paths requiring sanitisation include <code>OUT_DIR</code> and <code>CARGO_MANIFEST_DIR</code>, plus any other introduced by the build script, such as include directories.</li>
</ul>
<h2 id="reference-level-explanation"><a class="header" href="#reference-level-explanation">Reference-level explanation</a></h2>
<h3 id="trim-paths-implementation-in-cargo"><a class="header" href="#trim-paths-implementation-in-cargo"><code>trim-paths</code> implementation in Cargo</a></h3>
<p>If <code>trim-paths</code> is <code>none</code> (<code>false</code>), no extra flag is supplied to <code>rustc</code>.</p>
<p>If <code>trim-paths</code> is anything else, then its value is supplied directly to <code>rustc</code>’s <code>--remap-path-scope</code> option, along with two <code>--remap-path-prefix</code> arguments:</p>
<ul>
<li>From the path of the local sysroot to <code>/rustc/[commit hash]</code>.</li>
<li>For the current package (where the current working directory is in), from the absolute path of the package root to empty string. For other packages, from the absolute path of the package root to <code>[package name]-[package version]</code>.</li>
</ul>
<p>The default value of <code>trim-paths</code> is <code>object</code> for release profile. As a result, panic messages (which are always embedded) are sanitised. If debug information is embedded, then they are sanitised; if they are split then they are kept untouched, but the paths to these split files are sanitised.</p>
<p>Some interactions with compiler-intrinsic macros need to be considered:</p>
<ol>
<li>Path (of the current file) introduced by <a href="https://doc.rust-lang.org/std/macro.file.html"><code>file!()</code></a> <em>will</em> be remapped. <strong>Things may break</strong> if the code interacts with its own source file at runtime by using this macro.</li>
<li>Path introduced by <a href="https://doc.rust-lang.org/std/macro.include.html"><code>include!()</code></a> <em>will</em> be remapped, given that the included file is under the current package or a dependency package.</li>
</ol>
<p>If the user further supplies custom <code>--remap-path-prefix</code> arguments via <code>RUSTFLAGS</code> or similar mechanisms, they will take precedence over the one supplied by <code>trim-paths</code>. This means that the user-defined remapping arguments must be supplied <em>after</em> Cargo’s own remapping.</p>
<h3 id="changing-handling-of-sysroot-path-in-rustc"><a class="header" href="#changing-handling-of-sysroot-path-in-rustc">Changing handling of sysroot path in <code>rustc</code></a></h3>
<p>The remapping of sysroot paths to <code>/rustc/[commit hash]/library/...</code> was done when std and core libraries are compiled by Rust’s release CI. Unless <a href="https://doc.rust-lang.org/cargo/reference/unstable.html#build-std"><code>build-std</code></a> is specified, these pre-compiled artifacts are used.</p>
<p>Most of the time, these paths are never handled by <code>rustc</code>, since they are in the debuginfo of pre-compiled binaries to be directly copied by the linker. However, sometimes (such as when compiling monomorphised functions), <code>rustc</code> does pick up these metadata. When this happens, <code>rustc</code> tries to correlate this virtual path to a real path pointing to the file on the local file system. Currently the result is represented internally as if the path was remapped by a <code>--remap-path-prefix</code>, from local <code>rust-src</code> path to the virtual path <code>/rustc/[commit hash]/library/...</code>. Only the virtual path is ever emitted for metadata or codegen. We want to change this behaviour such that, when <code>rust-src</code> source files can be discovered, the virtual path is discarded and therefore the local path will be embedded, unless there is a <code>--remap-path-prefix</code> that causes this local path to be remapped in the usual way.</p>
<h3 id="split-debuginfo"><a class="header" href="#split-debuginfo">Split Debuginfo</a></h3>
<p>When debug information are not embedded in the binary (i.e. <code>split-debuginfo</code> is not <code>off</code>), absolute paths to various files containing debug information are embedded into the binary instead. Such as the absolute path to <code>.pdb</code> file (MSVC, <code>packed</code>), <code>.dwo</code> files (ELF, <code>unpacked</code>), and <code>.o</code> files (ELF, <code>packed</code>). This can be undesirable. As such, <code>split-debuginfo-path</code> is made specifically for these embedded paths.</p>
<p>On macOS and ELF platforms, these paths are introduced by <code>rustc</code> during codegen. With MSVC, however, the path to <code>.pdb</code> file is generated and embedded into the binary by the linker <code>link.exe</code>. The linker has a <code>/PDBALTPATH</code> option allows us to change the embedded path written to the binary, which could be supplied by <code>rustc</code></p>
<h2 id="usage-examples"><a class="header" href="#usage-examples">Usage examples</a></h2>
<h3 id="alice-wants-to-ship-her-binaries-but-doesnt-want-others-to-see-her-username"><a class="header" href="#alice-wants-to-ship-her-binaries-but-doesnt-want-others-to-see-her-username">Alice wants to ship her binaries, but doesn’t want others to see her username</a></h3>
<p>It works out of the box!</p>
<pre><code class="language-console">Alice$ cargo build --release
</code></pre>
<h3 id="bob-wants-to-profile-his-program-and-see-the-original-function-names-in-the-report"><a class="header" href="#bob-wants-to-profile-his-program-and-see-the-original-function-names-in-the-report">Bob wants to profile his program and see the original function names in the report</a></h3>
<p>He needs the debug information emitted and preserved, so he changes his <code>Cargo.toml</code> file</p>
<pre><code class="language-toml">[profile.release]
trim-paths = "none"
debuginfo = 1
</code></pre>
<pre><code class="language-console">Bob$ cargo build --release &amp;&amp; perf record cargo run --release
</code></pre>
<h3 id="eve-wants-to-symbolicate-her-users-crash-reports-from-binaries-without-debug-information"><a class="header" href="#eve-wants-to-symbolicate-her-users-crash-reports-from-binaries-without-debug-information">Eve wants to symbolicate her users’ crash reports from binaries without debug information</a></h3>
<p>She needs to use the <code>split-debuginfo</code> feature to produce a separate file containing debug information</p>
<pre><code class="language-toml">[profile.release]
split-debuginfo = "packed"
debuginfo = 1
</code></pre>
<p>Again, the default works fine.</p>
<pre><code class="language-console">Eve$ cargo build --release
</code></pre>
<p>She can ship her binary like Alice, without worrying about leaking usernames.</p>
<h3 id="hana-needs-to-compile-a-c-program-in-their-build-script"><a class="header" href="#hana-needs-to-compile-a-c-program-in-their-build-script">Hana needs to compile a C program in their build script</a></h3>
<p>They can consult <code>CARGO_TRIM_PATHS</code> in their build script to find out paths in what places the user wants sanitised</p>
<pre><code class="language-rust">// in build.rs
use std::env;
use std::process::Command;

let mut gcc = Command::new("gcc");
let out_dir = env::var("OUT_DIR").unwrap();
let scope = env::var("CARGO_TRIM_PATHS").unwrap();

if scope != "none" &amp;&amp; scope != "false" {
   // Runtime working directory of the build script
   let cwd = env::var("CARGO_MANIFEST_DIR").unwrap();
   let gcc_scope = match scope.as_str() {
      "macro" =&gt; "-fmacro-prefix-map",
      _       =&gt; "-ffile-prefix-map",
   };
   gcc.args([&amp;format!("{gcc_scope}={cwd}=redacted"), &amp;format!("{gcc_scope}={out_dir}=redacted")]);
}

gcc.args(["-std=c11", &amp;format!("-o={out_dir}/lib.o"), "lib.c"]);

let output = gcc.output();

//... do stuff</code></pre>
<pre><code class="language-console">Hana$ cargo build --release
</code></pre>
<h2 id="drawbacks"><a class="header" href="#drawbacks">Drawbacks</a></h2>
<p>The user will not be able to <code>Ctrl+click</code> on any paths provided in panic messages or backtraces outside of the working directory. But there shouldn’t be any confusion as the combination of package name and version can be used to pinpoint the file.</p>
<p>As mentioned above, <code>trim-paths</code> may break code that relies on <code>std::file!()</code> to evaluate to an accessible path to the file. Hence enabling it by default for release builds may be a technically breaking change. Occurrences of such use should be extremely rare but should be investigated via a Crater run. In case this breakage is unacceptable, <code>trim-paths</code> can be made an opt-in option rather than default in any build profile.</p>
<h2 id="rationale-and-alternatives"><a class="header" href="#rationale-and-alternatives">Rationale and alternatives</a></h2>
<p>There has been an issue (https://github.com/rust-lang/rust/issues/40552) asking for path sanitisation to be implemented and enabled by default for release builds. It has, over the past 4 years, gained a decent amount of popular support. The remapping rule proposed here is very simple to implement.</p>
<p>Paths to sysroot crates are specially handled by <code>rustc</code>. Due to this, the behaviour we currently have is that all such paths are virtualised. Although good for privacy and reproducibility, some people find it a hindrance for debugging: https://github.com/rust-lang/rust/issues/85463. Hence the user should be given control on if they want the virtual or local path.</p>
<p>An alternative is to extend the syntax accepted by <code>--remap-path-prefix</code> or add a new option called <code>--remap-path-prefix-scoped</code> which allows scoping rules to be explicitly applied to each remapping. This can co-exist with <code>--remap-path-scope</code> so it will be discussed further in <a href="#future-possibilities">Future possibilities</a> section.</p>
<h3 id="rationale-for-the---remap-path-scope-options"><a class="header" href="#rationale-for-the---remap-path-scope-options">Rationale for the <code>--remap-path-scope</code> options</a></h3>
<p>There are quite a few options available for <code>--remap-path-scope</code>. Not all of them are expected to have meaningful use-cases in their own right. Some are only added for completeness, that is, the behaviour of <code>--remap-path-scope=all</code> (or the original <code>--remap-path-prefix</code> on its own) is the same as specifying all individual scopes. In the future, we expect some of the scopes to be removed as independent options, while preserving the behaviour of <code>--remap-path-scope=all</code> and the stable <code>--remap-path-prefix</code>, which is “Remap source names in all output”.</p>
<ul>
<li><code>macro</code> is primarily meant for panic messages embedded in binaries.</li>
<li><code>diagnostics</code> is unlikely to be used on its own as it only affects console outputs, but is required for completeness. See <a href="https://github.com/rust-lang/rust/issues/87745">#87745</a>.</li>
<li><code>unsplit-debuginfo</code> is used to sanitise debuginfo embedded in binaries.</li>
<li><code>split-debuginfo</code> is used to sanitise debuginfo separate from binaries. This may be used when debuginfo files are separate and the author still wants to distribute them.</li>
<li><code>split-debuginfo-path</code> is used to sanitise the path embedded in binaries pointing to separate debuginfo files. This is likely needed in all contexts where <code>unsplit-debuginfo</code> is used, but it’s technically a separate piece of information inserted by the linker, not rustc.</li>
<li><code>object</code> is a shorthand for the most common use-case: sanitise everything in binaries, but nowhere else.</li>
<li><code>all</code> and <code>true</code> preserves the documented behaviour of <code>--remap-path-prefix</code>.</li>
</ul>
<h2 id="prior-art"><a class="header" href="#prior-art">Prior art</a></h2>
<p>The name <code>trim-paths</code> came from the <a href="https://golang.org/cmd/go/#hdr-Compile_packages_and_dependencies">similar feature</a> in Go. An alternative name <code>sanitize-paths</code> was first considered but the spelling of “sanitise” differs across the pond and down under. It is also not as short and concise.</p>
<p>Go does not enable this by default. Since Go does not differ between debug and release builds, removing absolute paths for all build would be a hassle for debugging. However this is not an issue for Rust as we have separate debug build profile.</p>
<p>GCC and Clang both have a flag equivalent to <code>--remap-path-prefix</code>, but they also both have two separate flags one for only macro expansion and the other for only debuginfo: https://reproducible-builds.org/docs/build-path/. This is the origin of the <code>--remap-path-scope</code> idea.</p>
<h2 id="未解決的問題"><a class="header" href="#未解決的問題">未解決的問題</a></h2>
<ul>
<li>Should we use a slightly more complex remapping rule, like distinguishing packages from registry, git and path, as proposed in <a href="https://github.com/rust-lang/rust/issues/40552">Issue #40552</a>?</li>
<li>With debug information in separate files, debuggers and Rust’s own backtrace rely on the path embedded in the binary to find these files to display source code lines, columns and symbols etc. If we sanitise these paths to relative paths, then debuggers and backtrace must be invoked in specific directories for these paths to work. <a href="https://github.com/rust-lang/rust/issues/87825#issuecomment-920693005">For instance</a>, if the absolute path to the <code>.pdb</code> file is sanitised to the relative <code>target/release/foo.pdb</code>, then the binary must be invoked under the crate root as <code>target/release/foo</code> to allow the correct backtrace to be displayed.</li>
<li>Should we treat the current package the same as other packages? We could have one fewer remapping rule by remapping all package roots to <code>[package name]-[version]</code>. A minor downside to this is not being able to <code>Ctrl+click</code> on paths to files the user is working on from panic messages.</li>
<li>Will these cover all potentially embedded paths? Have we missed anything?</li>
</ul>
<h2 id="future-possibilities"><a class="header" href="#future-possibilities">Future possibilities</a></h2>
<h3 id="per-mapping-scope-control"><a class="header" href="#per-mapping-scope-control">Per-mapping scope control</a></h3>
<p>If it turns out that we want to enable finer grained scoping control on each individual remapping, we could use a <code>scopes:from=to</code> syntax. E.g. <code>split-debuginfo,unsplit-debuginfo,diagnostics:/path/to/src=src</code> will remove all references to <code>/path/to/src</code> from compiler diagnostics and debug information, but they are retained in panic messages.</p>
<p>How exactly this new syntax will look like is, of course, up to further discussion. Using comma as a separator for scopes may look ambiguous as <code>macro,diagnostics:/path/from=to</code> could be interpreted as <code>macro</code> and <code>diagnostics:/path/from=to</code>.</p>
<p>This syntax can be used with either a brand new <code>--remap-path-prefix-scoped</code> option, or we could extend the existing <code>--remap-path-prefix</code> option to take in this new syntax.</p>
<p>If we were to extend the existing <code>--remap-path-prefix</code>, there may be an ambiguity to whether <code>:</code> means a separator between scope list and mapping, or is it a part of the path; if the first <code>:</code> supplied belongs to the path then it would have to be escaped. This could be technically breaking.</p>
<p>In any case, future inclusion of this new syntax will not affect <code>--remap-path-scope</code> introduced in this RFC. Scopes specified in <code>--remap-path-scope</code> will be used as default for all mappings, and explicit scopes for an individual mapping will take precedence on that mapping.</p>
<h3 id="sysroot-paths-uniformity"><a class="header" href="#sysroot-paths-uniformity">Sysroot paths uniformity</a></h3>
<p>Since some virtualised sysroot paths are hardcoded in the pre-compiled debuginfo, while the others can be resolved back to a local path with <code>rust-src</code>, the user may see them interleaved</p>
<pre><code>   0: rust_begin_unwind
             at /rustc/881c1ac408d93bb7adaa3a51dabab9266e82eee8/library/std/src/panicking.rs:493:5
   1: core::panicking::panic_fmt
             at /rustc/881c1ac408d93bb7adaa3a51dabab9266e82eee8/library/core/src/panicking.rs:92:14
   2: core::result::unwrap_failed
             at /rustc/881c1ac408d93bb7adaa3a51dabab9266e82eee8/library/core/src/result.rs:1355:5
   3: core::result::Result&lt;T,E&gt;::unwrap
             at /home/jonas/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/result.rs:1037:23
</code></pre>
<p>This is not very nice. It is infeasible to fix up the pre-compiled debuginfo before linking to fully remove the virtual paths, so demapping needs to happen when it is displayed (in this case, when the backtrace is printed). This is out of scope of this RFC but it may be something we want to do separately in the future.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="3123-rustdoc-scrape-examples.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="3128-io-safety.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="3123-rustdoc-scrape-examples.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="3128-io-safety.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
