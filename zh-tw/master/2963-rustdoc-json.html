<!DOCTYPE HTML>
<html lang="zh_TW" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>2963-rustdoc-json - The Rust RFC Book</title>


        <!-- Custom HTML head -->
        <script type="text/javascript" src="ltd-provenance.js"></script>
        <script type="text/javascript" src="ltd-current.js"></script>
        <script type="text/javascript" src="../../ltd-config.js"></script>
        <script type="text/javascript" src="../../ltd-flyout.js"></script>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex-c5bb60c5.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-5025baa3.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">The Rust RFC Book</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/rust-lang/rfcs" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <ul>
<li>Feature Name: <code>rustdoc_json</code></li>
<li>Start Date: 2020-06-26</li>
<li>RFC PR: <a href="https://github.com/rust-lang/rfcs/pull/2963">rust-lang/rfcs#2963</a></li>
<li>Rust Issue: <a href="https://github.com/rust-lang/rust/issues/76578">rust-lang/rust#76578</a></li>
</ul>
<h2 id="摘要"><a class="header" href="#摘要">摘要</a></h2>
<p>This RFC describes the design of a JSON output for the tool <code>rustdoc</code>, to allow tools to lean on its data collection and refinement but provide a different front-end.</p>
<h2 id="動機"><a class="header" href="#動機">動機</a></h2>
<p>The current HTML output of <code>rustdoc</code> is often lauded as a key selling point of Rust. It’s a ubiquitous tool, that you can use to easily find nearly anything you need to know about a crate. However, despite its versatility, its output format has some drawbacks:</p>
<ul>
<li>Viewing this output requires a web browser, with (for some features of the output) a JavaScript interpreter.</li>
<li>The HTML output of <code>rustdoc</code> is explicitly not stabilized, to allow <code>rustdoc</code> developers the option to tweak the display of information, add new information, etc. In addition it’s not generated  with the intent of being scraped by users which makes converting this HTML into a different format impractical. People are still able to build <a href="https://crates.io/crates/rocdoc">cool stuff</a> on top of it, but it’s unwieldy and limiting to parse the HTML like that. For use cases like this, a stable, well documented, easily parsable format with semantic information accessible would be far more useful.</li>
<li>As the HTML is the only available output of <code>rustdoc</code>, its integration into centralized, multi-language, documentation browsers is difficult.</li>
</ul>
<p>In addition, <code>rustdoc</code> had JSON output in the past, but it failed to keep up with the changing language and <a href="https://github.com/rust-lang/rust/pull/32773">was taken out</a> in 2016. With <code>rustdoc</code> in a more stable position, it’s possible to re-introduce this feature and ensure its stability. This <a href="https://internals.rust-lang.org/t/design-discussion-json-output-for-rustdoc/8271/6">was brought up in 2018</a> with a positive response and there are <a href="https://github.com/rust-lang/rust/issues/44136#issuecomment-467144974">several</a> <a href="https://internals.rust-lang.org/t/current-state-of-rustdoc-and-cargo/11721">recent</a> discussions indicating that it would be a useful feature.</p>
<p>In <a href="https://github.com/QuietMisdreavus/rfcs/blob/rustdoc-json/text/0000-rustdoc-json.md#unresolved-questions">the draft RFC from 2018</a> there was some discussion of utilizing <code>save-analysis</code> to provide this information, but with <a href="https://github.com/rust-lang/rfcs/pull/2912">RLS being replaced by rust-analyzer</a> it’s possible that the feature will be eventually removed from the compiler. In addition <code>save-analysis</code> output is just as unstable as the current HTML output of <code>rustdoc</code>, so a separate format is preferable.</p>
<h2 id="guide-level-explanation"><a class="header" href="#guide-level-explanation">Guide-level explanation</a></h2>
<p>(<em>Upon successful implementation/stabilization, this documentation should live in The Rustdoc Book.</em>)</p>
<p>In addition to generating the regular HTML, <code>rustdoc</code> can create a JSON file based on your crate. These can be used by other tools to take information about your crate and convert it into other output formats, insert into centralized documentation systems, create language bindings, etc.</p>
<p>To get this output, pass the <code>--output-format json</code> flag to <code>rustdoc</code>:</p>
<pre><code class="language-shell">$ rustdoc lib.rs --output-format json
</code></pre>
<p>This will output a JSON file in the current directory (by default). For example, say you have the following crate:</p>
<pre><code class="language-rust">//! Here are some crate-level docs!

/// Here are some docs for `some_fn`!
pub fn some_fn() {}

/// Here are some docs for `SomeStruct`!
pub struct SomeStruct;</code></pre>
<p>After running the above command, you should get a <code>lib.json</code> file like the following:</p>
<pre><code class="language-json">{
  "root": "0:0",
  "version": null,
  "includes_private": false,
  "index": {
    "0:3": {
      "crate_id": 0,
      "name": "some_fn",
      "source": {
        "filename": "lib.rs",
        "begin": [4, 0],
        "end": [4, 19]
      },
      "visibility": "public",
      "docs": "Here are some docs for `some_fn`!",
      "attrs": [],
      "kind": "function",
      "inner": {
        "decl": {
          "inputs": [],
          "output": null,
          "c_variadic": false
        },
        "generics": {...},
        "header": "",
        "abi": "\"Rust\""
      }
    },
    "0:4": {
      "crate_id": 0,
      "name": "SomeStruct",
      "source": {
        "filename": "lib.rs",
        "begin": [7, 0],
        "end": [7, 22]
      },
      "visibility": "public",
      "docs": "Here are some docs for `SomeStruct`!",
      "attrs": [],
      "kind": "struct",
      "inner": {
        "struct_type": "unit",
        "generics": {...},
        "fields_stripped": false,
        "fields": [],
        "impls": [...]
      }
    },
    "0:0": {
      "crate_id": 0,
      "name": "lib",
      "source": {
        "filename": "lib.rs",
        "begin": [1, 0],
        "end": [7, 22]
      },
      "visibility": "public",
      "docs": "Here are some crate-level docs!",
      "attrs": [],
      "kind": "module",
      "inner": {
        "is_crate": true,
        "items": [
          "0:4",
          "0:3"
        ]
      }
    }
  },
  "paths": {
    "0:3": {
      "crate_id": 0,
      "path": ["lib", "some_fn"],
      "kind": "function"
    },
    "0:4": {
      "crate_id": 0,
      "path": ["lib", "SomeStruct"],
      "kind": "struct"
    },
    ...
  },
  "extern_crates": {
    "9": {
      "name": "backtrace",
      "html_root_url": "https://docs.rs/backtrace/"
      },
    "2": {
      "name": "core",
      "html_root_url": "https://doc.rust-lang.org/nightly/"
    },
    "1": {
      "name": "std",
      "html_root_url": "https://doc.rust-lang.org/nightly/"
    },
    ...
  }
}
</code></pre>
<h2 id="reference-level-explanation"><a class="header" href="#reference-level-explanation">Reference-level explanation</a></h2>
<p>(<em>Upon successful implementation/stabilization, this documentation should live in The Rustdoc Book and/or an external crate’s Rustdoc.</em>)</p>
<p>(<em>Given that the JSON output will be implemented as a set of Rust types with serde serialization, the most useful docs for them would be the 40 or so types themselves. By writing docs on those types the Rustdoc page for that module would become a good reference. It may be helpful to provide some sort of <a href="http://json-schema.org/">schema</a> for use with other languages</em>)</p>
<p>When you request JSON output from <code>rustdoc</code>, you’re getting a version of the Rust abstract syntax tree (AST), so you could see anything that you could export from a valid Rust crate. The following types can appear in the output:</p>
<h3 id="id"><a class="header" href="#id">ID</a></h3>
<p>To provide various maps/references to items, the JSON output uses unique strings as IDs for each item. They happen to be the compiler internal DefId for that item, but in the JSON blob they should be treated as opaque as they aren’t guaranteed to be stable across compiler invocations. IDs are only valid/consistent within a single JSON blob. They cannot be used to resolve references between the JSON output of different crates (see <a href="#resolving-ids">the Resolving IDs section</a>).</p>
<h3 id="crate"><a class="header" href="#crate">Crate</a></h3>
<p>A Crate is the root of the outputted JSON blob. It contains all doc-relevant information about the local crate, as well as some information about external items that are referred to locally.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>name</code></td><td>String</td><td>The name of the crate. If <code>--crate-name</code> is not given, the filename is used.</td></tr>
<tr><td><code>version</code></td><td>String</td><td>(<em>Optional</em>) The version string given to <code>--crate-version</code>, if any.</td></tr>
<tr><td><code>includes_private</code></td><td>bool</td><td>Whether or not the output includes private items.</td></tr>
<tr><td><code>root</code></td><td><a href="#ID">ID</a></td><td>The ID of the root module Item.</td></tr>
<tr><td><code>index</code></td><td>Map&lt;<a href="#ID">ID</a>, <a href="#Item">Item</a>&gt;</td><td>A collection of all Items in the crate<a href="#resolving-ids">*</a>.</td></tr>
<tr><td><code>paths</code></td><td>Map&lt;<a href="#ID">ID</a>, <a href="#ItemSummary">ItemSummary</a>&gt;</td><td>Maps all IDs (even external ones<a href="#resolving-ids">*</a>) to a brief description including their name, crate of origin, and kind.</td></tr>
<tr><td><code>extern_crates</code></td><td>Map&lt;int, <a href="#ExternalCrate">ExternalCrate</a>&gt;</td><td>A map of “crate numbers” to metadata about that crate.</td></tr>
<tr><td><code>format_version</code></td><td>int</td><td>The version of the structure of this blob. The structure described by this RFC will be version <code>1</code>, and it will be changed if incompatible changes are ever made.</td></tr>
</tbody>
</table>
</div>
<h4 id="resolving-ids"><a class="header" href="#resolving-ids">Resolving IDs</a></h4>
<p>The crate’s <code>index</code> contains mostly local items, which includes impls of external traits on local types or local traits on external types. The exception to this is that external trait definitions and their associated items are also included in the <code>index</code> because this information is useful when generating the comprehensive list of methods for a type.</p>
<p>This means that many IDs aren’t included in the <code>index</code> (any reference to a struct, macro, etc. from a different crate). In these cases the fallback is to look up the ID in the crate’s <code>paths</code>. That gives <a href="#ItemSummary">enough information</a> about the item to create cross references or simply provide a name without copying all of the information about external items into the local crate’s JSON output.</p>
<h4 id="externalcrate"><a class="header" href="#externalcrate">ExternalCrate</a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>name</code></td><td>String</td><td>The name of the crate.</td></tr>
<tr><td><code>html_root_url</code></td><td>String</td><td>(<em>Optional</em>) The <code>html_root_url</code> for that crate if they specify one.</td></tr>
</tbody>
</table>
</div>
<h4 id="itemsummary"><a class="header" href="#itemsummary">ItemSummary</a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>crate_id</code></td><td>int</td><td>A number corresponding to the crate this Item is from. Used as an key to the <code>extern_crates</code> map in <a href="#Crate">Crate</a>. A value of zero represents an Item from the local crate, any other number means that this Item is external.</td></tr>
<tr><td><code>path</code></td><td>[String]</td><td>The fully qualified path (e.g. <code>["std", "io", "lazy", "Lazy"]</code> for <code>std::io::lazy::Lazy</code>) of this Item.</td></tr>
<tr><td><code>kind</code></td><td>String</td><td>What type of Item this is (see <a href="#Item">Item</a>).</td></tr>
</tbody>
</table>
</div>
<h3 id="item"><a class="header" href="#item">Item</a></h3>
<p>An Item represents anything that can hold documentation - modules, structs, enums, functions, traits, type aliases, and more. The Item data type holds fields that can apply to any of these, and leaves kind-specific details (like function args or enum variants) to the <code>inner</code> field.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>crate_id</code></td><td>int</td><td>A number corresponding to the crate this Item is from. Used as an key to the <code>extern_crates</code> map in <a href="#Crate">Crate</a>. A value of zero represents an Item from the local crate, any other number means that this Item is external.</td></tr>
<tr><td><code>name</code></td><td>String</td><td>The name of the Item, if present. Some Items, like impl blocks, do not have names.</td></tr>
<tr><td><code>span</code></td><td><a href="#Span">Span</a></td><td>(<em>Optional</em>) The source location of this Item.</td></tr>
<tr><td><code>visibility</code></td><td>String</td><td><code>"default"</code>, <code>"public"</code>, or <code>"crate"</code><a href="#restricted-visibility">*</a>.</td></tr>
<tr><td><code>docs</code></td><td>String</td><td>The extracted documentation text from the Item.</td></tr>
<tr><td><code>links</code></td><td>Map&lt;String, <a href="#ID">ID</a>&gt;</td><td>A map of intra-doc link names to the IDs of the items they resolve to. For example if the <code>docs</code> string contained <code>"see [HashMap][std::collections::HashMap] for more details"</code> then <code>links</code> would have <code>"std::collections::HashMap": "&lt;some id&gt;"</code>.</td></tr>
<tr><td><code>attrs</code></td><td>[String]</td><td>The <a href="#Unstable">unstable</a> stringified attributes (other than doc comments) on the Item (e.g. <code>["#[inline]", "#[test]"]</code>).</td></tr>
<tr><td><code>deprecation</code></td><td><a href="#Deprecation">Deprecation</a></td><td>(<em>Optional</em>) Information about the Item’s deprecation, if present.</td></tr>
<tr><td><code>kind</code></td><td>String</td><td>The kind of Item this is. Determines what fields are in <code>inner</code>.</td></tr>
<tr><td><code>inner</code></td><td>Object</td><td>The type-specific fields describing this Item. Check the <code>kind</code> field to determine what’s available.</td></tr>
</tbody>
</table>
</div>
<h4 id="restricted-visibility"><a class="header" href="#restricted-visibility">Restricted visibility</a></h4>
<p>When using <code>--document-private-items</code>, <code>pub(in path)</code> items can appear in the output in which case the visibility field will be an Object instead of a string. It will contain the single key <code>"restricted"</code> with the following values:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>parent</code></td><td><a href="#ID">ID</a></td><td>The ID of the module that this items visibility is restricted to.</td></tr>
<tr><td><code>path</code></td><td>String</td><td>How that module path was referenced in the code (like <code>"super::super"</code>, or <code>"crate::foo"</code>).</td></tr>
</tbody>
</table>
</div>
<h4 id="kind--module"><a class="header" href="#kind--module"><code>kind == "module"</code></a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>items</code></td><td>[<a href="#ID">ID</a>]</td><td>The list of Items contained within this module. The order of definitions is preserved.</td></tr>
</tbody>
</table>
</div>
<h4 id="kind--function"><a class="header" href="#kind--function"><code>kind == "function"</code></a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>decl</code></td><td><a href="#FnDecl">FnDecl</a></td><td>Information about the function signature, or declaration.</td></tr>
<tr><td><code>generics</code></td><td><a href="#Generics">Generics</a></td><td>Information about the function’s type parameters and <code>where</code> clauses.</td></tr>
<tr><td><code>header</code></td><td>String</td><td><code>"const"</code>, <code>"async"</code>, <code>"unsafe"</code>, or a space separated combination of those modifiers.</td></tr>
<tr><td><code>abi</code></td><td>String</td><td>The ABI string on the function. Non-<code>extern</code> functions have a <code>"Rust"</code> ABI, whereas <code>extern</code> functions without an explicit ABI are <code>"C"</code>. See <a href="https://doc.rust-lang.org/reference/items/external-blocks.html#abi">the reference</a> for more details.</td></tr>
</tbody>
</table>
</div>
<h4 id="kind--struct--union"><a class="header" href="#kind--struct--union"><code>kind == "struct" || "union"</code></a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>struct_type</code></td><td>String</td><td>Either <code>"plain"</code> for braced structs, <code>"tuple"</code> for tuple structs, or <code>"unit"</code> for unit structs.</td></tr>
<tr><td><code>generics</code></td><td><a href="#Generics">Generics</a></td><td>Information about the struct’s type parameters and <code>where</code> clauses.</td></tr>
<tr><td><code>fields_stripped</code></td><td>bool</td><td>Whether any fields have been removed from the result, due to being private or hidden.</td></tr>
<tr><td><code>fields</code></td><td>[<a href="#ID">ID</a>]</td><td>The list of fields in the struct. All of the corresponding Items have <code>kind == "struct_field"</code>.</td></tr>
<tr><td><code>impls</code></td><td>[<a href="#ID">ID</a>]</td><td>All impls (both trait and inherent) for this type. All of the corresponding Items have <code>kind = "impl"</code></td></tr>
</tbody>
</table>
</div>
<h4 id="kind--struct_field"><a class="header" href="#kind--struct_field"><code>kind == "struct_field"</code></a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>type</code></td><td><a href="#Type">Type</a></td><td>The type of this field.</td></tr>
</tbody>
</table>
</div>
<h4 id="kind--enum"><a class="header" href="#kind--enum"><code>kind == "enum"</code></a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>generics</code></td><td><a href="#Generics">Generics</a></td><td>Information about the enum’s type parameters and <code>where</code> clauses.</td></tr>
<tr><td><code>fields</code></td><td>[<a href="#ID">ID</a>]</td><td>The list of variants in the enum. All of the corresponding Items have <code>kind == "variant"</code>.</td></tr>
<tr><td><code>fields_stripped</code></td><td>bool</td><td>Whether any variants have been removed from the result, due to being private or hidden.</td></tr>
<tr><td><code>impls</code></td><td>[<a href="#ID">ID</a>]</td><td>All impls (both trait and inherent) for this type. All of the corresponding Items have <code>kind = "impl"</code></td></tr>
</tbody>
</table>
</div>
<h4 id="kind--variant"><a class="header" href="#kind--variant"><code>kind == "variant"</code></a></h4>
<p>Has a <code>variant_kind</code> field with 3 possible values and an <code>variant_inner</code> field with more info if necessary:</p>
<ul>
<li><code>"plain"</code> (e.g. <code>Enum::Variant</code>) with no <code>variant_inner</code> value.</li>
<li><code>"tuple"</code> (e.g. <code>Enum::Variant(u32, String)</code>) with <code>"variant_inner": [Type]</code></li>
<li><code>"struct"</code> (e.g. <code>Enum::Variant{foo: u32, bar: String}</code>) with <code>"variant_inner": [ID]</code> which is a list of this variant’s “struct_field” items.</li>
</ul>
<h4 id="kind--trait"><a class="header" href="#kind--trait"><code>kind == "trait"</code></a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>is_auto</code></td><td>bool</td><td>Whether this trait is an autotrait like <code>Sync</code>.</td></tr>
<tr><td><code>is_unsafe</code></td><td>bool</td><td>Whether this is an <code>unsafe trait</code> such as <code>GlobalAlloc</code>.</td></tr>
<tr><td><code>items</code></td><td>[<a href="#ID">ID</a>]</td><td>The list of associated items contained in this trait definition.</td></tr>
<tr><td><code>generics</code></td><td><a href="#Generics">Generics</a></td><td>Information about the trait’s type parameters and <code>where</code> clauses.</td></tr>
<tr><td><code>bounds</code></td><td>[<a href="#GenericBound">GenericBound</a>]</td><td>Trait bounds for this trait definition (e.g.  <code>trait Foo: Bar&lt;T&gt; + Clone</code>).</td></tr>
</tbody>
</table>
</div>
<h4 id="kind--trait_alias"><a class="header" href="#kind--trait_alias"><code>kind == "trait_alias"</code></a></h4>
<p>An <a href="https://doc.rust-lang.org/beta/unstable-book/language-features/trait-alias.html">unstable feature</a> which allows writing aliases like <code>trait Foo = std::fmt::Debug + Send</code> and then using <code>Foo</code> in bounds rather than writing out the individual traits.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>generics</code></td><td><a href="#Generics">Generics</a></td><td>Any type parameters that the trait alias takes.</td></tr>
<tr><td><code>bounds</code></td><td>[<a href="#GenericBound">GenericBound</a>]</td><td>The list of traits after the equals.</td></tr>
</tbody>
</table>
</div>
<h4 id="kind--method"><a class="header" href="#kind--method"><code>kind == "method"</code></a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>decl</code></td><td><a href="#FnDecl">FnDecl</a></td><td>Information about the method signature, or declaration.</td></tr>
<tr><td><code>generics</code></td><td><a href="#Generics">Generics</a></td><td>Information about the method’s type parameters and <code>where</code> clauses.</td></tr>
<tr><td><code>header</code></td><td>String</td><td><code>"const"</code>, <code>"async"</code>, <code>"unsafe"</code>, or a space separated combination of those modifiers.</td></tr>
<tr><td><code>has_body</code></td><td>bool</td><td>Whether this is just a method signature (in a trait definition) or a method with an actual body.</td></tr>
</tbody>
</table>
</div>
<h4 id="kind--assoc_const"><a class="header" href="#kind--assoc_const"><code>kind == "assoc_const"</code></a></h4>
<p>These items only show up in trait <em>definitions</em>. When looking at a trait impl item, the item where the associated constant is defined is a <code>"constant"</code> item.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>type</code></td><td><a href="#Type">Type</a></td><td>The type of this associated const.</td></tr>
<tr><td><code>default</code></td><td>String</td><td>(<em>Optional</em>) The stringified expression for the default value, if provided.</td></tr>
</tbody>
</table>
</div>
<h4 id="kind--assoc_type"><a class="header" href="#kind--assoc_type"><code>kind == "assoc_type"</code></a></h4>
<p>These items only show up in trait <em>definitions</em>. When looking at a trait impl item, the item where the associated type is defined is a <code>"typedef"</code> item.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>bounds</code></td><td>[<a href="#GenericBound">GenericBound</a>]</td><td>The bounds for this associated type.</td></tr>
<tr><td><code>default</code></td><td><a href="#Type">Type</a></td><td>(<em>Optional</em>) The default for this type, if provided.</td></tr>
</tbody>
</table>
</div>
<h4 id="kind--impl"><a class="header" href="#kind--impl"><code>kind == "impl"</code></a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>is_unsafe</code></td><td>bool</td><td>Whether this impl is for an unsafe trait.</td></tr>
<tr><td><code>generics</code></td><td><a href="#Generics">Generics</a></td><td>Information about the impl’s type parameters and <code>where</code> clauses.</td></tr>
<tr><td><code>provided_trait_methods</code></td><td>[String]</td><td>The list of names for all provided methods in this impl block. This is provided for ease of access if you don’t need more information from the <code>items</code> field.</td></tr>
<tr><td><code>trait</code></td><td><a href="#Type">Type</a></td><td>(<em>Optional</em>) The trait being implemented or <code>null</code> if the impl is “inherent”, which means <code>impl Struct {}</code> as opposed to <code>impl Trait for Struct {}</code>.</td></tr>
<tr><td><code>for</code></td><td><a href="#Type">Type</a></td><td>The type that the impl block is for.</td></tr>
<tr><td><code>items</code></td><td>[<a href="#ID">ID</a>]</td><td>The list of associated items contained in this impl block.</td></tr>
<tr><td><code>negative</code></td><td>bool</td><td>Whether this is a negative impl (e.g. <code>!Sized</code> or <code>!Send</code>).</td></tr>
<tr><td><code>synthetic</code></td><td>bool</td><td>Whether this is an impl that’s implied by the compiler (for autotraits, e.g. <code>Send</code> or <code>Sync</code>).</td></tr>
<tr><td><code>blanket_impl</code></td><td>String</td><td>(<em>Optional</em>) The name of the generic parameter used for the blanket impl, if this impl was produced by one. For example <code>impl&lt;T, U&gt; Into&lt;U&gt; for T</code> would result in <code>blanket_impl == "T"</code>.</td></tr>
</tbody>
</table>
</div>
<h4 id="kind--constant"><a class="header" href="#kind--constant"><code>kind == "constant"</code></a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>type</code></td><td><a href="#Type">Type</a></td><td>The type of this constant.</td></tr>
<tr><td><code>expr</code></td><td>String</td><td>The <a href="#Unstable">unstable</a> stringified expression of this constant.</td></tr>
<tr><td><code>value</code></td><td>String</td><td>(<em>Optional</em>) The value of the evaluated expression for this constant, which is only computed for numeric types.</td></tr>
<tr><td><code>is_literal</code></td><td>bool</td><td>Whether this constant is a bool, numeric, string, or char literal.</td></tr>
</tbody>
</table>
</div>
<h4 id="kind--static"><a class="header" href="#kind--static"><code>kind == "static"</code></a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>type</code></td><td><a href="#Type">Type</a></td><td>The type of this static.</td></tr>
<tr><td><code>expr</code></td><td>String</td><td>The <a href="#Unstable">unstable</a> stringified expression that this static is assigned to.</td></tr>
<tr><td><code>mutable</code></td><td>bool</td><td>Whether this static is mutable.</td></tr>
</tbody>
</table>
</div>
<h4 id="kind--typedef"><a class="header" href="#kind--typedef"><code>kind == "typedef"</code></a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>type</code></td><td><a href="#Type">Type</a></td><td>The type on the right hand side of this definition.</td></tr>
<tr><td><code>generics</code></td><td><a href="#Generics">Generics</a></td><td>Any generic parameters on the left hand side of this definition.</td></tr>
</tbody>
</table>
</div>
<h4 id="kind--opaque_ty"><a class="header" href="#kind--opaque_ty"><code>kind == "opaque_ty"</code></a></h4>
<p>Represents <a href="https://doc.rust-lang.org/beta/unstable-book/language-features/trait-alias.html">trait aliases</a> of the form:</p>
<pre><code class="language-rust">type Foo&lt;T&gt; = Clone + std::fmt::Debug + Into&lt;T&gt;;</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>bounds</code></td><td>[<a href="#GenericBound">GenericBound</a>]</td><td>The trait bounds on the right hand side.</td></tr>
<tr><td><code>generics</code></td><td><a href="#Generics">Generics</a></td><td>Any generic parameters on the type itself.</td></tr>
</tbody>
</table>
</div>
<h4 id="kind--foreign_type"><a class="header" href="#kind--foreign_type"><code>kind == "foreign_type"</code></a></h4>
<p><code>inner</code> contains no fields. This item represents a type declaration in an extern block (see <a href="https://github.com/rust-lang/rfcs/blob/master/text/1861-extern-types.md">here</a> for more details):</p>
<pre><code class="language-rust">extern {
    type Foo;
}</code></pre>
<h4 id="kind--extern_crate"><a class="header" href="#kind--extern_crate"><code>kind == "extern_crate"</code></a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>name</code></td><td>String</td><td>The name of the extern crate.</td></tr>
<tr><td><code>rename</code></td><td>String</td><td>(<em>Optional</em>) The renaming of this crate with <code>extern crate foo as bar</code>.</td></tr>
</tbody>
</table>
</div>
<h4 id="kind--import"><a class="header" href="#kind--import"><code>kind == "import"</code></a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>source</code></td><td>String</td><td>The full path being imported (e.g. <code>"super::some_mod::other_mod::Struct"</code>).</td></tr>
<tr><td><code>name</code></td><td>String</td><td>The name of the imported item (may be different from the last segment of <code>source</code> due to import renaming: <code>use source as name</code>).</td></tr>
<tr><td><code>id</code></td><td><a href="#ID">ID</a></td><td>(<em>Optional</em>) The ID of the item being imported.</td></tr>
<tr><td><code>glob</code></td><td>bool</td><td>Whether this import ends in a glob: <code>use source::*</code>.</td></tr>
</tbody>
</table>
</div>
<h4 id="kind--macro"><a class="header" href="#kind--macro"><code>kind == "macro"</code></a></h4>
<p>A <code>macro_rules!</code> declarative macro. Contains a single string with the source representation of the macro with the patterns stripped, for example:</p>
<pre><code class="language-rust">macro_rules! vec {
    () =&gt; { ... };
    ($elem:expr; $n:expr) =&gt; { ... };
    ($($x:expr),+ $(,)?) =&gt; { ... };
}</code></pre>
<p>TODO: proc macros</p>
<h3 id="span"><a class="header" href="#span">Span</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>filename</code></td><td>String</td><td>The path to the source file for this span relative to the crate root.</td></tr>
<tr><td><code>begin</code></td><td>(int, int)</td><td>The zero indexed line and column of the first character in this span.</td></tr>
<tr><td><code>end</code></td><td>(int, int)</td><td>The zero indexed line and column of the last character in this span.</td></tr>
</tbody>
</table>
</div>
<h3 id="deprecation"><a class="header" href="#deprecation">Deprecation</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>since</code></td><td>String</td><td>(<em>Optional</em>) Usually a version number when this Item first became deprecated.</td></tr>
<tr><td><code>note</code></td><td>String</td><td>(<em>Optional</em>) The reason for deprecation and/or what alternatives to use.</td></tr>
</tbody>
</table>
</div>
<h3 id="fndecl"><a class="header" href="#fndecl">FnDecl</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>inputs</code></td><td>[(String, <a href="#Type">Type</a>)]</td><td>A list of parameter names and their types. The names are <a href="#Unstable">unstable</a> because arbitrary patterns can be used as parameters, in which case the name is a pretty printed version of it. For example <code>fn foo((_, x): (u32, u32)){…}</code> would have an parameter with the name <code>"(_, x)"</code> and <code>fn foo(MyStruct {some_field: u32, ..}: MyStruct){…}</code>) would have one called <code>"MyStruct {some_field, ..}"</code>.</td></tr>
<tr><td><code>output</code></td><td><a href="#Type">Type</a></td><td>(<em>Optional</em>) Output type.</td></tr>
<tr><td><code>c_variadic</code></td><td>bool</td><td>Whether this function uses <a href="https://doc.rust-lang.org/beta/unstable-book/language-features/c-variadic.html">an unstable feature</a> for variadic FFI functions.</td></tr>
</tbody>
</table>
</div>
<h3 id="generics"><a class="header" href="#generics">Generics</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>params</code></td><td>[<a href="#GenericParamDef">GenericParamDef</a>]</td><td>A list of generic parameter definitions (e.g.  <code>&lt;T: Clone + Hash, U: Copy&gt;</code>).</td></tr>
<tr><td><code>where_predicates</code></td><td>[<a href="#WherePredicate">WherePredicate</a>]</td><td>A list of where predicates (e.g.  <code>where T: Iterator, T::Item: Copy</code>).</td></tr>
</tbody>
</table>
</div>
<h4 id="examples"><a class="header" href="#examples">Examples</a></h4>
<p>Here are a few full examples of the Generics fields for different rust code:</p>
<h5 id="lifetime-bounds"><a class="header" href="#lifetime-bounds">Lifetime bounds</a></h5>
<pre><code class="language-rust">pub fn foo&lt;'a, 'b, 'c&gt;(a: &amp;'a str, b: &amp;'b str, c: &amp;'c str)
where
    'a: 'b + 'c, {…}</code></pre>
<pre><code class="language-json">"generics": {
  "params": [
    {
      "name": "'a",
      "kind": "lifetime"
    },
    {
      "name": "'b",
      "kind": "lifetime"
    },
    {
      "name": "'c",
      "kind": "lifetime"
    }
  ],
  "where_predicates": [
    {
      "region_predicate": {
        "lifetime": "'a",
        "bounds": [
          {
            "outlives": "'b"
          },
          {
            "outlives": "'c"
          }
        ]
      }
    }
  ]
</code></pre>
<h5 id="trait-bounds"><a class="header" href="#trait-bounds">Trait bounds</a></h5>
<pre><code class="language-rust">pub fn bar&lt;T, U: Clone&gt;(a: T, b: U)
where
    T: Iterator,
    T::Item: Copy,
    U: Iterator&lt;Item=u32&gt;, {…}</code></pre>
<pre><code class="language-json">"generics": {
  "params": [
    {
      "name": "T",
      "kind": {
        "type": {
          "bounds": [],
          "synthetic": false
        }
      }
    },
    {
      "name": "U",
      "kind": {
        "type": {
          "bounds": [
            {
              "trait_bound": {
                "trait": {/* `Type` representation for `Clone`*/},
                "generic_params": [],
                "modifier": "none"
              }
            }
          ],
          "synthetic": false
        }
      }
    }
  ],
  "where_predicates": [
    {
      "bound_predicate": {
        "ty": {
          "generic": "T"
        },
        "bounds": [
          {
            "trait_bound": {
              "trait": {/* `Type` representation for `Iterator`*/},
              "generic_params": [],
              "modifier": "none"
            }
          }
        ]
      }
    },
    {
      "bound_predicate": {
        "ty": {/* `Type` representation for `Iterator::Item`},
        "bounds": [
          {
            "trait_bound": {
              "trait": {/* `Type` representation for `Copy`*/},
              "generic_params": [],
              "modifier": "none"
            }
          }
        ]
      }
    },
    {
      "bound_predicate": {
        "ty": {
          "generic": "U"
        },
        "bounds": [
          {
            "trait_bound": {
              "trait": {/* `Type` representation for `Iterator&lt;Item=u32&gt;`*/},
              "generic_params": [],
              "modifier": "none"
            }
          }
        ]
      }
    }
  ]
}
</code></pre>
<h4 id="genericparamdef"><a class="header" href="#genericparamdef">GenericParamDef</a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>name</code></td><td>String</td><td>The name of the type variable of a generic parameter (e.g <code>T</code> or <code>'static</code>)</td></tr>
<tr><td><code>kind</code></td><td>Object</td><td>Either <code>"lifetime"</code>, <code>"const": Type</code>, or <code>"type: Object"</code> with the following fields:</td></tr>
</tbody>
</table>
</div>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>bounds</code></td><td>[<a href="#GenericBound">GenericBound</a>]</td><td>The bounds on this parameter.</td></tr>
<tr><td><code>default</code></td><td><a href="#Type">Type</a></td><td>(<em>Optional</em>) The default type for this parameter (e.g <code>PartialEq&lt;Rhs = Self&gt;</code>).</td></tr>
</tbody>
</table>
</div>
<h4 id="wherepredicate"><a class="header" href="#wherepredicate">WherePredicate</a></h4>
<p>Can be one of the 3 following objects:</p>
<ul>
<li><code>"bound_predicate": {"ty": Type, "bounds": [GenericBound]}</code> for <code>T::Item: Copy + Clone</code></li>
<li><code>"region_predicate": {"lifetime": String, "bounds": [GenericBound]}</code> for <code>'a: 'b</code></li>
<li><code>"eq_predicate": {"lhs": Type, "rhs": Type}</code></li>
</ul>
<h4 id="genericbound"><a class="header" href="#genericbound">GenericBound</a></h4>
<p>Can be either <code>"trait_bound"</code> with the following fields:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>trait</code></td><td><a href="#Type">Type</a></td><td>The trait for this bound.</td></tr>
<tr><td><code>modifier</code></td><td>String</td><td>Either <code>"none"</code>, <code>"maybe"</code>, or <code>"maybe_const"</code></td></tr>
<tr><td><code>generic_params</code></td><td>[<a href="#GenericParamDef">GenericParamDef</a>]</td><td><code>for&lt;&gt;</code> parameters used for <a href="https://doc.rust-lang.org/nomicon/hrtb.html">HRTBs</a></td></tr>
</tbody>
</table>
</div>
<h3 id="type"><a class="header" href="#type">Type</a></h3>
<p>Rustdoc’s representation of types is fairly involved. Like Items, they are represented by a <code>"kind"</code> field and an <code>"inner"</code> field with the related information. Here are the possible contents of that inner Object:</p>
<h4 id="kind--resolved_path"><a class="header" href="#kind--resolved_path"><code>kind = "resolved_path"</code></a></h4>
<p>This is the main kind that represents all user defined types.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>name</code></td><td>String</td><td>The path of this type as written in the code (<code>"std::iter::Iterator"</code>, <code>"::module::Struct"</code>, etc.).</td></tr>
<tr><td><code>args</code></td><td><a href="#GenericArgs">GenericArgs</a></td><td>(<em>Optional</em>) Any arguments on this type such as <code>Vec&lt;i32&gt;</code> or <code>SomeStruct&lt;'a, 5, u8, B: Copy, C = 'static str&gt;</code>.</td></tr>
<tr><td><code>id</code></td><td><a href="#ID">ID</a></td><td>The ID of the trait/struct/enum/etc. that this type refers to.</td></tr>
<tr><td><code>param_names</code></td><td><a href="#GenericBound">GenericBound</a></td><td>If this type is of the form <code>dyn Foo + Bar + ...</code> then this field contains those trait bounds.</td></tr>
</tbody>
</table>
</div>
<h5 id="genericargs"><a class="header" href="#genericargs">GenericArgs</a></h5>
<p>Can be either <code>"angle_bracketed"</code> with the following fields:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>args</code></td><td>[<a href="#GenericArg">GenericArg</a>]</td><td>The list of each argument on this type.</td></tr>
<tr><td><code>bindings</code></td><td><a href="#TypeBinding">TypeBinding</a></td><td>Associated type or constant bindings (e.g. <code>Item=i32</code> or <code>Item: Clone</code>) for this type.</td></tr>
</tbody>
</table>
</div>
<p>or <code>"parenthesized"</code> (for <code>Fn(A, B) -&gt; C</code> arg syntax) with the following fields:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>inputs</code></td><td>[<a href="#Type">Type</a>]</td><td>The <code>Fn</code>’s parameter types for this argument.</td></tr>
<tr><td><code>output</code></td><td><a href="#Type">Type</a></td><td>(<em>Optional</em>) The return type of this argument.</td></tr>
</tbody>
</table>
</div>
<h5 id="genericarg"><a class="header" href="#genericarg">GenericArg</a></h5>
<p>Can be one of the 3 following objects:</p>
<ul>
<li><code>"lifetime": String</code></li>
<li><code>"type": Type</code></li>
<li><code>"const": Object</code> where the object has a single key <code>"constant"</code> with value that’s the same object as the <code>inner</code> field of <code>Item</code> when <code>kind == "constant"</code></li>
</ul>
<h5 id="typebinding"><a class="header" href="#typebinding">TypeBinding</a></h5>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>name</code></td><td>String</td><td>The <code>Fn</code>’s parameter types for this argument.</td></tr>
<tr><td><code>binding</code></td><td>Object</td><td>Either <code>"equality": Type</code> or <code>"constraint": [GenericBound]</code></td></tr>
</tbody>
</table>
</div>
<h4 id="kind--generic"><a class="header" href="#kind--generic"><code>kind = "generic"</code></a></h4>
<p><code>"inner"'</code> is a String which is simply the name of a type parameter.</p>
<h4 id="kind--tuple"><a class="header" href="#kind--tuple"><code>kind = "tuple"</code></a></h4>
<p><code>"inner"</code> is a single list with the Types of each tuple item.</p>
<h4 id="kind--slice"><a class="header" href="#kind--slice"><code>kind = "slice"</code></a></h4>
<p><code>"inner"</code> is the Type the elements in the slice.</p>
<h4 id="kind--array"><a class="header" href="#kind--array"><code>kind = "array"</code></a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>type</code></td><td><a href="#Type">Type</a></td><td>The Type of the elements in the array</td></tr>
<tr><td><code>len</code></td><td>String</td><td>The length of the array as an <a href="#Unstable">unstable</a> stringified expression.</td></tr>
</tbody>
</table>
</div>
<h4 id="kind--impl_trait"><a class="header" href="#kind--impl_trait"><code>kind = "impl_trait"</code></a></h4>
<p><code>"inner"</code> is a single list of the <a href="#GenericBound">GenericBounds</a> for this type.</p>
<h4 id="kind--never"><a class="header" href="#kind--never"><code>kind = "never"</code></a></h4>
<p>Used to represent the <code>!</code> type, has no fields.</p>
<h4 id="kind--infer"><a class="header" href="#kind--infer"><code>kind = "infer"</code></a></h4>
<p>Used to represent <code>_</code> in type parameters, has no fields.</p>
<h4 id="kind--function_pointer"><a class="header" href="#kind--function_pointer"><code>kind = "function_pointer"</code></a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>is_unsafe</code></td><td>bool</td><td>Whether this is an <code>unsafe fn</code>.</td></tr>
<tr><td><code>decl</code></td><td><a href="#FnDecl">FnDecl</a></td><td>Information about the function signature, or declaration.</td></tr>
<tr><td><code>params</code></td><td>[<a href="#GenericParamDef">GenericParamDef</a>]</td><td>A list of generic parameter definitions (e.g.  <code>&lt;T: Clone + Hash, U: Copy&gt;</code>).</td></tr>
<tr><td><code>abi</code></td><td>String</td><td>The ABI string on the function.</td></tr>
</tbody>
</table>
</div>
<h4 id="kind--raw_pointer"><a class="header" href="#kind--raw_pointer"><code>kind = "raw_pointer"</code></a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>mutable</code></td><td>bool</td><td>Whether this is a <code>*mut</code> or just a <code>*</code>.</td></tr>
<tr><td><code>type</code></td><td><a href="#Type">Type</a></td><td>The Type that this pointer points at.</td></tr>
</tbody>
</table>
</div>
<h4 id="kind--borrowed_ref"><a class="header" href="#kind--borrowed_ref"><code>kind = "borrowed_ref"</code></a></h4>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>lifetime</code></td><td>String</td><td>(<em>Optional</em>) The name of the lifetime parameter on this reference, if any.</td></tr>
<tr><td><code>mutable</code></td><td>bool</td><td>Whether this is a <code>&amp;mut</code> or just a <code>&amp;</code>.</td></tr>
<tr><td><code>type</code></td><td><a href="#Type">Type</a></td><td>The Type that this reference references.</td></tr>
</tbody>
</table>
</div>
<h4 id="kind--qualified_path"><a class="header" href="#kind--qualified_path"><code>kind = "qualified_path"</code></a></h4>
<p>Used when a type is qualified by a trait (<code>&lt;Type as Trait&gt;::Name</code>) or associated type (<code>T::Item</code> where <code>T: Iterator</code>).</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>name</code></td><td>String</td><td>The name at the end of the path (<code>"Name"</code> and <code>"Item"</code> in the examples above).</td></tr>
<tr><td><code>self_type</code></td><td><a href="#Type">Type</a></td><td>The type being used as a trait (<code>Type</code> and <code>T</code> in the examples above).</td></tr>
<tr><td><code>trait</code></td><td><a href="#Type">Type</a></td><td>The trait that the path is on (<code>Trait</code> and <code>Iterator</code> in the examples above).</td></tr>
</tbody>
</table>
</div>
<h4 id="examples-1"><a class="header" href="#examples-1">Examples</a></h4>
<p>Here are some function signatures with various types and their respective JSON representations:</p>
<h5 id="primitives"><a class="header" href="#primitives">Primitives</a></h5>
<pre><code class="language-rust">pub fn primitives(a: u32, b: (u32, u32), c: [u32], d: [u32; 5]) -&gt; *mut u32 {}</code></pre>
<pre><code class="language-json">"decl": {
  "inputs": [
    [
      "a",
      {
        "kind": "primitive",
        "inner": "u32"
      }
    ],
    [
      "b",
      {
        "kind": "tuple",
        "inner": [
          {
            "kind": "primitive",
            "inner": "u32"
          },
          {
            "kind": "primitive",
            "inner": "u32"
          }
        ]
      }
    ],
    [
      "c",
      {
        "kind": "slice",
        "inner": {
          "kind": "primitive",
          "inner": "u32"
        }
      }
    ],
    [
      "d",
      {
        "kind": "array",
        "inner": {
          "type": {
            "kind": "primitive",
            "inner": "u32"
          },
          "len": "5"
        }
      }
    ]
  ],
  "output": {
    "kind": "raw_pointer",
    "inner": {
      "mutable": true,
      "type": {
        "kind": "primitive",
        "inner": "u32"
      }
    }
  }
}
</code></pre>
<h5 id="references"><a class="header" href="#references">References</a></h5>
<pre><code class="language-rust">pub fn references&lt;'a&gt;(a: &amp;'a mut str) -&gt; &amp;'static MyType {}</code></pre>
<pre><code class="language-json">"decl": {
  "inputs": [
    [
      "a",
      {
        "kind": "borrowed_ref",
        "inner": {
          "lifetime": "'a",
          "mutable": true,
          "type": {
            "kind": "primitive",
            "inner": "str"
          }
        }
      }
    ]
  ],
  "output": {
    "kind": "borrowed_ref",
    "inner": {
      "lifetime": "'static",
      "mutable": false,
      "type": {
        "kind": "resolved_path",
        "inner": {
          "name": "MyType",
          "id": "5:4936",
          "args": {
            "angle_bracketed": {
              "args": [],
              "bindings": []
            }
          },
          "param_names": null
        }
      }
    }
  }
}
</code></pre>
<h5 id="generics-1"><a class="header" href="#generics-1">Generics</a></h5>
<pre><code class="language-rust">pub fn generics&lt;T&gt;(a: T, b: impl Iterator&lt;Item = bool&gt;) -&gt; ! {}</code></pre>
<pre><code class="language-json">"decl": {
  "inputs": [
    [
      "a",
      {
        "kind": "generic",
        "inner": "T"
      }
    ],
    [
      "b",
      {
        "kind": "impl_trait",
        "inner": [
          {
            "trait_bound": {
              "trait": {
                "kind": "resolved_path",
                "inner": {
                  "name": "Iterator",
                  "id": "2:5000",
                  "args": {
                    "angle_bracketed": {
                      "args": [],
                      "bindings": [
                        {
                          "name": "Item",
                          "binding": {
                            "equality": {
                              "kind": "primitive",
                              "inner": "bool"
                            }
                          }
                        }
                      ]
                    }
                  },
                  "param_names": null
                }
              },
              "generic_params": [],
              "modifier": "none"
            }
          }
        ]
      }
    ]
  ],
  "output": {
    "kind": "never"
  }
}
</code></pre>
<h5 id="generic-args"><a class="header" href="#generic-args">Generic Args</a></h5>
<pre><code class="language-rust">pub trait MyTrait&lt;'a, T&gt; {
    type Item;
    type Other;
}

pub fn generic_args&lt;'a&gt;(x: impl MyTrait&lt;'a, i32, Item = u8, Other = f32&gt;) {
    unimplemented!()
}</code></pre>
<pre><code class="language-json">"decl": {
  "inputs": [
    [
      "x",
      {
        "kind": "impl_trait",
        "inner": [
          {
            "trait_bound": {
              "trait": {
                "kind": "resolved_path",
                "inner": {
                  "name": "MyTrait",
                  "id": "0:11",
                  "args": {
                    "angle_bracketed": {
                      "args": [
                        {
                          "lifetime": "'a"
                        },
                        {
                          "type": {
                            "kind": "primitive",
                            "inner": "i32"
                          }
                        }
                      ],
                      "bindings": [
                        {
                          "name": "Item",
                          "binding": {
                            "equality": {
                              "kind": "primitive",
                              "inner": "u8"
                            }
                          }
                        },
                        {
                          "name": "Other",
                          "binding": {
                            "equality": {
                              "kind": "primitive",
                              "inner": "f32"
                            }
                          }
                        }
                      ]
                    }
                  },
                  "param_names": null
                }
              },
              "generic_params": [],
              "modifier": "none"
            }
          }
        ]
      }
    ]
  ],
  "output": null
}
</code></pre>
<h3 id="unstable"><a class="header" href="#unstable">Unstable</a></h3>
<p>Fields marked as unstable have contents that are subject to change. They can be displayed to users, but tools shouldn’t rely on being able to parse their output or they will be broken by internal compiler changes.</p>
<h2 id="drawbacks"><a class="header" href="#drawbacks">Drawbacks</a></h2>
<ul>
<li>By supporting JSON output for <code>rustdoc</code>, we should consider how much it should mirror the internal structures used in <code>rustdoc</code> and in the compiler. Depending on how much we want to stabilize, we could accidentally stabilize the internal structures of <code>rustdoc</code>. We have tried to avoid this by introducing a mirror of <code>rustdoc</code>’s AST types which exposes as few compiler internals as possible by stringifying or not including certain fields.</li>
<li>Adding JSON output adds <em>another</em> thing that must be kept up to date with language changes, and another thing for compiler contributors to potentially break with their changes. Hopefully this friction will be kept to the minimum because the JSON output doesn’t need any complex rendering logic like the HTML one. All that is required for a new language item is adding an additional field to a struct.</li>
</ul>
<h2 id="替代方案"><a class="header" href="#替代方案">替代方案</a></h2>
<ul>
<li><strong>Status quo.</strong> Keep the HTML the way it is, and make users who want a machine-readable version of a crate parse it themselves. In the absence of an accepted JSON output, the <code>--output-format</code> flag in rustdoc remains deprecated and unused.</li>
<li><strong>Alternate data format (XML, Bincode, CapnProto, etc).</strong> JSON was selected for its ubiquity in available parsers, but selecting a different data format may provide benefits for file size, compressibility, speed of conversion, etc. Since the implementation will lean on serde then this may be a non-issue as it would be trivial to switch serialization formats.</li>
<li><strong>Alternate data structure.</strong> The proposed output very closely mirrors the internal <code>clean</code> AST types in rustdoc. This simplifies the implementation but may not be the optimal structure for users. If there are significant improvements then a future RFC could provide the necessary refinements, potentially as another alternative output format if necessary.</li>
</ul>
<h2 id="prior-art"><a class="header" href="#prior-art">Prior art</a></h2>
<p>A handful of other languages and systems have documentation tools that output an intermediate representation separate from the human-readable outputs:</p>
<ul>
<li><a href="https://clang.llvm.org/extra/clang-doc.html/">ClangDoc</a> has the ability to output either rendered HTML, or tool consumable YAML.</li>
<li><a href="http://www.purescript.org/">PureScript</a> uses an intermediate JSON representation when publishing package information to their <a href="https://pursuit.purescript.org/">Pursuit</a> directory. It’s primarily used to generate documentation, but can also be used to generate <code>etags</code> files.</li>
<li><a href="https://dart.dev/tools/dartdoc/">DartDoc</a> is in the process of implementing a JSON output.</li>
<li><a href="https://www.doxygen.nl/">Doxygen</a> has an option to generate an XML file with the code’s information.</li>
<li><a href="https://www.haskell.org/">Haskell</a>’s documentation tool, <a href="https://www.haskell.org/haddock/">Haddock</a>, can generate an intermediate representation used by the type search engine <a href="https://www.haskell.org/hoogle/">Hoogle</a> to integrate documentation of several packages.</li>
<li><a href="http://kythe.io/">Kythe</a> is a “(mostly) language-agnostic” system for integrating documentation across several languages. It features its own schema that code information can be translated into, that services can use to aggregate information about projects that span multiple languages.</li>
<li><a href="https://gi.readthedocs.io/en/latest/">GObject Introspection</a> has an intermediate XML representation called GIR that’s used to create language bindings for GObject-based C libraries. While (at the time of this writing) it’s not currently used to create documentation, it is a stated goal to use this information to document these libraries.</li>
</ul>
<h2 id="未解決的問題"><a class="header" href="#未解決的問題">未解決的問題</a></h2>
<ul>
<li>What is the stabilization story? As language features are added, this representation will need to be extended to accommodate it. As this will change the structure of the data, what does that mean for its consumers?</li>
<li>How will users be able to manipulate the data? Is it a good idea to host a crate outside the compiler that contains the struct definitions for all the types that get serialized so that people could easily hack on the data without the compiler? Should that crate be the source of truth for those types and be depended on by librustdoc, or should it be a mirror that gets updated externally to reflect the changes to the copy in the compiler?</li>
<li>How will intra-doc links be handled?
<ul>
<li>Supporting <code>struct.SomeStruct.html</code> style links seems infeasible since it would tie alternative front-ends to <code>rustdoc</code>’s file/folder format.</li>
<li>With the nightly <a href="https://github.com/rust-lang/rust/pull/47046">intra-rustdoc link syntax</a> it’s debatable whether we should resolve those to HTML links or leave that up to whatever consumes the JSON. Leaving them unresolved seems preferable but it would mean that consumers have to do markdown parsing to replace them with actual links.</li>
<li>In the case of items from the local crate vs external crates should the behavior be different?</li>
<li>If there’s an <code>html_root_url</code> attribute/argument for an external crate should the behavior be different?</li>
</ul>
</li>
</ul>
<h3 id="output-structure-questions"><a class="header" href="#output-structure-questions">Output structure questions</a></h3>
<p>These aren’t essential and could be deferred to a later RFC. The current implementation does include spans, but doesn’t do any of the other things mentioned here.</p>
<ul>
<li>Should we store <code>Span</code>s in the output even though we’re not exporting the source itself like the HTML output does? If so is there a simple way to sanitize relative links to the files to avoid inconsistent output based on where <code>rustdoc</code> is invoked from. For example <code>rustdoc --output-format json /home/user/Downloads/project/crate/src/lib.rs</code> would include that absolute path in the spans, but it’s probably preferable to have it just list the filename for single files or the path from the crate root for cargo projects.</li>
<li>The proposed implementation exposes a strict subset of the information available to the HTML, backend: the <code>clean</code> types for Items and some mappings from the <code>Cache</code>. Are there other mappings/info from elsewhere that would be helpful to expose to users?</li>
<li>There are some items such as attributes that defer to compiler internal symbols in their <code>clean</code> representations which would make them problematic to represent faithfully. Is it OK to simply stringify these and leave their handling up to the user?</li>
<li>Should we specially handle <code>Deref</code> trait impls to make it easier for a struct to find the methods they can access from their deref target?</li>
<li>Should we specially handle auto-traits? They can be included in the normal set of trait impls for each type but it clutters the output. Every time a user goes through the impls for a type they need to filter out those synthetic impls.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="2959-promote-aarch64-unknown-linux-gnu-to-tier1.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="2965-project-error-handling.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="2959-promote-aarch64-unknown-linux-gnu-to-tier1.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="2965-project-error-handling.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
