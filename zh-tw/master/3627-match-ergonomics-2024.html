<!DOCTYPE HTML>
<html lang="zh_TW" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>3627-match-ergonomics-2024 - The Rust RFC Book</title>


        <!-- Custom HTML head -->
        <script type="text/javascript" src="ltd-provenance.js"></script>
        <script type="text/javascript" src="ltd-current.js"></script>
        <script type="text/javascript" src="../../ltd-config.js"></script>
        <script type="text/javascript" src="../../ltd-flyout.js"></script>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex-c5bb60c5.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-5025baa3.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>‚Üê</kbd> or <kbd>‚Üí</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">The Rust RFC Book</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/rust-lang/rfcs" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <ul>
<li>Feature Name: <code>ref_pat_eat_one_layer_2024</code></li>
<li>Start Date: 2024-05-06</li>
<li>RFC PR: <a href="https://github.com/rust-lang/rfcs/pull/3627">rust-lang/rfcs#3627</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/rust/issues/123076">rust-lang/rust#123076</a></li>
</ul>
<h2 id="ÊëòË¶Å"><a class="header" href="#ÊëòË¶Å">ÊëòË¶Å</a></h2>
<p>Various changes to the match ergonomics rules:</p>
<ul>
<li>On edition ‚â• 2024, <code>&amp;</code> and <code>&amp;mut</code> patterns only remove a single layer of references.</li>
<li>On edition ‚â• 2024, <code>mut</code> on an identifier pattern does not force its binding mode to by-value.</li>
<li>On all editions, <code>&amp;</code> patterns can match against <code>&amp;mut</code> references.</li>
<li>On all editions, the binding mode can no longer ever be implicitly set to <code>ref mut</code> behind an <code>&amp;</code> pattern.</li>
</ul>
<h2 id="ÂãïÊ©ü"><a class="header" href="#ÂãïÊ©ü">ÂãïÊ©ü</a></h2>
<p>Match ergonomics have been a great success overall, but there are some surprising interactions that regularly confuse users.</p>
<h3 id="mut-resets-the-binding-mode"><a class="header" href="#mut-resets-the-binding-mode"><code>mut</code> resets the binding mode</a></h3>
<p><code>mut</code> resets the binding mode to by-value, which users do not expect; the mutability of the binding would seem to be separate concern from its type (<a href="https://github.com/rust-lang/rust/issues/105647">https://github.com/rust-lang/rust/issues/105647</a>, <a href="https://github.com/rust-lang/rust/issues/112545">https://github.com/rust-lang/rust/issues/112545</a>).</p>
<pre><code class="language-rust">let (x, mut y) = &amp;(true, false);
let _: (&amp;bool, bool) = (x, y);</code></pre>
<h3 id="cant-cancel-out-an-inherited-reference"><a class="header" href="#cant-cancel-out-an-inherited-reference">Can‚Äôt cancel out an inherited reference</a></h3>
<p><code>&amp;</code> and <code>&amp;mut</code> patterns must correspond with a reference in the same position in the scrutinee, even if there is an inherited reference present. Therefore, users have no general mechanism to ‚Äúcancel out‚Äù an inherited reference (<a href="https://users.rust-lang.org/t/reference-of-tuple-and-tuple-of-reference/91713/6">https://users.rust-lang.org/t/reference-of-tuple-and-tuple-of-reference/91713/6</a>, <a href="https://users.rust-lang.org/t/cannot-deconstruct-reference-inside-match-on-reference-why/92147">https://users.rust-lang.org/t/cannot-deconstruct-reference-inside-match-on-reference-why/92147</a>, <a href="https://github.com/rust-lang/rust/issues/50008">https://github.com/rust-lang/rust/issues/50008</a>, <a href="https://github.com/rust-lang/rust/issues/64586">https://github.com/rust-lang/rust/issues/64586</a>).</p>
<pre><code class="language-rust">fn foo(arg: &amp;(String, Vec&lt;i32&gt;, u8)) {
    // We want to extract `&amp;String`, `&amp;Vec`, and `u8` from the tuple.
    let (s, v, u) = arg; // u is &amp;u8, not what we wanted
    let &amp;(ref s, ref v, u) = arg; // we have to abandon match ergonomics entirely
}</code></pre>
<h3 id="a-single--can-strip-two-references"><a class="header" href="#a-single--can-strip-two-references">A single <code>&amp;</code> can strip two references</a></h3>
<p>When an <code>&amp;</code> or <code>&amp;mut</code> pattern is used in a location where there is also an inherited reference present, both are stripped; adding a single <code>&amp;</code> to the pattern can remove two <code>&amp;</code>s from the type of the binding.</p>
<pre><code class="language-rust">let [a] = &amp;[&amp;42]; // a = &amp;&amp;42
let [&amp;a] = &amp;[&amp;42]; // a = 42</code></pre>
<h2 id="guide-level-explanation"><a class="header" href="#guide-level-explanation">Guide-level explanation</a></h2>
<p>Match ergonomics works a little differently in edition 2024 and above.</p>
<h3 id="mut-no-longer-strips-the-inherited-reference"><a class="header" href="#mut-no-longer-strips-the-inherited-reference"><code>mut</code> no longer strips the inherited reference</a></h3>
<p><code>mut</code> on a binding does not reset the binding mode on edition ‚â• 2024. Instead, <code>mut</code> on a binding with non-default binding mode is an error.</p>
<pre><code class="language-rust">//! Edition ‚â• 2024
//let (x, mut y) = &amp;(true, false); // ERROR</code></pre>
<h3 id="-matches-against-mut"><a class="header" href="#-matches-against-mut"><code>&amp;</code> matches against <code>&amp;mut</code></a></h3>
<p>On all editions, <code>&amp;</code> patterns can match against <code>&amp;mut</code> references. On edition 2024 and above, this includes ‚Äúinherited‚Äù references as described below.</p>
<pre><code class="language-rust">//! All editions
let &amp;foo = &amp;mut 42;
let _: u8 = foo;</code></pre>
<pre><code class="language-rust">//! Edition ‚â• 2024
let [&amp;foo] = &amp;mut [42];
let _: u8 = foo;</code></pre>
<h3 id="matching-against-inherited-references"><a class="header" href="#matching-against-inherited-references">Matching against inherited references</a></h3>
<p>In all editions, when you match against an <code>&amp;</code> or <code>&amp;mut</code> reference with the type of its referent, you get an ‚Äúinherited reference‚Äù: the binding mode of ‚Äúdownstream‚Äù bindings is set to <code>ref</code> or <code>ref mut</code>.</p>
<pre><code class="language-rust">//! All editions
// `x` "inherits" the `&amp;` from the scrutinee type.
let [x] = &amp;[42];
let _: &amp;u8 = x;</code></pre>
<p>In edition 2024 and above, an <code>&amp;</code> or <code>&amp;mut</code> pattern can match against this inherited reference, consuming it. A pattern that does this has no other effect.</p>
<pre><code class="language-rust">//! Edition ‚â• 2024

// `&amp;` pattern consumes inherited `&amp;` reference.
let [&amp;x] = &amp;[42];
let _: u8 = x;

// Examples from motivation section

fn foo(arg: &amp;(String, Vec&lt;i32&gt;, u8)) {
    let (s, v, &amp;u) = arg;
    let _: (&amp;String, &amp;Vec&lt;i32&gt;, u8) = (s, v, u);
}

let [&amp;x] = &amp;[&amp;42];
let _: &amp;u8 = x;</code></pre>
<h2 id="reference-level-explanation"><a class="header" href="#reference-level-explanation">Reference-level explanation</a></h2>
<p>This explanation assumes familiarity with the current match ergonomics rules, including the ‚Äúdefault binding mode‚Äù terminology. Refer to <a href="./2005-match-ergonomics.html#detailed-design">RFC 2005</a>.</p>
<h3 id="the-rules-in-brief"><a class="header" href="#the-rules-in-brief">The rules in brief</a></h3>
<p>Building on the rules of <a href="./2005-match-ergonomics.html">RFC 2005</a>, this RFC adopts the following five rules for match ergonomics:</p>
<ul>
<li><strong>Rule 1</strong>: When the DBM (default binding mode) is not <code>move</code> (whether or not behind a reference), writing <code>mut</code> on a binding is an error.</li>
<li><strong>Rule 2</strong>: When a reference pattern matches against a reference, do not update the DBM.</li>
<li><strong>Rule 3</strong>: If we‚Äôve previously matched against a shared reference in the scrutinee (or against a <code>ref</code> DBM under <em>Rule 4</em>, or against a mutable reference treated as a shared one or a <code>ref mut</code> DBM treated as a <code>ref</code> one under <em>Rule 5</em>), set the DBM to <code>ref</code> whenever we would otherwise set it to <code>ref mut</code>.</li>
<li><strong>Rule 4</strong>: If an <code>&amp;</code> pattern is being matched against a non-reference type or an <code>&amp;mut</code> pattern is being matched against a shared reference type or a non-reference type, <strong>and if</strong> the DBM is <code>ref</code> or <code>ref mut</code>, match the pattern against the DBM as though it were a type.</li>
<li><strong>Rule 5</strong>: If an <code>&amp;</code> pattern is being matched against a mutable reference type (or against a <code>ref mut</code> DBM under <em>Rule 4</em>), act as if the type were a shared reference instead (or that the <code>ref mut</code> DBM is a <code>ref</code> DBM instead).</li>
</ul>
<p><em>Rule 1</em> and <em>Rule 2</em> are edition-dependent and will be stabilized with Rust 2024.  The other three rules will be stabilized in all editions.</p>
<p>In the sections below, we describe these rules and their effects in more detail.</p>
<h3 id="edition-2024-mut-does-not-reset-binding-mode-to-by-value"><a class="header" href="#edition-2024-mut-does-not-reset-binding-mode-to-by-value">Edition 2024: <code>mut</code> does not reset binding mode to by-value</a></h3>
<p>In the new edition, <code>mut</code> no longer resets the binding mode to by-value; instead, <code>mut</code> on a binding with a by-reference binding mode is an error.</p>
<pre><code class="language-rust">//! Edition ‚â• 2024
// let [mut a] = &amp;[42]; //ERROR</code></pre>
<h3 id="all-editions--patterns-can-match-against-mut-references"><a class="header" href="#all-editions--patterns-can-match-against-mut-references">All editions: <code>&amp;</code> patterns can match against <code>&amp;mut</code> references</a></h3>
<p><code>&amp;</code> patterns can match against <code>&amp;mut</code> references.</p>
<pre><code class="language-rust">//! All editions
let &amp;foo = &amp;mut 42;
let _: u8 = foo;</code></pre>
<p>However, the <code>ref mut</code> binding mode cannot be used behind such patterns.</p>
<pre><code class="language-rust">//! All editions
let &amp;ref mut foo = &amp;mut 42;
//  ^~ERROR: replace `&amp;` with `&amp;mut `
let _: &amp;mut u8 = foo;</code></pre>
<p>However, if the type of the scrutinee is unknown, an <code>&amp;</code> pattern will still constrain inference to force it to be a shared reference.</p>
<pre><code class="language-rust">//! All editions
fn generic&lt;R: Ref&gt;() -&gt; (R, bool) {
    R::meow()
}

trait Ref: Sized {
    fn meow() -&gt; (Self, bool);
}

impl Ref for &amp;'static [(); 0] {
    fn meow() -&gt; (Self, bool) {
        (&amp;[], false)
    }
}

impl Ref for &amp;'static mut [(); 0] {
    fn meow() -&gt; (Self, bool) {
        (&amp;mut [], true)
    }
}

fn main() {
    let (&amp;_, b) = generic();
    assert!(!b);
}</code></pre>
<pre><code class="language-rust">//! All editions
fn generic&lt;R: Ref&gt;() -&gt; R {
    R::meow()
}

trait Ref: Sized {
    fn meow() -&gt; Self;
}

impl Ref for &amp;'static mut [(); 0] {
    fn meow() -&gt; Self {
        &amp;mut []
    }
}

fn main() {
    let &amp;_ = generic(); //~ERROR[E0277]: the trait bound `&amp;_: Ref` is not satisfied
}</code></pre>
<h3 id="edition-2024--and-mut-can-match-against-inherited-references"><a class="header" href="#edition-2024--and-mut-can-match-against-inherited-references">Edition 2024: <code>&amp;</code> and <code>&amp;mut</code> can match against inherited references</a></h3>
<p>When the default binding mode is <code>ref</code> or <code>ref mut</code>, <code>&amp;</code> and <code>&amp;mut</code> patterns can reset it. <code>&amp;</code> patterns will reset either <code>ref</code> or <code>ref mut</code> binding modes to by-value, while <code>&amp;mut</code> can only reset <code>ref mut</code>. An <code>&amp;</code> or <code>&amp;mut</code> pattern that resets the binding mode in this way has no other effect.</p>
<pre><code class="language-rust">//! Edition ‚â• 2024

let [&amp;x] = &amp;[3u8];
let _: u8 = x;

let [&amp;mut x] = &amp;mut [3u8];
let _: u8 = x;

let [&amp;x] = &amp;mut [3u8];
let _: u8 = x;</code></pre>
<pre><code class="language-rust">//! All editions
//let [&amp;mut x] = &amp;[3u8]; // ERROR</code></pre>
<p><code>&amp;</code> patterns are otherwise unchanged from older editions.</p>
<pre><code class="language-rust">//! All editions

let &amp;a = &amp;3;
let _: u8 = a;

//let &amp;b = 17; // ERROR</code></pre>
<p>If the default binding mode is <code>ref</code>, then <code>&amp;mut</code> patterns will not be able to match against it, so they will match structurally instead (preserving the binding mode).</p>
<pre><code class="language-rust">//! Edition ‚â• 2024
let [&amp;mut x] = &amp;[&amp;mut 42];
let _: &amp;u8 = x;</code></pre>
<p><code>&amp;mut</code> patterns are otherwise unchanged.</p>
<pre><code class="language-rust">//! All editions

let &amp;mut x = &amp;mut 3;
let _: u8 = x;

let &amp;mut x = &amp;mut &amp;mut 3;
let _: &amp;mut u8 = x;

let &amp;mut x = &amp;mut &amp;&amp;mut 3;
let _: &amp;&amp;mut u8 = x;

//let &amp;mut x = &amp;&amp;mut 3; // ERROR</code></pre>
<h3 id="all-editions-the-default-binding-mode-is-never-set-to-ref-mut-behind-an--pattern-or-reference"><a class="header" href="#all-editions-the-default-binding-mode-is-never-set-to-ref-mut-behind-an--pattern-or-reference">All editions: the default binding mode is never set to <code>ref mut</code> behind an <code>&amp;</code> pattern or reference</a></h3>
<p>The binding mode is set to <code>ref</code> instead in such cases. (On older editions, this allows strictly more code to compile.)</p>
<pre><code class="language-rust">//! All editions (new)

let &amp;[[a]] = &amp;[&amp;mut [42]];
let _: &amp;u8 = a; // previously `a` would be `&amp;mut u8`, resulting in a move check error

let &amp;[[a]] = &amp;mut [&amp;mut [42]];
let _: &amp;u8 = a;</code></pre>
<pre><code class="language-rust">//! Edition ‚â• 2024

let &amp;[[&amp;a]] = &amp;[&amp;mut [42]];
let _: u8 = a;

//let &amp;[[&amp;mut a]] = &amp;[&amp;mut [42]]; // ERROR</code></pre>
<h2 id="migration"><a class="header" href="#migration">Migration</a></h2>
<p>This proposal, if adopted, would allow the same pattern to have different meanings on different editions:</p>
<pre><code class="language-rust">let [&amp;a] = &amp;[&amp;0u8]; // `a` is `u8` on edition ‚â§ 2021, but `&amp;u8` on edition ‚â• 2024
let [mut a] = &amp;[0u8]; // `a` is `u8` on edition ‚â§ 2021, but `&amp;u8` on edition ‚â• 2024</code></pre>
<p>Instances of such incompatibilities appear to be uncommon, but far from unknown (20 cases in <code>rustc</code>, for example). The migration lint for the feature entirely desugars the match ergonomics of the affected pattern. This is necessary to produce code that works on all editions, but it means that adopting the new rules could require editing the affected patterns twice: once to desugar the match ergonomics before adopting the new edition, and a second time to restore match ergonomics after adoption of the new edition.</p>
<h3 id="macro-subpatterns"><a class="header" href="#macro-subpatterns">Macro subpatterns</a></h3>
<p>Unfortunately, when a subpattern derives from a macro expansion, fully desugaring the match ergonomics may not be possible. For example:</p>
<pre><code class="language-rust">//! crate foo (edition 2021)
#[macro_export]
macro_rules! foo {
    ($foo:ident) =&gt; {
        [$foo]
    };
}</code></pre>
<pre><code class="language-rust">//! crate bar (edition 2021, want to migrate to 2024)
extern crate foo;
use foo::*;

fn main() {
    let ([&amp;x], foo!(y)) =  &amp;([&amp;0], [0]);
    //~^ WARN: the semantics of this pattern will change in edition 2024
    let _: i32 = x;
    let _: &amp;i32 = y;
}</code></pre>
<p>In such cases, there is no possible machine-applicable suggestion we could emit to produce code compatible with all editions (short of expanding the macro). However, such code should be extremely rare in practice.</p>
<h2 id="drawbacks"><a class="header" href="#drawbacks">Drawbacks</a></h2>
<p>This is a silent change in behavior, which is considered undesirable even over an edition.</p>
<h2 id="rationale-and-alternatives"><a class="header" href="#rationale-and-alternatives">Rationale and alternatives</a></h2>
<h3 id="desirable-property"><a class="header" href="#desirable-property">Desirable property</a></h3>
<p>The proposed rules for new editions uphold the following property:</p>
<blockquote>
<p>For any two nested patterns <code>$pat0</code> and <code>$pat1</code>, such that <code>$pat1</code> uses match ergonomics only (no explicit <code>ref</code>/<code>ref mut</code>), and pattern match <code>let $pat0($pat1(binding)) = scrut</code>, either:</p>
<ul>
<li><code>let $pat0(temp) = scrut; let $pat1(binding) = temp;</code> compiles, with the same meaning as the original composed pattern match; or</li>
<li><code>let $pat0(temp) = scrut; let $pat1(binding) = temp;</code> does not compile, but <code>let $pat0(ref temp) = scrut; let &amp;$pat1(binding) = temp;</code> compiles, with the same meaning as the original composed pattern match.</li>
</ul>
</blockquote>
<p>In other words, the new match ergonomics rules are compositional.</p>
<h3 id="mut-not-resetting-the-binding-mode"><a class="header" href="#mut-not-resetting-the-binding-mode"><code>mut</code> not resetting the binding mode</a></h3>
<p>Admittedly, there is not much use for mutable by-reference bindings. This is true even outside of pattern matching; <code>let mut ident: &amp;T = ...</code> is not commonly seen (though not entirely unknown either). The motivation for making this change anyway is that the current behavior is unintuitive and surprising for users.</p>
<h3 id="never-setting-default-binding-mode-to-ref-mut-behind-"><a class="header" href="#never-setting-default-binding-mode-to-ref-mut-behind-">Never setting default binding mode to <code>ref mut</code> behind <code>&amp;</code></a></h3>
<h4 id="we-cant-delay-this-choice"><a class="header" href="#we-cant-delay-this-choice">We can‚Äôt delay this choice</a></h4>
<h5 id="patterns-that-work-only-with-this-rule"><a class="header" href="#patterns-that-work-only-with-this-rule">Patterns that work only with this rule</a></h5>
<pre><code class="language-rust">//! All editions: works only with this rule
let &amp;(i, j, [s]) = &amp;(63, 42, &amp;mut [String::from("ü¶Ä")]); // i: i32, j: i32, s: &amp;String</code></pre>
<pre><code class="language-rust">//! Edition ‚â• 2024: works with or without this rule (alternative to above)
let (&amp;i, &amp;j, [s]) = &amp;(42, &amp;mut [String::from("ü¶Ä")]); // i: i32, j: i32, s: &amp;String</code></pre>
<pre><code class="language-rust">//! All editions: works with or without this rule (alternatives to above)
let &amp;(i, j, [ref s]) = &amp;(42, &amp;mut [String::from("ü¶Ä")]); // i: i32, j: i32, s: &amp;String
let &amp;(i, j, &amp;mut [ref s]) = &amp;(42, &amp;mut [String::from("ü¶Ä")]); // i: i32, j: i32, s: &amp;String</code></pre>
<h5 id="patterns-that-work-only-without-this-rule"><a class="header" href="#patterns-that-work-only-without-this-rule">Patterns that work only without this rule</a></h5>
<pre><code class="language-rust">//! Edition ‚â• 2024: works only without this rule
let &amp;[[&amp;mut a]] = &amp;[&amp;mut [42]]; // x: i32
// `&amp;mut` in pattern needs to match against either:
// - `&amp;mut` in value at same position (there is none, so not possible)
// - inherited `&amp;mut` (which the rule downgrades to `&amp;`)</code></pre>
<pre><code class="language-rust">//! Edition ‚â• 2024: works with or without this rule (alternatives to above)
let &amp;[[&amp;a]] = &amp;[&amp;mut [42]]; // x: i32
let &amp;[&amp;mut [a]] = &amp;[&amp;mut [42]]; // x: i32</code></pre>
<h4 id="makes-behavior-more-consistent"><a class="header" href="#makes-behavior-more-consistent">Makes behavior more consistent</a></h4>
<p>On all editions, when a structure pattern peels off a shared reference and the default binding mode is already <code>ref mut</code>, the binding mode gets set to <code>ref</code>:</p>
<pre><code class="language-rust">//! All editions
let [a] = &amp;mut &amp;[42]; // x: &amp;i32</code></pre>
<p>But when the binding mode is set to <code>ref</code>, and a mutable reference is peeled off, the binding mode remains <code>ref</code>:</p>
<pre><code class="language-rust">//! All editions
let [a] = &amp;&amp;mut [42]; // x: &amp;i32</code></pre>
<p>In other words, immutability usually takes precedence over mutability. This change, in addition to being generally useful, makes the match ergonomics rules more consistent by ensuring that immutability <em>always</em> takes precedence over mutability.</p>
<h4 id="ensures-that-a-desirable-property-is-preserved"><a class="header" href="#ensures-that-a-desirable-property-is-preserved">Ensures that a desirable property is preserved</a></h4>
<p>The current match ergonomics rules uphold the following desirable property:</p>
<blockquote>
<p>An <code>&amp;mut</code> pattern is accepted if and only if removing the pattern would allow obtaining an <code>&amp;mut</code> value.</p>
</blockquote>
<p>For example:</p>
<pre><code class="language-rust">//! All editions
let &amp;mut a = &amp;mut 42; // `a: i32`
let a = &amp;mut 42; // `a: &amp;mut i32`

let &amp;[&amp;mut a] = &amp;[&amp;mut 42]; // `a: i32`
//let &amp;[a] = &amp;[&amp;mut 42]; // ERROR, but‚Ä¶
let &amp;[ref a] = &amp;[&amp;mut 42]; // `a = &amp;&amp;mut i32` (so we did manage to obtain an `&amp;mut i32` in some form)</code></pre>
<p>Adopting the ‚Äúno <code>ref mut</code> behind <code>&amp;</code>‚Äù rule ensures that this property continues to hold for edition 2024:</p>
<pre><code class="language-rust">//! Edition ‚â• 2024
let &amp;[[&amp;mut x]] = &amp;[&amp;mut [42]]; // If we were allow this, with `x: i32` ‚Ä¶
//let &amp;[[x]] = &amp;[&amp;mut [42]]; // remove the `&amp;mut` ‚Üí ERROR, if the default binding mode is to be `ref mut`
// nothing we do will get us `&amp;mut i32` in any form</code></pre>
<h3 id="-patterns-matching-against-mut"><a class="header" href="#-patterns-matching-against-mut"><code>&amp;</code> patterns matching against <code>&amp;mut</code></a></h3>
<p>There are several motivations for allowing this:</p>
<ul>
<li>It makes refactoring less painful. Sometimes, one is not certain whether an unfinished API will end up returning a shared or a mutable reference. But as long as the reference returned by said API is not actually used to perform mutation, it often doesn‚Äôt matter either way, as <code>&amp;mut</code> implicitly reborrows as <code>&amp;</code> in many situations. Pattern matching is currently one of the most prominent exceptions to this, and match ergonomics magnifies the pain because a reference in one part of the pattern can affect the binding mode in a different, faraway location<sup class="footnote-reference" id="fr-nrmba-1"><a href="#footnote-nrmba">1</a></sup>. If patterns can be written to always use <code>&amp;</code> unless mutation is required, then the amount of editing necessary to perform various refactors is lessened.</li>
<li>It‚Äôs intuitive. <code>&amp;mut</code> is strictly more powerful than <code>&amp;</code>. It‚Äôs conceptually a subtype, and even if not implemented that way<sup class="footnote-reference" id="fr-sub-1"><a href="#footnote-sub">2</a></sup>, coercions mean it often feels like one in practice.</li>
</ul>
<pre><code class="language-rust">let a: &amp;u8 = &amp;mut 42;</code></pre>
<h3 id="versus-eat-two-layers"><a class="header" href="#versus-eat-two-layers">Versus ‚Äúeat-two-layers‚Äù</a></h3>
<p>An alternative proposal would be to allow <code>&amp;</code> and <code>&amp;mut</code> patterns to reset the binding mode when not matching against a reference in the same position in the scrutinee, but to not otherwise change their behavior. This would have the advantage of not requiring an edition change. However, it would remain confusing for users. Notably, the <a href="#desirable-property">property from earlier</a> would continue to not be satisfied.</p>
<p>In addition, this approach would lead to tricky questions around when mutabilities should be considered compatible. And there would be compatibility concerns with certain proposals for ‚Äúderef patterns‚Äù.</p>
<p>(This alternative is currently implemented under a separate feature gate.)</p>
<h2 id="Êú™Ëß£Ê±∫ÁöÑÂïèÈ°å"><a class="header" href="#Êú™Ëß£Ê±∫ÁöÑÂïèÈ°å">Êú™Ëß£Ê±∫ÁöÑÂïèÈ°å</a></h2>
<ul>
<li>How much churn will be necessary to adapt code for the new edition? There are 0 instances of affected patterns in the standard library, and 20 in the compiler, but that is all the data we have at the moment.</li>
</ul>
<h2 id="future-possibilities"><a class="header" href="#future-possibilities">Future possibilities</a></h2>
<ul>
<li>An explicit syntax for mutable by-reference bindings should be chosen at some point, along with removing the prohibition on implicitly by-reference mutable bindings.</li>
<li>Future changes to reference types (partial borrows, language sugar for <code>Pin</code>, etc) may interact with match ergonomics.</li>
</ul>
<h3 id="deref-patterns"><a class="header" href="#deref-patterns">Deref patterns</a></h3>
<p>Because it is compositional, the ‚Äúeat-one-layer‚Äù model proposed by this RFC is fully compatible with proposals for ‚Äúderef patterns‚Äù, including allowing <code>&amp;</code>/<code>&amp;mut</code> patterns to match against types implementing <code>Deref</code>/<code>DerefMut</code>. One question that would need to be resolved is whether and how deref patterns (explicit or implicit) affect the default binding mode.</p>
<h3 id="matching-mut-directly-behind-"><a class="header" href="#matching-mut-directly-behind-">Matching <code>&amp;mut</code> directly behind <code>&amp;</code></a></h3>
<p>There is one notable situation where match ergonomics cannot be used, and explicit <code>ref</code> is required. This happens where <code>&amp;mut</code> is nested behind <code>&amp;</code>:</p>
<pre><code class="language-rust">// No way to avoid the `ref`, even with this RFC
let &amp;&amp;mut ref x = &amp;&amp;mut 42; // x: &amp;i32</code></pre>
<p>There are two strategies we could take to support this:</p>
<ul>
<li><code>&amp;mut</code> patterns could ‚Äústrip off‚Äù outer <code>&amp;</code>. For example, in <code>let &amp;mut x = &amp;&amp;mut 42;</code>, the <code>&amp;mut</code> pattern would match the <code>&amp;mut</code> reference in the scrutinee, leaving <code>&amp;</code> to be inherited and resulting in <code>x: &amp;i32</code>.
<ul>
<li>This may not extend gracefully to future language features (partial borrows, for example) as it potentially relies on reference types forming a total order.</li>
</ul>
</li>
<li>The compiler could insert <code>&amp;mut ref</code> in front of identifier patterns of type <code>&amp;mut</code> that are behind an <code>&amp;</code> pattern. For example, <code>let &amp;x = &amp;&amp;mut 42;</code> would be transformed into <code>let &amp;&amp;mut ref x = &amp;&amp;mut 42;</code>.
<ul>
<li>The full desugaring would be more complicated, as it would need to handle <code>@</code> patterns.</li>
</ul>
</li>
</ul>
<hr>
<ol class="footnote-definition">
<li id="footnote-nrmba">
<p>This is especially true in light of the <a href="#all-editions-the-default-binding-mode-is-never-set-to-ref-mut-behind-an--pattern-or-reference">new rule</a> that prevents the default binding mode from being set to <code>ref mut</code> behind <code>&amp;</code>. <a href="#fr-nrmba-1">‚Ü©</a></p>
</li>
<li id="footnote-sub">
<p>Making <code>&amp;mut</code> a subtype of <code>&amp;</code> in actual implementation would require adding significant complexity to the variance rules, but I do believe it to be possible. <a href="#fr-sub-1">‚Ü©</a></p>
</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="3624-supertrait-item-shadowing-v2.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="3631-rustdoc-cfgs-handling.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="3624-supertrait-item-shadowing-v2.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="3631-rustdoc-cfgs-handling.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
